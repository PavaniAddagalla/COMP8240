
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["apr apr","apr apr","apr apr","oct oct","oct oct","oct oct","oct oct","oct oct","walgreen qtr shr cts cts walgreen qtr shr cts cts","jun jun","jun jun","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","roto rooter inc roto qtr net shr cts cts net revs mln","<unk> corp <unk> qtr mar shr cts cts net revs mln mln","ford raises qtly payout cts shr cts ford raises qtly payout cts shr cts","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","<unk> microsystems inc <unk> qtr loss shr loss cts loss cts net loss loss revs avg shrs","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","<unk> corp <unk> qtr sept net shr cts cts net revs mln mln avg shrs mln mln","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","bancorp <unk> qtr net shr cts cts net mln mln avg shrs mln mln","tandy corp <unk> qtr sept net shr cts cts net mln mln revs mln mln avg shrs mln mln","ncr corp ncr qtr net shr cts cts net mln mln revs billion mln avg shrs mln mln","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","federal guarantee corp <unk> qtr net shr cts cts net revs mln mln","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","gte corp gte qtr mar shr cts cts net mln mln revs billion billion avg shrs mln mln","<unk> <unk> <unk> qtr net shr cts cts net sales mln mln avg shrs","<unk> inc <unk> qtr sept net shr cts cts net sales mln mln avg shrs mln mln","westinghouse electric corp qtr shr dlrs cts westinghouse electric corp qtr shr dlrs cts","napa valley bancorp <unk> qtr net shr cts cts net","united telecommunications inc qtr shr cts cts united telecommunications inc qtr shr cts cts","<unk> industries inc <unk> qtr sept shr cts cts net sales mln mln avg shrs mln mln","data <unk> inc <unk> qtr feb net shr cts cts net sales avg shrs","<unk> corp ohio <unk> qtr net shr cts cts net","<unk> systems inc <unk> qtr sept net shr cts cts net sales","ohio <unk> <unk> qtr net shr cts cts net mln mln revs mln mln avg shrs mln mln mths shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","<unk> laboratories ltd <unk> qtr net shr profit cts loss cts net profit loss revs","<unk> products inc <unk> qtr net shr cts cts net sales mln mln","rubbermaid inc <unk> qtr net shr cts cts net mln mln sales mln mln","<unk> corp <unk> qtr sept loss shr loss cts loss cts net loss loss revs mln mln","whirlpool corp <unk> qtr net shr cts cts net sales mln mln avg shrs","lsi <unk> systems inc <unk> qtr net qtr ends september shr cts cts net revs","<unk> inc <unk> qtr sept loss shr loss cts profit cts shr net loss profit revs mln mln","afg industries inc afg qtr net shr primary cts cts shr diluted cts cts net revs mln mln avg shrs primary","park communications inc <unk> qtr mar shr cts cts net revs mln mln","sumita welcomes west german joint confirmation louvre accord sumita welcomes west german joint confirmation louvre accord"];
var att_heads = [4,4,4,4,4,4,4,4,4,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,0,4,4,4,4,4,4,4,4,4,4,0,4,4,4,0];
var trigram_weights = [[0.23820185661315918, 0.23820185661315918],[0.23820185661315918, 0.23820185661315918],[0.23820185661315918, 0.23820185661315918],[0.05420639365911484, 0.05420639365911484],[0.05420639365911484, 0.05420639365911484],[0.05420639365911484, 0.05420639365911484],[0.05420639365911484, 0.05420639365911484],[0.05420639365911484, 0.05420639365911484],[0.007653968874365091, 0.4133952558040619, 0.07829215377569199, 0.00015218977932818234, 0.00015218977932818234, 0.007653968874365091, 0.4133952558040619, 0.07829215377569199, 0.00015218977932818234, 0.00015218977932818234],[0.046907179057598114, 0.046907179057598114],[0.046907179057598114, 0.046907179057598114],[0.0042493767105042934, 4.224089570925571e-05, 0.416418194770813, 0.0788646712899208, 0.00015330266614910215, 0.00015330266614910215, 0.0042493767105042934, 4.224089570925571e-05, 0.416418194770813, 0.0788646712899208, 0.00015330266614910215, 0.00015330266614910215],[0.0009450750658288598, 0.00015324239211622626, 0.41910073161125183, 0.07937271147966385, 0.00015429023187607527, 0.00015429023187607527, 0.0009450750658288598, 0.00015324239211622626, 0.41910073161125183, 0.07937271147966385, 0.00015429023187607527, 0.00015429023187607527],[0.0003691085148602724, 0.0001534192415419966, 0.41958439350128174, 0.07946430891752243, 0.00015446828911080956, 0.00015446828911080956, 0.0003691085148602724, 0.0001534192415419966, 0.41958439350128174, 0.07946430891752243, 0.00015446828911080956, 0.00015446828911080956],[0.0002113263326464221, 0.00015346769941970706, 0.41971689462661743, 0.07948940247297287, 0.00015451706713065505, 0.00015451706713065505, 0.0002113263326464221, 0.00015346769941970706, 0.41971689462661743, 0.07948940247297287, 0.00015451706713065505, 0.00015451706713065505],[0.00023326263180933893, 0.0006079094018787146, 4.583595000440255e-05, 0.00023326263180933893, 0.45185887813568115, 0.19252364337444305, 0.08557671308517456, 0.00016635000065434724, 0.00016635000065434724, 0.19252364337444305, 0.004654328804463148, 0.0711517333984375],[0.0002938586985692382, 0.00018807440937962383, 0.0002938586985692382, 0.5143623352050781, 0.00033489556517452, 0.09741412848234177, 0.0001893604057841003, 0.0001893604057841003, 0.21915452182292938, 0.005298139993101358, 0.08099380880594254, 0.08099380880594254],[0.0025498627219349146, 0.15751239657402039, 0.00024022463185247034, 0.2597534954547882, 0.00015479899593628943, 0.07963444292545319, 0.00015479899593628943, 0.0025498627219349146, 0.15751239657402039, 0.00024022463185247034, 0.2597534954547882, 0.00015479899593628943, 0.07963444292545319, 0.00015479899593628943],[0.00019663253624457866, 0.00014696671860292554, 0.30915606021881104, 0.13172222673892975, 0.05855049192905426, 0.00011381455260561779, 0.00011381455260561779, 0.00019663253624457866, 0.00014696671860292554, 0.30915606021881104, 0.13172222673892975, 0.05855049192905426, 0.00011381455260561779, 0.00011381455260561779],[0.0002787267731036991, 0.017690351232886314, 4.9489459343021736e-05, 0.0002787267731036991, 0.4878758192062378, 0.036940671503543854, 0.09239789098501205, 0.036940671503543854, 0.00017960950208362192, 0.036940671503543854, 0.00017960950208362192, 0.20786939561367035, 0.036940671503543854, 0.036940671503543854, 0.0050253183580935, 0.00319301662966609, 0.0002787267731036991],[0.00021286189439706504, 0.0001362351031275466, 0.00021286189439706504, 0.3725877106189728, 0.1587485522031784, 0.07056369632482529, 0.0001371666439808905, 0.0001371666439808905, 0.1587485522031784, 0.05866933986544609, 0.05866933986544609, 0.003837804077193141, 0.05866933986544609, 0.05866933986544609],[0.00021217187168076634, 0.00013579349615611136, 0.00021217187168076634, 0.37137994170188904, 0.0005988616030663252, 0.15823395550251007, 0.07033495604991913, 0.00013672201021108776, 0.00013672201021108776, 0.15823395550251007, 0.0038253634702414274, 0.05847915634512901, 0.05847915634512901, 0.0024305821862071753, 0.00021217187168076634, 0.05847915634512901, 0.05847915634512901],[0.010722197592258453, 0.25547829270362854, 0.04838455840945244, 0.09259800612926483, 0.09259800612926483, 0.010722197592258453, 0.25547829270362854, 0.04838455840945244, 0.09259800612926483, 0.09259800612926483],[0.0003361946437507868, 0.00021311757154762745, 0.3730352520942688, 0.15893924236297607, 0.07064845412969589, 0.0001373314153170213, 0.0001373314153170213, 0.15893924236297607, 0.058739811182022095, 0.058739811182022095, 0.0024414160288870335, 0.00021311757154762745, 0.058739811182022095, 0.058739811182022095],[0.0001408581156283617, 0.00012155723379692063, 0.0001899282942758873, 0.3324453830718994, 0.0005360784125514328, 0.14164510369300842, 0.06296121329069138, 0.0001223884173668921, 0.0001223884173668921, 0.14164510369300842, 0.05234834551811218, 0.05234834551811218, 0.0034243217669427395, 0.05234834551811218, 0.05234834551811218, 0.0021757660433650017, 0.0001899282942758873, 0.05234834551811218, 0.05234834551811218],[0.0002469894243404269, 0.00010266067693009973, 0.0002469894243404269, 0.2807654142379761, 0.11962580680847168, 0.05317363888025284, 0.00010336264676880091, 0.00010336264676880091, 0.11962580680847168, 0.044210586696863174, 0.044210586696863174, 0.002891997341066599, 0.2000630795955658, 0.044210586696863174, 0.001837534480728209, 0.0001604031858732924, 0.044210586696863174, 0.044210586696863174],[0.003041910007596016, 0.17253175377845764, 0.04105626791715622, 4.520989750744775e-05, 0.00010021840716945007, 0.013267395086586475, 0.26341676712036133, 0.003041910007596016, 0.17253175377845764, 0.04105626791715622, 4.520989750744775e-05, 0.00010021840716945007, 0.013267395086586475, 0.26341676712036133],[0.00784128438681364, 0.015212795697152615, 0.0001508239220129326, 0.0002356563345529139, 0.4124864935874939, 0.17574824392795563, 0.07812004536390305, 0.00015185521624516696, 0.00015185521624516696, 0.17574824392795563, 0.004248777404427528, 0.06495197862386703, 0.06495197862386703],[4.0864761103875935e-05, 0.00011774417362175882, 0.3220170736312866, 4.575608272716636e-06, 0.060986217111349106, 0.1167149692773819, 0.00011854928015964106, 4.0864761103875935e-05, 0.00011774417362175882, 0.3220170736312866, 4.575608272716636e-06, 0.060986217111349106, 0.1167149692773819, 0.00011854928015964106],[0.00013642625708598644, 9.907436469802633e-05, 0.00013642625708598644, 0.27095726132392883, 0.00017641723388805985, 0.05131608992815018, 9.975181455956772e-05, 9.975181455956772e-05, 0.11544684320688248, 0.04266614839434624, 0.04266614839434624, 0.002790969330817461, 0.19307413697242737, 0.19307413697242737, 0.0017733427230268717, 0.00015479972353205085, 0.04266614839434624, 0.04266614839434624],[0.0002044501743512228, 0.0002044501743512228, 0.0002044501743512228, 0.3578640818595886, 0.1524752527475357, 0.06777521222829819, 0.00013174620107747614, 0.00013174620107747614, 0.1524752527475357, 0.1528760939836502, 0.056350890547037125, 0.056350890547037125, 0.00234212470240891, 0.0002044501743512228],[0.00018374211504124105, 3.2624415325699374e-05, 0.00018374211504124105, 0.3216172456741333, 0.0005186177440918982, 0.13703155517578125, 0.06091048941016197, 0.00011840208026114851, 0.00011840208026114851, 0.13703155517578125, 0.13739179074764252, 0.05064329877495766, 0.05064329877495766, 0.0021048986818641424, 0.00018374211504124105, 0.05064329877495766, 0.05064329877495766],[0.002954117488116026, 6.723004480591044e-05, 0.0001170433170045726, 0.320100337266922, 0.060623206198215485, 0.11602023988962173, 0.0001178436359623447, 0.002954117488116026, 6.723004480591044e-05, 0.0001170433170045726, 0.320100337266922, 0.060623206198215485, 0.11602023988962173, 0.0001178436359623447],[5.05509706272278e-05, 5.9992157730448525e-06, 0.00044058240018785, 0.00027929016505368054, 0.48886194825172424, 0.20828956365585327, 0.09258465468883514, 0.00017997254326473922, 0.00017997254326473922, 0.20828956365585327],[0.4976062774658203, 4.381887993076816e-05, 0.0009159744367934763, 0.0011773419100791216, 0.0001080258225556463, 7.424951763823628e-05, 7.424951763823628e-05, 0.4976062774658203, 4.381887993076816e-05, 0.0009159744367934763, 0.0011773419100791216, 0.0001080258225556463, 7.424951763823628e-05, 7.424951763823628e-05],[0.0002128440246451646, 0.0001378810266032815, 3.779161852435209e-05, 0.0002128440246451646, 0.3725564181804657, 0.0006007587653584778, 0.07055777311325073, 0.00013715513341594487, 0.00013715513341594487, 0.1587352305650711, 0.15915252268314362, 0.058664415031671524, 0.058664415031671524, 0.0024382821284234524, 0.0002128440246451646, 0.058664415031671524, 0.058664415031671524],[0.050183702260255814, 0.0002189738879678771, 3.888001083396375e-05, 0.0002189738879678771, 0.3832859992980957, 0.0001043418378685601, 0.16330677270889282, 0.07258982211351395, 0.00014110517804510891, 0.00014110517804510891, 0.16330677270889282, 0.16373609006404877, 0.0025085043162107468, 0.0002189738879678771],[0.00027928166673518717, 0.00017874485638458282, 6.960882456041873e-05, 0.00027928166673518717, 0.4888470768928528, 0.2082832157611847, 0.0925818383693695, 0.00017996705719269812, 0.00017996705719269812, 0.2082832157611847],[0.00022833568800706416, 0.011656220071017742, 4.054224700666964e-05, 0.00022833568800706416, 0.39967262744903564, 0.0006444844766519964, 0.17028863728046417, 0.07569325715303421, 0.00014713784912601113, 0.00014713784912601113, 0.17028863728046417, 0.17073629796504974],[2.2182895918376744e-05, 8.900130342226475e-05, 8.900130342226475e-05, 0.155785471200943, 0.06637556850910187, 0.029503921046853065, 5.735179001931101e-05, 5.735179001931101e-05, 0.06637556850910187, 0.02453068271279335, 0.02453068271279335, 0.0016046534292399883, 0.02453068271279335, 0.02453068271279335, 0.001019574236124754, 8.900130342226475e-05, 0.02453068271279335, 0.02453068271279335, 8.900130342226475e-05, 0.029503921046853065, 0.056464385241270065, 0.056464385241270065, 0.06637556850910187, 0.02453068271279335, 0.02453068271279335, 0.0016046534292399883, 0.11100698262453079, 0.11100698262453079, 0.001019574236124754, 8.900130342226475e-05, 0.02453068271279335, 0.02453068271279335],[0.00017136514361482114, 0.00014259172894526273, 1.4117489627096802e-05, 0.00017136514361482114, 0.2999529242515564, 0.1278010457754135, 0.05680752918124199, 0.16911642253398895, 0.00011042645201086998, 0.02271164581179619, 0.00011042645201086998, 0.1278010457754135, 0.16911642253398895, 0.02271164581179619, 0.0030896365642547607],[0.00020421980298124254, 0.004246907774358988, 3.626034231274389e-05, 0.00020421980298124254, 0.3574608564376831, 0.15230345726013184, 0.06769884377717972, 0.00013159775699023157, 0.00013159775699023157, 0.15230345726013184, 0.15270383656024933, 0.05628739297389984, 0.05628739297389984],[0.0032810172997415066, 3.261492383899167e-05, 0.00018368866585660726, 0.32152366638183594, 0.1369916945695877, 0.06089277192950249, 0.00011836763587780297, 0.00011836763587780297, 0.1369916945695877, 0.05062856525182724, 0.05062856525182724, 0.13735182583332062, 0.05062856525182724, 0.05062856525182724],[0.0002459209645166993, 0.00015739345690235496, 0.0002459209645166993, 0.43045341968536377, 0.0006941194296814501, 0.03259279951453209, 0.08152277022600174, 0.03259279951453209, 0.00015846967289689928, 0.03259279951453209, 0.00015846967289689928, 0.18340341746807098, 0.03259279951453209, 0.03259279951453209, 0.004433844238519669, 0.06778113543987274, 0.06778113543987274],[0.0008068890892900527, 0.0001308357750531286, 0.0002044256398221478, 0.35782110691070557, 0.15245695412158966, 0.06776707619428635, 0.0001317303831456229, 0.0001317303831456229, 0.15245695412158966, 0.15285775065422058, 0.05634412541985512, 0.05634412541985512, 0.002341843442991376, 0.0002044256398221478],[6.103658961365e-05, 0.01026141457259655, 0.024814525619149208, 0.0038357798475772142, 0.01026141457259655, 0.004930295515805483, 0.008732105605304241, 0.004930295515805483, 0.5407564043998718, 0.35572534799575806, 0.0004523743409663439, 0.00031093115103431046, 0.00031093115103431046, 0.008732105605304241, 0.015623587183654308],[0.0001637713867239654, 2.9078504667268135e-05, 0.0001637713867239654, 0.2866610288619995, 0.0004622497654054314, 0.02170521765947342, 0.05429019778966904, 0.02170521765947342, 0.00010553309402894229, 0.1616223156452179, 0.00010553309402894229, 0.05429019778966904, 0.12213774770498276, 0.02170521765947342, 0.1616223156452179, 0.002952724462375045, 0.04513893648982048, 0.04513893648982048],[0.0005701616173610091, 0.00013561426021624357, 3.7170324503676966e-05, 0.0005701616173610091, 0.3664315938949585, 0.15612562000751495, 0.06939779967069626, 0.003702018642798066, 0.0001349002995993942, 0.0001349002995993942, 0.06939779967069626, 0.05127360299229622, 0.0001349002995993942, 0.0001349002995993942, 0.15612562000751495, 0.003774393582716584, 0.05769997090101242, 0.05769997090101242, 0.002398196840658784, 0.00020934487110935152, 0.003702018642798066],[2.39409928326495e-05, 3.997922613052651e-05, 5.221066385274753e-05, 0.00029405270470306277, 0.5147019028663635, 0.00033511663787066936, 0.09747843444347382, 0.00018948540673591197, 0.00018948540673591197, 0.21929919719696045, 0.005301637575030327, 0.08104728162288666, 0.08104728162288666],[1.9746669295273023e-06, 0.0009371768101118505, 0.4481601417064667, 0.0069718630984425545, 0.030829526484012604, 0.002712237648665905, 0.009571360424160957, 0.0008157197153195739, 1.9746669295273023e-06, 0.0009371768101118505, 0.4481601417064667, 0.0069718630984425545, 0.030829526484012604, 0.002712237648665905, 0.009571360424160957, 0.0008157197153195739]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>