
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["jun jun","jun jun","oct oct","oct oct","oct oct","oct oct","oct oct","apr apr","apr apr","apr apr","walgreen qtr shr cts cts walgreen qtr shr cts cts","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","stoltenberg declines comment possible changed targets currencies stoltenberg declines comment possible changed targets currencies","stoltenberg rule central bank intervention stabilize currencies stoltenberg rule central bank intervention stabilize currencies","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","bancorp usbc qtr net shr cts cts net mln mln avg shrs mln mln","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","napa valley bancorp <unk> qtr net shr cts cts net","gte corp qtr shr cts cts gte corp qtr shr cts cts","cable wireless merge two units new telecommunication operation cable wireless merge two units new telecommunication operation","sumita welcomes west german joint confirmation louvre accord sumita welcomes west german joint confirmation louvre accord","<unk> savings bank <unk> qtr net shr cts cts net avg shrs","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","circle express terminates planned acquisition overland express circle express terminates planned acquisition overland express","john <unk> qtr net shr cts cts net mln revs mln mln","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","national city bancorp <unk> qtr net shr cts cts net","marked dollar fall would burden trade deficit stoltenberg marked dollar fall would burden trade deficit stoltenberg","<unk> corp ohio <unk> qtr net shr cts cts net","balladur urges respect pledges monetary policy louvre accord balladur urges respect pledges monetary policy louvre accord","tecsyn international terminates takeover talks investor group tecsyn international terminates takeover talks investor group","raytheon <unk> qtr net shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","ford raises qtly payout cts shr cts ford raises qtly payout cts shr cts","federated department stores march sales pct federated department stores march sales pct","fleet financial group qtr shr cts cts fleet financial group qtr shr cts cts","<unk> <unk> <unk> qtr net shr cts cts net sales mln mln avg shrs","<unk> <unk> bank trust <unk> qtr net shr cts cts shr diluted cts cts net avg shrs avg shrs diluted","stop shop cos split hikes dividend stop shop cos split hikes dividend","tokyo bundesbank schlesinger sees reason lower interest rates tokyo bundesbank schlesinger sees reason lower interest rates","sec charges campeau allied stores disclosure violations recent takeover sec charges campeau allied stores disclosure violations recent takeover","southern national corp <unk> qtr net shr cts cts net","american republic bancorp <unk> qtr net shr profit cts profit nine cts net profit profit avg shrs nine mths shr profit cts loss cts net profit loss avg shrs","fed sets overnight system repurchases fed says fed sets overnight system repurchases fed says","ohio edison <unk> qtr net shr cts cts net mln mln revs mln mln avg shrs mln mln mths shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","nakasone sumita agree discount rate cut appropriate central bank sources nakasone sumita agree discount rate cut appropriate central bank sources","general electric qtr shr dlrs dlrs general electric qtr shr dlrs dlrs","bank japan intervening support dollar yen dealers bank japan intervening support dollar yen dealers","burmah oil pre tax profit mln stg mln burmah oil pre tax profit mln stg mln"];
var att_heads = [0,0,0,0,0,0,0,3,3,3,3,3,0,0,1,4,3,3,0,3,0,4,1,4,1,1,3,3,4,1,0,4,4,3,3,4,4,3,4,1,1,4,0,3,2,3,1,3,4,3];
var trigram_weights = [[0.4233284890651703, 0.4233284890651703],[0.4233284890651703, 0.4233284890651703],[0.4647471606731415, 0.4647471606731415],[0.4647471606731415, 0.4647471606731415],[0.4647471606731415, 0.4647471606731415],[0.4647471606731415, 0.4647471606731415],[0.4647471606731415, 0.4647471606731415],[0.4570516049861908, 0.4570516049861908],[0.4570516049861908, 0.4570516049861908],[0.4570516049861908, 0.4570516049861908],[0.0009589320980012417, 0.1225840300321579, 0.2390202283859253, 0.06799918413162231, 0.06799918413162231, 0.0009589320980012417, 0.1225840300321579, 0.2390202283859253, 0.06799918413162231, 0.06799918413162231],[6.473188113886863e-05, 0.008274929597973824, 0.016134852543473244, 0.23771420121192932, 0.23771420121192932, 6.473188113886863e-05, 0.008274929597973824, 0.016134852543473244, 0.23771420121192932, 0.23771420121192932],[0.27036648988723755, 0.1878816783428192, 0.013543857261538506, 0.005480904597789049, 0.011132142506539822, 0.011132142506539822, 0.27036648988723755, 0.1878816783428192, 0.013543857261538506, 0.005480904597789049, 0.011132142506539822, 0.011132142506539822],[0.00047430346603505313, 0.4781293272972107, 0.006940762512385845, 0.0028087752871215343, 0.005704841576516628, 0.005704841576516628, 0.00047430346603505313, 0.4781293272972107, 0.006940762512385845, 0.0028087752871215343, 0.005704841576516628, 0.005704841576516628],[0.00022426151554100215, 0.013867869041860104, 0.004074119497090578, 0.03309382125735283, 0.4480096995830536, 0.0005022627883590758, 3.732813183887629e-06, 0.00022426151554100215, 0.013867869041860104, 0.004074119497090578, 0.03309382125735283, 0.4480096995830536, 0.0005022627883590758, 3.732813183887629e-06],[0.00031876799766905606, 0.05933276563882828, 0.0009731564205139875, 0.19002634286880493, 0.0859220027923584, 0.00013079967175144702, 0.163296177983284, 0.00031876799766905606, 0.05933276563882828, 0.0009731564205139875, 0.19002634286880493, 0.0859220027923584, 0.00013079967175144702, 0.163296177983284],[0.01948758400976658, 0.0005803968524560332, 0.1147693619132042, 0.014051325619220734, 0.22378280758857727, 0.0636642724275589, 0.0636642724275589, 0.01948758400976658, 0.0005803968524560332, 0.1147693619132042, 0.014051325619220734, 0.22378280758857727, 0.0636642724275589, 0.0636642724275589],[0.0002135650720447302, 0.0002135650720447302, 0.027300860732793808, 0.0033424710854887962, 0.05323252081871033, 0.015144191682338715, 0.015144191682338715, 0.0033424710854887962, 0.21534249186515808, 0.21534249186515808, 0.02048269473016262, 0.0002135650720447302, 0.21534249186515808, 0.21534249186515808],[0.019014565274119377, 0.39353299140930176, 0.028368676081299782, 0.011480187065899372, 0.02331715077161789, 0.02331715077161789, 0.019014565274119377, 0.39353299140930176, 0.028368676081299782, 0.011480187065899372, 0.02331715077161789, 0.02331715077161789],[0.12796026468276978, 0.00011856763740070164, 0.0015704206889495254, 0.0015704206889495254, 0.20075300335884094, 0.024578388780355453, 0.3914378583431244, 0.11136067658662796, 0.11136067658662796, 0.024578388780355453],[0.03865465521812439, 0.37746381759643555, 0.0272102952003479, 0.011011416092514992, 0.022365039214491844, 0.022365039214491844, 0.03865465521812439, 0.37746381759643555, 0.0272102952003479, 0.011011416092514992, 0.022365039214491844, 0.022365039214491844],[0.024520067498087883, 0.03240332007408142, 0.00020547967869788408, 0.0002362831583013758, 0.046405717730522156, 0.005108295939862728, 0.08478394895792007, 0.3062642216682434, 0.024520067498087883, 0.03240332007408142, 0.00020547967869788408, 0.0002362831583013758, 0.046405717730522156, 0.005108295939862728, 0.08478394895792007, 0.3062642216682434],[0.0006765066646039486, 0.3906959891319275, 0.003265618346631527, 5.046606747782789e-05, 0.08468689769506454, 0.012760194018483162, 0.0012992130359634757, 0.006565142888575792, 0.0006765066646039486, 0.3906959891319275, 0.003265618346631527, 5.046606747782789e-05, 0.08468689769506454, 0.012760194018483162, 0.0012992130359634757, 0.006565142888575792],[0.0011555589735507965, 0.23279263079166412, 0.6888603568077087, 0.0011555589735507965, 2.227619188488461e-05, 0.03644336387515068, 0.00012150208203820512, 0.00032409519189968705, 0.00032409519189968705, 0.03644336387515068, 4.595673817675561e-05, 0.0011555589735507965],[7.90095600677887e-06, 0.000141848242492415, 0.086546890437603, 0.00022295354574453086, 0.00022295354574453086, 0.027162106707692146, 0.38569536805152893, 7.90095600677887e-06, 0.000141848242492415, 0.086546890437603, 0.00022295354574453086, 0.00022295354574453086, 0.027162106707692146, 0.38569536805152893],[0.00012697344936896116, 0.18179750442504883, 0.0862288773059845, 0.0346786305308342, 0.013186457566916943, 0.0021840427070856094, 0.18179750442504883, 0.00012697344936896116, 0.18179750442504883, 0.0862288773059845, 0.0346786305308342, 0.013186457566916943, 0.0021840427070856094, 0.18179750442504883],[0.004228518810123205, 0.00027725944528356194, 0.03544316440820694, 0.004339341074228287, 0.06910876929759979, 0.019660847261548042, 0.019660847261548042, 0.004339341074228287, 0.2795669734477997, 0.003963765688240528, 0.2795669734477997, 0.2795669734477997],[0.0004340567684266716, 0.0024449622724205256, 0.008229413069784641, 0.016046103090047836, 0.23640663921833038, 0.23640663921833038, 0.0004340567684266716, 0.0024449622724205256, 0.008229413069784641, 0.016046103090047836, 0.23640663921833038, 0.23640663921833038],[0.08403017371892929, 0.8703151941299438, 0.0006639704806730151, 0.0006639704806730151, 1.2799629985238425e-05, 0.02093992568552494, 6.98137009749189e-05, 0.0001862213684944436, 0.0001862213684944436, 0.02093992568552494],[0.43677955865859985, 7.121747330529615e-06, 0.05742130056023598, 0.004027329385280609, 0.0003631251456681639, 0.001014413544908166, 3.509541056700982e-05, 0.00023469101870432496, 0.43677955865859985, 7.121747330529615e-06, 0.05742130056023598, 0.004027329385280609, 0.0003631251456681639, 0.001014413544908166, 3.509541056700982e-05, 0.00023469101870432496],[0.003426476614549756, 0.695569634437561, 0.13330961763858795, 0.003426476614549756, 0.05014164000749588, 0.0005646511563099921, 0.02029123343527317, 0.04121306911110878, 0.04121306911110878, 0.0005646511563099921],[0.000278252933640033, 9.046310151461512e-05, 0.0017935523064807057, 0.018690340220928192, 0.2675918936729431, 0.1599833369255066, 1.6502372091053985e-05, 0.05141652747988701, 0.000278252933640033, 9.046310151461512e-05, 0.0017935523064807057, 0.018690340220928192, 0.2675918936729431, 0.1599833369255066, 1.6502372091053985e-05, 0.05141652747988701],[9.792700438993052e-05, 0.03641750290989876, 1.690177850832697e-05, 0.1272771656513214, 0.002305791713297367, 0.1549522876739502, 0.1788344830274582, 9.792700438993052e-05, 0.03641750290989876, 1.690177850832697e-05, 0.1272771656513214, 0.002305791713297367, 0.1549522876739502, 0.1788344830274582],[8.070368494372815e-05, 8.070368494372815e-05, 0.010316667146980762, 0.0012630796991288662, 0.0201159305870533, 0.29636725783348083, 0.29636725783348083, 0.0012630796991288662, 0.08137533068656921, 0.08137533068656921, 0.001153758610598743, 0.019834689795970917, 0.019834689795970917, 0.007740164641290903, 8.070368494372815e-05, 0.08137533068656921, 0.08137533068656921],[0.0020691093523055315, 0.007786658592522144, 0.001084181829355657, 0.06505884975194931, 0.0768808126449585, 0.27023956179618835, 0.0768808126449585, 0.0020691093523055315, 0.007786658592522144, 0.001084181829355657, 0.06505884975194931, 0.0768808126449585, 0.27023956179618835, 0.0768808126449585],[0.00011322675709379837, 0.22430482506752014, 0.04163491353392601, 0.0023255387786775827, 0.2314792275428772, 5.576384864980355e-05, 0.00011322675709379837, 0.22430482506752014, 0.04163491353392601, 0.0023255387786775827, 0.2314792275428772, 5.576384864980355e-05],[0.10585110634565353, 0.16096173226833344, 0.23309966921806335, 2.4606035822216654e-06, 1.3420987670542672e-05, 3.579920303309336e-05, 3.579920303309336e-05, 0.10585110634565353, 0.16096173226833344, 0.23309966921806335, 2.4606035822216654e-06, 1.3420987670542672e-05, 3.579920303309336e-05, 3.579920303309336e-05],[0.0003732269105967134, 0.0003732269105967134, 0.0003732269105967134, 0.04771106317639351, 0.005841311998665333, 0.09302930533885956, 0.02646603249013424, 0.02646603249013424, 0.005841311998665333, 0.004690156318247318, 0.3763331472873688, 0.3763331472873688, 0.03579561784863472, 0.0003732269105967134],[0.0011453746119514108, 0.0011453746119514108, 0.6827892065048218, 0.2348153442144394, 0.0011453746119514108, 2.2079862901591696e-05, 0.03612217679619789, 0.00012043123570038006, 0.0003212388255633414, 0.0003212388255633414, 0.00012043123570038006, 0.0002472231863066554, 0.0003212388255633414, 0.0003212388255633414, 0.03612217679619789, 4.555170380626805e-05, 0.0011453746119514108, 4.555170380626805e-05, 0.0011453746119514108, 0.0002472231863066554],[0.13728146255016327, 0.004236435052007437, 3.170184572809376e-05, 0.3580945134162903, 0.0002295189187861979, 5.1626043386932e-06, 0.13728146255016327, 0.004236435052007437, 3.170184572809376e-05, 0.3580945134162903, 0.0002295189187861979, 5.1626043386932e-06],[3.3539990909048356e-06, 0.00039909512270241976, 0.00039909512270241976, 0.08852068334817886, 0.00045327379484660923, 0.4010697603225708, 0.008813928812742233, 0.00014127201575320214, 3.3539990909048356e-06, 0.00039909512270241976, 0.00039909512270241976, 0.08852068334817886, 0.00045327379484660923, 0.4010697603225708, 0.008813928812742233, 0.00014127201575320214],[0.0009173534344881773, 0.03940274566411972, 0.0001829233078751713, 8.180821168934926e-05, 0.04401356726884842, 0.14322464168071747, 0.033325932919979095, 0.001102927722968161, 0.23774810135364532, 0.0009173534344881773, 0.03940274566411972, 0.0001829233078751713, 8.180821168934926e-05, 0.04401356726884842, 0.14322464168071747, 0.033325932919979095, 0.001102927722968161, 0.23774810135364532],[0.0009581813937984407, 0.0007722784066572785, 0.8043497800827026, 0.003962343093007803, 0.057983290404081345, 0.000652956950943917, 0.02346457913517952, 0.04765838012099266, 0.04765838012099266, 0.000652956950943917],[0.004308607894927263, 0.006638059392571449, 0.000687873107381165, 0.000687873107381165, 0.0879335030913353, 0.010765785351395607, 0.1714569628238678, 0.008305437862873077, 0.04877801984548569, 0.008305437862873077, 0.0004477663605939597, 0.04877801984548569, 0.010765785351395607, 0.008305437862873077, 0.008305437862873077, 0.06597284227609634, 0.000687873107381165, 0.0004477663605939597, 0.1417914628982544, 0.1714569628238678, 0.008305437862873077, 0.04877801984548569, 0.0014459043741226196, 0.04877801984548569, 0.010765785351395607, 0.008305437862873077, 0.0014459043741226196, 0.06597284227609634, 0.000687873107381165],[0.0008702164050191641, 0.0003465399204287678, 0.0044843414798378944, 0.0006216321489773691, 2.0004566977149807e-05, 0.0008702164050191641, 0.49278703331947327, 0.0008702164050191641, 0.0003465399204287678, 0.0044843414798378944, 0.0006216321489773691, 2.0004566977149807e-05, 0.0008702164050191641, 0.49278703331947327],[0.000825705355964601, 0.0025098829064518213, 5.2001669246237725e-05, 0.006647576577961445, 0.0008138693519867957, 0.01296176202595234, 0.003687509335577488, 0.003687509335577488, 0.0008138693519867957, 0.05243444815278053, 0.05243444815278053, 0.0007434278959408402, 0.05243444815278053, 0.05243444815278053, 0.004987399093806744, 5.2001669246237725e-05, 0.05243444815278053, 0.05243444815278053, 0.0107191177085042, 0.01296176202595234, 0.1909651756286621, 0.1909651756286621, 0.0008138693519867957, 0.05243444815278053, 0.05243444815278053, 0.0007434278959408402, 0.012780544348061085, 0.012780544348061085, 0.004987399093806744, 5.2001669246237725e-05, 0.05243444815278053, 0.05243444815278053],[0.00011598534183576703, 0.00011598534183576703, 0.1750512719154358, 0.06197044998407364, 0.0016024940414354205, 0.15999820828437805, 0.06774779409170151, 0.033367324620485306, 1.471908763051033e-05, 1.5787285519763827e-05, 0.00011598534183576703, 0.00011598534183576703, 0.1750512719154358, 0.06197044998407364, 0.0016024940414354205, 0.15999820828437805, 0.06774779409170151, 0.033367324620485306, 1.471908763051033e-05, 1.5787285519763827e-05],[1.173809437204909e-06, 1.3383771147346124e-05, 0.008276831358671188, 0.016138561069965363, 0.23776882886886597, 0.23776882886886597, 1.173809437204909e-06, 1.3383771147346124e-05, 0.008276831358671188, 0.016138561069965363, 0.23776882886886597, 0.23776882886886597],[0.26465699076652527, 0.001072071143426001, 0.004838955122977495, 0.0005243662162683904, 0.03472323715686798, 0.09007084369659424, 0.10411354154348373, 0.26465699076652527, 0.001072071143426001, 0.004838955122977495, 0.0005243662162683904, 0.03472323715686798, 0.09007084369659424, 0.10411354154348373],[0.00018251006258651614, 0.0035960052628070116, 0.002758490387350321, 0.0028151588048785925, 0.0022036416921764612, 0.1840290129184723, 0.12029490619897842, 0.1840290129184723, 0.00018251006258651614, 0.0035960052628070116, 0.002758490387350321, 0.0028151588048785925, 0.0022036416921764612, 0.1840290129184723, 0.12029490619897842, 0.1840290129184723]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>