
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["jun jun","jun jun","walgreen qtr shr cts cts walgreen qtr shr cts cts","oct oct","oct oct","oct oct","oct oct","oct oct","apr apr","apr apr","apr apr","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","morgan inc qtr shr dlrs dlrs morgan inc qtr shr dlrs dlrs","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","bancorp <unk> qtr net shr cts cts net mln mln avg shrs mln mln","<unk> bancorp inc <unk> qtr net shr dlrs dlrs net avg shrs","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","napa valley bancorp <unk> qtr net shr cts cts net","ncr corp ncr qtr net shr cts cts net mln mln revs billion mln avg shrs mln mln","<unk> acquire prince mln dlrs <unk> acquire prince mln dlrs","westinghouse electric corp qtr shr dlrs cts westinghouse electric corp qtr shr dlrs cts","cable wireless merge two units new telecommunication operation cable wireless merge two units new telecommunication operation","<unk> microsystems inc <unk> qtr loss shr loss cts loss cts net loss loss revs avg shrs","roto rooter inc roto qtr net shr cts cts net revs mln","<unk> corp <unk> qtr net shr dlrs dlr net","ohio <unk> <unk> qtr net shr cts cts net mln mln revs mln mln avg shrs mln mln mths shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","raytheon <unk> qtr net shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","marathon raises crude oil postings cts bbl wti dlrs marathon raises crude oil postings cts bbl wti dlrs","<unk> corp ohio <unk> qtr net shr cts cts net","star <unk> inc <unk> qtr march net shr three cts two cts net rev avg shrs","general electric qtr shr dlrs dlrs general electric qtr shr dlrs dlrs","john <unk> qtr net shr cts cts net mln revs mln mln","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","tandy corp <unk> qtr sept net shr cts cts net mln mln revs mln mln avg shrs mln mln","boeing acquire argosystems dlrs share boeing acquire argosystems dlrs share","circle express terminates planned acquisition overland express circle express terminates planned acquisition overland express","<unk> corp <unk> qtr sept net shr cts cts net revs mln mln avg shrs mln mln","<unk> oil gas ltd <unk> qtr net shr three cts three cts net revs avg shrs","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","simon schuster acquire woodhead faulkner undisclosed terms simon schuster acquire woodhead faulkner undisclosed terms","ibc acquisition gets shares tender buy pct ibc acquisition gets shares tender buy pct","united telecommunications inc qtr shr cts cts united telecommunications inc qtr shr cts cts","<unk> corp <unk> qtr mar shr cts cts net revs mln mln","<unk> <unk> inc qtr net shr cts cts net revs mln mln avg shrs six mths shr cts cts net revs mln mln avg shrs","ford raises qtly payout cts shr cts ford raises qtly payout cts shr cts"];
var att_heads = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,2,2,0,0,0,0];
var trigram_weights = [[0.48806241154670715, 0.48806241154670715],[0.48806241154670715, 0.48806241154670715],[0.00112536724191159, 0.26615986227989197, 0.05868929997086525, 0.08616870641708374, 0.08616870641708374, 0.00112536724191159, 0.26615986227989197, 0.05868929997086525, 0.08616870641708374, 0.08616870641708374],[0.4869535267353058, 0.4869535267353058],[0.4869535267353058, 0.4869535267353058],[0.4869535267353058, 0.4869535267353058],[0.4869535267353058, 0.4869535267353058],[0.4869535267353058, 0.4869535267353058],[0.4868606626987457, 0.4868606626987457],[0.4868606626987457, 0.4868606626987457],[0.4868606626987457, 0.4868606626987457],[0.0010534659959375858, 0.24915458261966705, 0.05493956431746483, 0.0966360867023468, 0.0966360867023468, 0.0010534659959375858, 0.24915458261966705, 0.05493956431746483, 0.0966360867023468, 0.0966360867023468],[0.0008550559869036078, 0.1209542378783226, 0.20222873985767365, 0.0445922315120697, 0.06547113507986069, 0.06547113507986069, 0.0008550559869036078, 0.1209542378783226, 0.20222873985767365, 0.0445922315120697, 0.06547113507986069, 0.06547113507986069],[0.0712224543094635, 0.08485712856054306, 0.18390345573425293, 0.04055143520236015, 0.05953836068511009, 0.05953836068511009, 0.0712224543094635, 0.08485712856054306, 0.18390345573425293, 0.04055143520236015, 0.05953836068511009, 0.05953836068511009],[0.0026672908570617437, 0.09400973469018936, 0.20373909175395966, 0.008815644308924675, 0.0449252724647522, 0.07902141660451889, 0.0659601092338562, 0.0026672908570617437, 0.09400973469018936, 0.20373909175395966, 0.008815644308924675, 0.0449252724647522, 0.07902141660451889, 0.0659601092338562],[0.043274469673633575, 0.09038817137479782, 0.1958903968334198, 0.04319460317492485, 0.06341911107301712, 0.06341911107301712, 0.043274469673633575, 0.09038817137479782, 0.1958903968334198, 0.04319460317492485, 0.06341911107301712, 0.06341911107301712],[0.1493612378835678, 0.08077194541692734, 0.13504616916179657, 0.029778216034173965, 0.052378468215465546, 0.052378468215465546, 0.1493612378835678, 0.08077194541692734, 0.13504616916179657, 0.029778216034173965, 0.052378468215465546, 0.052378468215465546],[0.0037388738710433245, 0.06083432212471962, 0.21789535880088806, 0.0480467863380909, 0.08451201021671295, 0.08451201021671295, 0.0037388738710433245, 0.06083432212471962, 0.21789535880088806, 0.0480467863380909, 0.08451201021671295, 0.08451201021671295],[0.0007893762667663395, 0.0007893762667663395, 0.18669484555721283, 0.0021800948306918144, 0.04116695374250412, 0.06044207140803337, 0.06044207140803337, 0.0021800948306918144, 0.07591556012630463, 0.07591556012630463, 0.3408634662628174, 0.0007893762667663395, 0.07591556012630463, 0.07591556012630463],[0.0009470426593907177, 0.0009470426593907177, 0.13396646082401276, 0.0009470426593907177, 0.22398443520069122, 0.002615537028759718, 0.04938945174217224, 0.08687370270490646, 0.08687370270490646, 0.002615537028759718, 0.4089459776878357, 0.0009470426593907177],[0.0008326295064762235, 0.09878762066364288, 0.21409377455711365, 0.047208521515131, 0.06931241601705551, 0.06931241601705551, 0.0008326295064762235, 0.09878762066364288, 0.21409377455711365, 0.047208521515131, 0.06931241601705551, 0.06931241601705551],[0.03480985388159752, 0.07589008659124374, 0.009483333677053452, 0.018223099410533905, 0.018223099410533905, 0.14805686473846436, 0.19531363248825073, 0.03480985388159752, 0.07589008659124374, 0.009483333677053452, 0.018223099410533905, 0.018223099410533905, 0.14805686473846436, 0.19531363248825073],[0.056964583694934845, 0.00038206743192858994, 0.0020840270444750786, 0.0020840270444750786, 0.49289190769195557, 0.0057556540705263615, 0.10868460685014725, 0.15957273542881012, 0.15957273542881012, 0.0057556540705263615],[0.05422111228108406, 0.06460108608007431, 0.05422111228108406, 0.14000429213047028, 0.0016348743811249733, 0.030871501192450523, 0.045326102524995804, 0.045326102524995804, 0.0016348743811249733, 0.0569298230111599, 0.0569298230111599, 0.007218319457024336, 0.014082679525017738, 0.0569298230111599, 0.25561684370040894, 0.0005919609684497118, 0.0569298230111599, 0.0569298230111599],[0.002548271557316184, 0.00012531501124612987, 0.014675691723823547, 0.24507135152816772, 0.23375694453716278, 0.002548271557316184, 0.00012531501124612987, 0.014675691723823547, 0.24507135152816772, 0.23375694453716278],[0.0008790267165750265, 0.0015108042862266302, 0.09592876583337784, 0.20789805054664612, 0.04584233835339546, 0.08063449710607529, 0.06730656325817108, 0.0008790267165750265, 0.0015108042862266302, 0.09592876583337784, 0.20789805054664612, 0.04584233835339546, 0.08063449710607529, 0.06730656325817108],[0.0885993018746376, 0.10804549604654312, 0.014060336165130138, 0.036825478076934814, 0.01907479390501976, 0.01605934463441372, 0.027608109638094902, 0.1887475550174713, 0.0885993018746376, 0.10804549604654312, 0.014060336165130138, 0.036825478076934814, 0.01907479390501976, 0.01605934463441372, 0.027608109638094902, 0.1887475550174713],[0.0009407299221493304, 0.02720186859369278, 0.13307347893714905, 0.0009407299221493304, 0.22249141335487366, 0.00019984591926913708, 0.049060236662626266, 0.00019984591926913708, 0.07203113287687302, 0.00019984591926913708, 0.07203113287687302, 0.0025981024373322725, 0.00019984591926913708, 0.00019984591926913708, 0.011471176519989967, 0.40622004866600037, 0.0009407299221493304],[0.006078260485082865, 0.01295683067291975, 0.19753055274486542, 0.006078260485082865, 0.3302600681781769, 0.0038565509021282196, 0.07282364368438721, 0.1069210097193718, 0.1069210097193718, 0.0038565509021282196, 0.017027495428919792, 0.1342933475971222],[0.001563596772029996, 0.1706363558769226, 0.001563596772029996, 0.3698052763938904, 0.004318332765251398, 0.08154352009296417, 0.1434311717748642, 0.21656544506549835, 0.004318332765251398],[0.15540334582328796, 0.00030978614813648164, 0.00030978614813648164, 0.07326731830835342, 0.0008555655949749053, 0.016155732795596123, 0.023720143362879753, 0.023720143362879753, 0.0008555655949749053, 0.029792627319693565, 0.029792627319693565, 0.003777504898607731, 0.029792627319693565, 0.029792627319693565, 0.13376988470554352, 0.00030978614813648164, 0.029792627319693565, 0.029792627319693565, 0.04317668825387955, 0.016155732795596123, 0.02841717004776001, 0.02841717004776001, 0.0008555655949749053, 0.029792627319693565, 0.029792627319693565, 0.003777504898607731, 0.007369775325059891, 0.007369775325059891, 0.13376988470554352, 0.00030978614813648164, 0.029792627319693565, 0.029792627319693565],[0.0007369625964201987, 0.0007369625964201987, 0.17429852485656738, 0.002035339130088687, 0.038433514535427094, 0.0676027312874794, 0.0676027312874794, 0.002035339130088687, 0.07087485492229462, 0.07087485492229462, 0.00898645631968975, 0.01753224991261959, 0.01753224991261959, 0.3182305097579956, 0.0007369625964201987, 0.07087485492229462, 0.07087485492229462],[0.002100367797538638, 0.001775505137629807, 0.005121907684952021, 0.005008338950574398, 0.002047352958470583, 0.1653609573841095, 0.1183205172419548, 0.0021596213337033987, 0.19810546934604645, 0.002100367797538638, 0.001775505137629807, 0.005121907684952021, 0.005008338950574398, 0.002047352958470583, 0.1653609573841095, 0.1183205172419548, 0.0021596213337033987, 0.19810546934604645],[0.0009406444733031094, 0.10265316069126129, 0.47187167406082153, 0.0009406444733031094, 0.2224712073802948, 0.002597866579890251, 0.049055781215429306, 0.07202459871768951, 0.07202459871768951, 0.002597866579890251],[0.006022434215992689, 0.0009117993176914752, 0.12898100912570953, 0.0009117993176914752, 0.2156490534543991, 0.05311640352010727, 0.0025182021781802177, 0.0475514680147171, 0.00034680997487157583, 0.06981593370437622, 0.0002524814917705953, 0.06981593370437622, 0.0025182021781802177, 0.006037517916411161, 0.3937273919582367, 0.0009117993176914752],[0.0006374138756655157, 0.001809381414204836, 0.24898451566696167, 0.05490206554532051, 0.09657012671232224, 0.09657012671232224, 0.0006374138756655157, 0.001809381414204836, 0.24898451566696167, 0.05490206554532051, 0.09657012671232224, 0.09657012671232224],[0.1390378624200821, 0.001147901057265699, 0.27148935198783875, 0.0031702667474746704, 0.05986446887254715, 0.08789411187171936, 0.08789411187171936, 0.0031702667474746704, 0.11039546877145767, 0.013997403904795647, 0.11039546877145767, 0.11039546877145767],[0.0010467544198036194, 0.11423300206661224, 0.0010467544198036194, 0.24756720662117004, 0.0028909204993396997, 0.05458954721689224, 0.08014937490224838, 0.08014937490224838, 0.0028909204993396997, 0.1006680354475975, 0.1006680354475975, 0.012764030136168003, 0.1006680354475975, 0.1006680354475975],[0.0005872735637240112, 0.06408955156803131, 0.0005872735637240112, 0.1388956755399704, 0.07123225182294846, 0.0016219287645071745, 0.030627047643065453, 0.04496718943119049, 0.04496718943119049, 0.0016219287645071745, 0.05647902935743332, 0.05647902935743332, 0.00716116139665246, 0.05647902935743332, 0.05647902935743332, 0.25359275937080383, 0.0005872735637240112, 0.05647902935743332, 0.05647902935743332],[0.3475520610809326, 7.921423093648627e-05, 0.0016108164563775063, 0.1477627158164978, 0.0005789796123281121, 0.3475520610809326, 7.921423093648627e-05, 0.0016108164563775063, 0.1477627158164978, 0.0005789796123281121],[0.028784718364477158, 0.031485188752412796, 0.008629280142486095, 0.005099855363368988, 0.3597770631313324, 0.0347386859357357, 0.031485188752412796, 0.028784718364477158, 0.031485188752412796, 0.008629280142486095, 0.005099855363368988, 0.3597770631313324, 0.0347386859357357, 0.031485188752412796],[0.0006624970701523125, 0.07229873538017273, 0.0006624970701523125, 0.15668673813343048, 0.08035633713006973, 0.0018296806374564767, 0.03455004468560219, 0.050727006047964096, 0.050727006047964096, 0.0018296806374564767, 0.008078429847955704, 0.06371339410543442, 0.06371339410543442, 0.28607529401779175, 0.0006624970701523125, 0.06371339410543442, 0.06371339410543442],[0.01488210167735815, 0.07201603800058365, 0.1830621063709259, 0.01711452007293701, 0.01488210167735815, 0.0013905151281505823, 0.038386158645153046, 0.0012164434883743525, 0.2873050272464752, 0.0021817004308104515, 0.2873050272464752, 0.0021817004308104515, 0.038386158645153046, 0.009149150922894478, 0.0007770129013806581, 0.01488210167735815],[0.13641954958438873, 0.0017325382214039564, 0.1925053745508194, 0.002247945871204138, 0.042448192834854126, 0.06232321634888649, 0.06232321634888649, 0.13641954958438873, 0.0017325382214039564, 0.1925053745508194, 0.002247945871204138, 0.042448192834854126, 0.06232321634888649, 0.06232321634888649],[0.00017717685841489583, 0.008965781889855862, 0.24784566462039948, 0.008965781889855862, 0.00039841572288423777, 0.06815662980079651, 0.16549052298069, 0.00017717685841489583, 0.008965781889855862, 0.24784566462039948, 0.008965781889855862, 0.00039841572288423777, 0.06815662980079651, 0.16549052298069],[0.004042898770421743, 0.3818127512931824, 0.006598776672035456, 0.03443225473165512, 0.03284725546836853, 0.040002964437007904, 0.000263096735579893, 0.004042898770421743, 0.3818127512931824, 0.006598776672035456, 0.03443225473165512, 0.03284725546836853, 0.040002964437007904, 0.000263096735579893],[0.0030293622985482216, 0.00087509531294927, 0.12031833827495575, 0.20116554200649261, 0.044357795268297195, 0.0651269257068634, 0.0651269257068634, 0.0030293622985482216, 0.00087509531294927, 0.12031833827495575, 0.20116554200649261, 0.044357795268297195, 0.0651269257068634, 0.0651269257068634],[0.0013086770195513964, 0.14281678199768066, 0.0013086770195513964, 0.3095143735408783, 0.0037971357814967632, 0.06824913620948792, 0.10020463168621063, 0.10020463168621063, 0.003614296903833747, 0.015957891941070557, 0.12585754692554474, 0.12585754692554474],[0.0004516221524681896, 0.0004516221524681896, 0.06388542056083679, 0.10681285709142685, 0.0012472874950617552, 0.023552658036351204, 0.03458043932914734, 0.03458043932914734, 0.0012472874950617552, 0.005507040303200483, 0.04343321919441223, 0.04343321919441223, 0.19501662254333496, 0.0004516221524681896, 0.00014927542360965163, 0.06294519454240799, 0.023552658036351204, 0.03458043932914734, 0.03458043932914734, 0.0012472874950617552, 0.005507040303200483, 0.04343321919441223, 0.04343321919441223, 0.19501662254333496, 0.0004516221524681896],[0.0226348415017128, 0.0018025721656158566, 0.002192544285207987, 0.02326250448822975, 0.1678818315267563, 0.11434391140937805, 0.1678818315267563, 0.0226348415017128, 0.0018025721656158566, 0.002192544285207987, 0.02326250448822975, 0.1678818315267563, 0.11434391140937805, 0.1678818315267563]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>