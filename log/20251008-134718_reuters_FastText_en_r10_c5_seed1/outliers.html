
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["jun jun","jun jun","oct oct","oct oct","oct oct","oct oct","oct oct","apr apr","apr apr","apr apr","walgreen qtr shr cts cts walgreen qtr shr cts cts","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","morgan inc qtr shr dlrs dlrs morgan inc qtr shr dlrs dlrs","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","corby distilleries ltd buy heublein <unk> distillers mln canadian dlrs corby distilleries ltd buy heublein <unk> distillers mln canadian dlrs","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","simon schuster acquire woodhead faulkner undisclosed terms simon schuster acquire woodhead faulkner undisclosed terms","boeing acquire argosystems dlrs share boeing acquire argosystems dlrs share","bancorp <unk> qtr net shr cts cts net mln mln avg shrs mln mln","napa valley bancorp <unk> qtr net shr cts cts net","<unk> corp ohio <unk> qtr net shr cts cts net","roto rooter inc roto qtr net shr cts cts net revs mln","<unk> corp <unk> qtr net shr dlrs dlr net","united telecommunications inc qtr shr cts cts united telecommunications inc qtr shr cts cts","thomson grand public takes thorn emi audiovisual division thomson thomson grand public takes thorn emi audiovisual division thomson","<unk> acquire prince mln dlrs <unk> acquire prince mln dlrs","<unk> bancorp inc <unk> qtr net shr dlrs dlrs net avg shrs","ohio <unk> <unk> qtr net shr cts cts net mln mln revs mln mln avg shrs mln mln mths shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","westport bancorp inc <unk> qtr net shr cts cts net nine mths shr cts dlrs net","westinghouse electric corp qtr shr dlrs cts westinghouse electric corp qtr shr dlrs cts","circle express terminates planned acquisition overland express circle express terminates planned acquisition overland express","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","john <unk> qtr net shr cts cts net mln revs mln mln","<unk> inc <unk> qtr net shr cts cts net mln revs mln mln avg shrs mln mln nine mths shr dlrs cts net mln revs mln mln avg shrs mln mln","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","raytheon <unk> qtr net shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","jannock ltd qtr net shr cts cts net mln mln revs mln mln nine mths shr dlrs dlrs net mln mln revs mln mln","tandy corp <unk> qtr sept net shr cts cts net mln mln revs mln mln avg shrs mln mln","<unk> bancorp <unk> qtr net shr cts cts net nine mths shr dlrs dlrs net mln mln","sumita welcomes west german joint confirmation louvre accord sumita welcomes west german joint confirmation louvre accord","rio tinto zinc corp plc pretax profit mln stg mln rio tinto zinc corp plc pretax profit mln stg mln","roto rooter inc roto qtr net shr cts cts net revs mln mln nine mths shr cts cts net revs mln mln","marine corp <unk> qtr net shr cts cts net nine mths shr cts cts net","<unk> bancshares inc <unk> qtr net shr cts cts net nine mths shr dlrs dlrs net","<unk> inc cal qtr net shr dlrs dlrs diluted shr dlrs dlrs net mln mln nine months shr dlrs dlrs diluted shr dlrs dlrs net mln mln"];
var att_heads = [8,8,2,2,2,2,2,2,2,2,8,8,2,2,2,8,8,2,2,8,0,0,0,2,2,2,1,2,0,0,0,1,2,2,0,0,0,2,2,2,2,2,2,2,0,2,2,0,2,1];
var trigram_weights = [[0.3333197236061096, 0.3333197236061096],[0.3333197236061096, 0.3333197236061096],[0.05412840470671654, 0.05412840470671654],[0.05412840470671654, 0.05412840470671654],[0.05412840470671654, 0.05412840470671654],[0.05412840470671654, 0.05412840470671654],[0.05412840470671654, 0.05412840470671654],[0.07194390892982483, 0.07194390892982483],[0.07194390892982483, 0.07194390892982483],[0.07194390892982483, 0.07194390892982483],[0.008734834380447865, 0.16912339627742767, 0.18334171175956726, 0.06284891068935394, 0.06284891068935394, 0.008734834380447865, 0.16912339627742767, 0.18334171175956726, 0.06284891068935394, 0.06284891068935394],[0.006522676907479763, 0.12629172205924988, 0.13690915703773499, 0.1102462187409401, 0.1102462187409401, 0.006522676907479763, 0.12629172205924988, 0.13690915703773499, 0.1102462187409401, 0.1102462187409401],[0.1118331253528595, 0.10536352545022964, 0.05314904451370239, 0.05261111631989479, 0.06056329235434532, 0.06056329235434532, 0.1118331253528595, 0.10536352545022964, 0.05314904451370239, 0.05261111631989479, 0.06056329235434532, 0.06056329235434532],[0.06625143438577652, 0.11322789639234543, 0.06023750826716423, 0.05962783843278885, 0.06864058971405029, 0.06864058971405029, 0.06625143438577652, 0.11322789639234543, 0.06023750826716423, 0.05962783843278885, 0.06864058971405029, 0.06864058971405029],[0.09448132663965225, 0.10585860908031464, 0.056317031383514404, 0.05574703961610794, 0.06417321413755417, 0.06417321413755417, 0.09448132663965225, 0.10585860908031464, 0.056317031383514404, 0.05574703961610794, 0.06417321413755417, 0.06417321413755417],[0.01224922202527523, 0.01222859788686037, 0.12332671880722046, 0.1336948722600937, 0.10765791684389114, 0.10765791684389114, 0.01224922202527523, 0.01222859788686037, 0.12332671880722046, 0.1336948722600937, 0.10765791684389114, 0.10765791684389114],[0.021730592474341393, 0.03200804814696312, 0.1157379150390625, 0.12546807527542114, 0.1010332778096199, 0.1010332778096199, 0.021730592474341393, 0.03200804814696312, 0.1157379150390625, 0.12546807527542114, 0.1010332778096199, 0.1010332778096199],[0.06286293268203735, 0.11740721017122269, 0.06246091425418854, 0.06515846401453018, 0.06182873621582985, 0.05910757929086685, 0.07117415964603424, 0.06286293268203735, 0.11740721017122269, 0.06246091425418854, 0.06515846401453018, 0.06182873621582985, 0.05910757929086685, 0.07117415964603424],[0.11671130359172821, 0.10005560517311096, 0.053229816257953644, 0.05269107222557068, 0.06065533682703972, 0.06065533682703972, 0.11671130359172821, 0.10005560517311096, 0.053229816257953644, 0.05269107222557068, 0.06065533682703972, 0.06065533682703972],[0.028724702075123787, 0.030726762488484383, 0.08570952713489532, 0.0038872475270181894, 0.006848298478871584, 0.006848298478871584, 0.027483943849802017, 0.17988654971122742, 0.014134787023067474, 0.11574986577033997, 0.028724702075123787, 0.030726762488484383, 0.08570952713489532, 0.0038872475270181894, 0.006848298478871584, 0.006848298478871584, 0.027483943849802017, 0.17988654971122742, 0.014134787023067474, 0.11574986577033997],[0.028103338554501534, 0.08343230932950974, 0.045514870434999466, 0.1388579159975052, 0.04468224570155144, 0.079704649746418, 0.079704649746418, 0.028103338554501534, 0.08343230932950974, 0.045514870434999466, 0.1388579159975052, 0.04468224570155144, 0.079704649746418, 0.079704649746418],[0.029860297217965126, 0.12041489034891129, 0.06311384588479996, 0.12041489034891129, 0.05738188326358795, 0.0459069162607193, 0.06290726363658905, 0.029860297217965126, 0.12041489034891129, 0.06311384588479996, 0.12041489034891129, 0.05738188326358795, 0.0459069162607193, 0.06290726363658905],[0.06139194220304489, 0.055244363844394684, 0.10540071129798889, 0.022652018815279007, 0.0972098708152771, 0.06139194220304489, 0.055244363844394684, 0.10540071129798889, 0.022652018815279007, 0.0972098708152771],[0.09955506771802902, 0.09955506771802902, 0.047313861548900604, 0.06187529116868973, 0.04683499038219452, 0.05391410365700722, 0.05391410365700722, 0.06187529116868973, 0.02382480725646019, 0.02382480725646019, 0.08119773864746094, 0.09955506771802902, 0.02382480725646019, 0.02382480725646019],[0.04335222393274307, 0.06115309149026871, 0.10825830698013306, 0.10825830698013306, 0.051450103521347046, 0.06728451699018478, 0.050929371267557144, 0.05862734839320183, 0.05862734839320183, 0.06728451699018478],[0.10312895476818085, 0.09212808310985565, 0.054806359112262726, 0.10312895476818085, 0.049012359231710434, 0.06409652531147003, 0.048516299575567245, 0.05584954470396042, 0.05584954470396042, 0.06409652531147003],[0.05283921957015991, 0.08322834223508835, 0.13775351643562317, 0.05283921957015991, 0.042125485837459564, 0.09132290631532669, 0.04010254144668579, 0.07077471166849136, 0.07077471166849136, 0.09132290631532669, 0.06934557855129242, 0.027414361014962196],[0.09871421009302139, 0.08818426728248596, 0.09871421009302139, 0.046914242208004, 0.0613526850938797, 0.04643941670656204, 0.044395562261343, 0.059075865894556046, 0.0613526850938797],[0.030036861076951027, 0.10851366817951202, 0.08821915835142136, 0.02616264671087265, 0.025684038177132607, 0.04581545665860176, 0.04581545665860176, 0.030036861076951027, 0.10851366817951202, 0.08821915835142136, 0.02616264671087265, 0.025684038177132607, 0.04581545665860176, 0.04581545665860176],[0.02804737538099289, 0.06530284881591797, 0.09993020445108414, 0.04511871933937073, 0.028723403811454773, 0.05315962806344032, 0.07657775282859802, 0.07509268820285797, 0.02804737538099289, 0.02804737538099289, 0.06530284881591797, 0.09993020445108414, 0.04511871933937073, 0.028723403811454773, 0.05315962806344032, 0.07657775282859802, 0.07509268820285797, 0.02804737538099289],[0.12299194931983948, 0.06446457654237747, 0.0817461684346199, 0.01987677812576294, 0.026432611048221588, 0.12299194931983948, 0.06446457654237747, 0.0817461684346199, 0.01987677812576294, 0.026432611048221588],[0.12334688007831573, 0.12334688007831573, 0.09985783696174622, 0.12334688007831573, 0.03053686022758484, 0.06620018184185028, 0.029070425778627396, 0.027669912204146385, 0.027669912204146385, 0.06620018184185028, 0.03606034442782402, 0.12334688007831573],[0.03142865002155304, 0.0591391958296299, 0.0591391958296299, 0.0281060878187418, 0.036756087094545364, 0.027821632102131844, 0.03202687203884125, 0.03202687203884125, 0.036756087094545364, 0.01415276899933815, 0.01415276899933815, 0.05026986449956894, 0.01415276899933815, 0.01415276899933815, 0.04823429882526398, 0.0591391958296299, 0.01415276899933815, 0.01415276899933815, 0.0299821887165308, 0.027821632102131844, 0.02659715712070465, 0.02659715712070465, 0.036756087094545364, 0.01415276899933815, 0.01415276899933815, 0.05026986449956894, 0.026115354150533676, 0.026115354150533676, 0.04823429882526398, 0.0591391958296299, 0.01415276899933815, 0.01415276899933815],[0.09620483964681625, 0.09620483964681625, 0.09063934534788132, 0.09620483964681625, 0.04572165384888649, 0.05979306623339653, 0.04525890201330185, 0.05209978669881821, 0.05209978669881821, 0.05979306623339653, 0.05678756907582283, 0.04877360165119171, 0.04525890201330185, 0.05209978669881821, 0.04326700419187546, 0.05979306623339653],[0.1141100525856018, 0.09359217435121536, 0.06777570396661758, 0.023008545860648155, 0.02258763648569584, 0.024523772299289703, 0.04029206186532974, 0.1141100525856018, 0.09359217435121536, 0.06777570396661758, 0.023008545860648155, 0.02258763648569584, 0.024523772299289703, 0.04029206186532974],[0.06944049149751663, 0.0824352279305458, 0.06601803749799728, 0.07674605399370193, 0.07828663289546967, 0.04463834688067436, 0.0824352279305458, 0.06944049149751663, 0.0824352279305458, 0.06601803749799728, 0.07674605399370193, 0.07828663289546967, 0.04463834688067436, 0.0824352279305458],[0.01830396242439747, 0.04871813580393791, 0.027070775628089905, 0.09627064317464828, 0.09627064317464828, 0.043774694204330444, 0.07332050800323486, 0.01830396242439747, 0.04871813580393791, 0.027070775628089905, 0.09627064317464828, 0.09627064317464828, 0.043774694204330444, 0.07332050800323486],[0.10286776721477509, 0.13116353750228882, 0.06233588978648186, 0.08152053505182266, 0.061704982072114944, 0.07103168964385986, 0.07103168964385986, 0.08152053505182266, 0.03138912096619606, 0.11149244755506516, 0.03138912096619606, 0.03138912096619606],[0.0551910437643528, 0.05199821665883064, 0.0551910437643528, 0.02622971683740616, 0.0343022421002388, 0.025964252650737762, 0.02988874912261963, 0.02988874912261963, 0.0343022421002388, 0.013207926414906979, 0.04691383242607117, 0.013207926414906979, 0.013207926414906979, 0.045014165341854095, 0.0551910437643528, 0.013207926414906979, 0.013207926414906979, 0.03257804363965988, 0.027980569750070572, 0.025964252650737762, 0.02482152357697487, 0.02988874912261963, 0.0343022421002388, 0.013207926414906979, 0.04691383242607117, 0.013207926414906979, 0.013207926414906979, 0.045014165341854095, 0.0551910437643528, 0.013207926414906979, 0.013207926414906979],[0.1254321038722992, 0.11205213516950607, 0.1254321038722992, 0.05961200222373009, 0.07795833796262741, 0.05900866165757179, 0.06792782992124557, 0.06792782992124557, 0.07795833796262741, 0.030017513781785965, 0.030017513781785965, 0.10662057250738144, 0.030017513781785965, 0.030017513781785965],[0.10422880947589874, 0.10422880947589874, 0.04953506961464882, 0.0647801086306572, 0.049033720046281815, 0.046875689178705215, 0.046875689178705215, 0.0647801086306572, 0.024943292140960693, 0.024943292140960693, 0.08859721571207047, 0.04602654278278351, 0.04602654278278351, 0.08500967174768448, 0.10422880947589874, 0.024943292140960693, 0.024943292140960693],[0.07323482632637024, 0.04977217689156532, 0.03480508178472519, 0.04551678150892258, 0.03445282578468323, 0.03966037184000015, 0.03966037184000015, 0.04551678150892258, 0.017526034265756607, 0.017526034265756607, 0.06225151941180229, 0.017526034265756607, 0.017526034265756607, 0.0432288832962513, 0.03712834417819977, 0.03445282578468323, 0.03293650224804878, 0.03293650224804878, 0.04551678150892258, 0.017526034265756607, 0.017526034265756607, 0.06225151941180229, 0.017526034265756607, 0.017526034265756607],[0.08627469837665558, 0.07707168906927109, 0.08627469837665558, 0.04100232198834419, 0.02797124721109867, 0.05362129956483841, 0.04058733209967613, 0.046722110360860825, 0.046722110360860825, 0.05362129956483841, 0.02064664289355278, 0.02064664289355278, 0.07333575189113617, 0.02064664289355278, 0.02064664289355278, 0.07036618143320084, 0.08627469837665558, 0.02064664289355278, 0.02064664289355278],[0.10163477808237076, 0.10163477808237076, 0.10163477808237076, 0.04830225184559822, 0.06316787004470825, 0.047813378274440765, 0.055040374398231506, 0.055040374398231506, 0.06316787004470825, 0.05999274179339409, 0.05152645707130432, 0.047813378274440765, 0.04570905491709709, 0.04570905491709709, 0.06316787004470825, 0.02432250790297985, 0.02432250790297985],[0.1267097145318985, 0.05251137167215347, 0.048211146146059036, 0.050191983580589294, 0.04390121251344681, 0.03122151829302311, 0.037856921553611755, 0.04604126140475273, 0.1267097145318985, 0.05251137167215347, 0.048211146146059036, 0.050191983580589294, 0.04390121251344681, 0.03122151829302311, 0.037856921553611755, 0.04604126140475273],[0.04504195600748062, 0.05684717372059822, 0.035232219845056534, 0.07221391797065735, 0.03790833801031113, 0.08122551441192627, 0.08197120577096939, 0.019345298409461975, 0.05086908116936684, 0.019345298409461975, 0.04504195600748062, 0.05684717372059822, 0.035232219845056534, 0.07221391797065735, 0.03790833801031113, 0.08122551441192627, 0.08197120577096939, 0.019345298409461975, 0.05086908116936684, 0.019345298409461975],[0.038160331547260284, 0.052537404000759125, 0.0736517533659935, 0.038160331547260284, 0.03715251758694649, 0.04858667030930519, 0.03677649423480034, 0.04233526438474655, 0.04233526438474655, 0.04858667030930519, 0.0664500892162323, 0.018708081915974617, 0.018708081915974617, 0.04614446312189102, 0.03963247314095497, 0.03677649423480034, 0.04233526438474655, 0.04233526438474655, 0.04858667030930519, 0.0664500892162323, 0.018708081915974617, 0.018708081915974617],[0.05699355527758598, 0.08116748929023743, 0.13665702939033508, 0.027554798871278763, 0.08406485617160797, 0.027050724253058434, 0.048253364861011505, 0.048253364861011505, 0.08406485617160797, 0.04353165626525879, 0.018128901720046997, 0.027050724253058434, 0.048253364861011505, 0.048253364861011505, 0.08406485617160797],[0.09706217050552368, 0.09706217050552368, 0.09144707769155502, 0.09706217050552368, 0.04612910374999046, 0.06032590940594673, 0.04566222429275513, 0.052564073354005814, 0.052564073354005814, 0.06032590940594673, 0.05729363113641739, 0.049208249896764755, 0.04566222429275513, 0.043652575463056564, 0.043652575463056564, 0.06032590940594673],[0.10543885082006454, 0.08536004275083542, 0.02730097435414791, 0.02610338293015957, 0.05658896267414093, 0.02484986186027527, 0.023652678355574608, 0.023652678355574608, 0.03606683015823364, 0.02484986186027527, 0.023652678355574608, 0.023652678355574608, 0.05658896267414093, 0.016987523064017296, 0.016987523064017296, 0.032711420208215714, 0.01917494647204876, 0.02484986186027527, 0.023652678355574608, 0.023652678355574608, 0.03606683015823364, 0.02484986186027527, 0.023652678355574608, 0.023652678355574608, 0.05658896267414093, 0.016987523064017296, 0.016987523064017296]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>