
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["jun jun","jun jun","oct oct","oct oct","oct oct","oct oct","oct oct","apr apr","apr apr","apr apr","walgreen qtr shr cts cts walgreen qtr shr cts cts","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","circle express terminates planned acquisition overland express circle express terminates planned acquisition overland express","cable wireless merge two units new telecommunication operation cable wireless merge two units new telecommunication operation","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","morgan inc qtr shr dlrs dlrs morgan inc qtr shr dlrs dlrs","simon schuster acquire woodhead faulkner undisclosed terms simon schuster acquire woodhead faulkner undisclosed terms","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","tecsyn international terminates takeover talks investor group tecsyn international terminates takeover talks investor group","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","<unk> acquire prince mln dlrs <unk> acquire prince mln dlrs","napa valley bancorp <unk> qtr net shr cts cts net","bancorp <unk> qtr net shr cts cts net mln mln avg shrs mln mln","boeing acquire argosystems dlrs share boeing acquire argosystems dlrs share","<unk> corp ohio <unk> qtr net shr cts cts net","barco directors approve buyout offer senior management barco directors approve buyout offer senior management","trump interstate properties talks acquire alexanders trump interstate properties talks acquire alexanders","john <unk> qtr net shr cts cts net mln revs mln mln","<unk> corp <unk> qtr net shr dlrs dlr net","roto rooter inc roto qtr net shr cts cts net revs mln","<unk> bancorp inc <unk> qtr net shr dlrs dlrs net avg shrs","united telecommunications inc qtr shr cts cts united telecommunications inc qtr shr cts cts","sumita welcomes west german joint confirmation louvre accord sumita welcomes west german joint confirmation louvre accord","ford raises qtly payout cts shr cts ford raises qtly payout cts shr cts","general electric qtr shr dlrs dlrs general electric qtr shr dlrs dlrs","national city bancorp <unk> qtr net shr cts cts net","westinghouse electric corp qtr shr dlrs cts westinghouse electric corp qtr shr dlrs cts","raytheon <unk> qtr net shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","stoltenberg declines comment possible changed targets currencies stoltenberg declines comment possible changed targets currencies","<unk> <unk> <unk> qtr net shr cts cts net sales mln mln avg shrs","fleet financial group qtr shr cts cts fleet financial group qtr shr cts cts","stop shop cos split hikes dividend stop shop cos split hikes dividend","balladur urges respect pledges monetary policy louvre accord balladur urges respect pledges monetary policy louvre accord","dresser industries inc sell reliance standard life insurance rosenkranz unit dresser industries inc sell reliance standard life insurance rosenkranz unit"];
var att_heads = [3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,3,4,3,3,3,3,1,3,3,3,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,4,3,1,1,1,1];
var trigram_weights = [[0.4899022579193115, 0.4899022579193115],[0.4899022579193115, 0.4899022579193115],[0.48466724157333374, 0.48466724157333374],[0.48466724157333374, 0.48466724157333374],[0.48466724157333374, 0.48466724157333374],[0.48466724157333374, 0.48466724157333374],[0.48466724157333374, 0.48466724157333374],[0.4866005480289459, 0.4866005480289459],[0.4866005480289459, 0.4866005480289459],[0.4866005480289459, 0.4866005480289459],[0.0012056041741743684, 0.10636533796787262, 0.13661515712738037, 0.1270027607679367, 0.1270027607679367, 0.0012056041741743684, 0.10636533796787262, 0.13661515712738037, 0.1270027607679367, 0.1270027607679367],[0.0009127415250986814, 0.12237157672643661, 0.08052731305360794, 0.103428915143013, 0.09615154564380646, 0.09615154564380646, 0.0009127415250986814, 0.12237157672643661, 0.08052731305360794, 0.103428915143013, 0.09615154564380646, 0.09615154564380646],[0.0016957344487309456, 0.14960744976997375, 0.192155122756958, 0.07699904590845108, 0.07699904590845108, 0.0016957344487309456, 0.14960744976997375, 0.192155122756958, 0.07699904590845108, 0.07699904590845108],[0.06581072509288788, 0.10243208706378937, 0.07091691344976425, 0.09108534455299377, 0.08467648923397064, 0.08467648923397064, 0.06581072509288788, 0.10243208706378937, 0.07091691344976425, 0.09108534455299377, 0.08467648923397064, 0.08467648923397064],[0.05169594660401344, 0.10576198995113373, 0.07322230935096741, 0.09404638409614563, 0.08742918819189072, 0.08742918819189072, 0.05169594660401344, 0.10576198995113373, 0.07322230935096741, 0.09404638409614563, 0.08742918819189072, 0.08742918819189072],[0.07265935093164444, 0.0827869325876236, 0.009622929617762566, 0.037413522601127625, 0.14348779618740082, 0.07124253362417221, 0.0827869325876236, 0.07265935093164444, 0.0827869325876236, 0.009622929617762566, 0.037413522601127625, 0.14348779618740082, 0.07124253362417221, 0.0827869325876236],[0.12424760311841965, 0.05936499312520027, 0.01912904717028141, 0.06238329038023949, 0.005673680920153856, 0.13652312755584717, 0.05298686772584915, 0.03682507202029228, 0.12424760311841965, 0.05936499312520027, 0.01912904717028141, 0.06238329038023949, 0.005673680920153856, 0.13652312755584717, 0.05298686772584915, 0.03682507202029228],[0.0007029960979707539, 0.1177920401096344, 0.08155108243227005, 0.1047438234090805, 0.09737394005060196, 0.09737394005060196, 0.0007029960979707539, 0.1177920401096344, 0.08155108243227005, 0.1047438234090805, 0.09737394005060196, 0.09737394005060196],[0.002134659793227911, 0.022831596434116364, 0.1825706511735916, 0.05095454305410385, 0.05095454305410385, 0.003894712310284376, 0.1866593062877655, 0.002134659793227911, 0.022831596434116364, 0.1825706511735916, 0.05095454305410385, 0.05095454305410385, 0.003894712310284376, 0.1866593062877655],[0.007633594796061516, 0.11030533909797668, 0.0763678103685379, 0.07711735367774963, 0.09808644652366638, 0.03930451720952988, 0.09118498861789703, 0.007633594796061516, 0.11030533909797668, 0.0763678103685379, 0.07711735367774963, 0.09808644652366638, 0.03930451720952988, 0.09118498861789703],[0.08510687202215195, 0.13029102981090546, 0.08573874831199646, 0.11012245714664459, 0.04412749782204628, 0.04412749782204628, 0.08510687202215195, 0.13029102981090546, 0.08573874831199646, 0.11012245714664459, 0.04412749782204628, 0.04412749782204628],[0.3901854157447815, 0.003454451682046056, 0.0001331524399574846, 0.003454451682046056, 0.09833942353725433, 0.00036597918369807303, 0.0006126858643256128, 0.3901854157447815, 0.003454451682046056, 0.0001331524399574846, 0.003454451682046056, 0.09833942353725433, 0.00036597918369807303, 0.0006126858643256128],[0.0009246515692211688, 0.049865566194057465, 0.13532817363739014, 0.17381487786769867, 0.06964987516403198, 0.06964987516403198, 0.0009246515692211688, 0.049865566194057465, 0.13532817363739014, 0.17381487786769867, 0.06964987516403198, 0.06964987516403198],[0.011547110043466091, 0.18974564969539642, 0.005803636275231838, 0.05864078179001808, 0.006909559480845928, 0.1686520129442215, 0.05870120972394943, 0.011547110043466091, 0.18974564969539642, 0.005803636275231838, 0.05864078179001808, 0.006909559480845928, 0.1686520129442215, 0.05870120972394943],[0.23856547474861145, 0.00012971462274435908, 0.055814340710639954, 0.0005154992104507983, 0.07168767601251602, 0.06664365530014038, 0.06664365530014038, 0.23856547474861145, 0.00012971462274435908, 0.055814340710639954, 0.0005154992104507983, 0.07168767601251602, 0.06664365530014038, 0.06664365530014038],[0.006822344847023487, 0.00026296862051822245, 0.048477839678525925, 0.1244177296757698, 0.3097856044769287, 0.006822344847023487, 0.00026296862051822245, 0.048477839678525925, 0.1244177296757698, 0.3097856044769287],[0.0832848846912384, 0.0017545993905514479, 0.002184408949688077, 0.002184408949688077, 0.19272112846374512, 0.0017799652414396405, 0.24753013253211975, 0.23011364042758942, 0.23011364042758942, 0.0017799652414396405],[0.001781628467142582, 0.001781628467142582, 0.15718550980091095, 0.0014517595991492271, 0.20188835263252258, 0.18768326938152313, 0.18768326938152313, 0.0014517595991492271, 0.03249119967222214, 0.03249119967222214, 0.1273464411497116, 0.001781628467142582, 0.03249119967222214, 0.03249119967222214],[0.39897504448890686, 8.118545520119369e-05, 0.0021062411833554506, 0.09563914686441422, 3.9028502214932814e-05, 0.39897504448890686, 8.118545520119369e-05, 0.0021062411833554506, 0.09563914686441422, 3.9028502214932814e-05],[0.0014384023379534483, 0.18329977989196777, 0.21421171724796295, 0.0014384023379534483, 0.12690412998199463, 0.0011720819165930152, 0.16299507021903992, 0.1515265852212906, 0.1515265852212906, 0.0011720819165930152],[0.014995813369750977, 0.09939240664243698, 0.014163072220981121, 0.07472307235002518, 0.02987484820187092, 0.18505708873271942, 0.08179367333650589, 0.014995813369750977, 0.09939240664243698, 0.014163072220981121, 0.07472307235002518, 0.02987484820187092, 0.18505708873271942, 0.08179367333650589],[0.10549677908420563, 0.21798677742481232, 0.05003459006547928, 0.012924445793032646, 0.07584021240472794, 0.026917673647403717, 0.10549677908420563, 0.21798677742481232, 0.05003459006547928, 0.012924445793032646, 0.07584021240472794, 0.026917673647403717],[0.03764870762825012, 0.001968752359971404, 0.1736946552991867, 0.0016042373608797789, 0.22309261560440063, 0.20739558339118958, 0.20739558339118958, 0.0016042373608797789, 0.03590374067425728, 0.03591563552618027, 0.03590374067425728, 0.03590374067425728],[0.0017980127595365047, 0.2291259914636612, 0.0017980127595365047, 0.15863102674484253, 0.0014651103410869837, 0.20374496281147003, 0.0816432535648346, 0.3131364583969116, 0.0014651103410869837],[0.07193264365196228, 0.018676437437534332, 0.1917944848537445, 0.07193264365196228, 0.12621144950389862, 0.001165684312582016, 0.16210539638996124, 0.15069949626922607, 0.15069949626922607, 0.001165684312582016, 0.026097318157553673, 0.026088669896125793],[0.0019820227753371, 0.0019820227753371, 0.26573047041893005, 0.0019820227753371, 0.1748654544353485, 0.0016150508308783174, 0.22459638118743896, 0.08999868482351303, 0.08999868482351303, 0.0016150508308783174, 0.1416701376438141, 0.0019820227753371],[0.0012142444029450417, 0.0005214691045694053, 0.12228160351514816, 0.08046810328960419, 0.1033528670668602, 0.09608084708452225, 0.09608084708452225, 0.0012142444029450417, 0.0005214691045694053, 0.12228160351514816, 0.08046810328960419, 0.1033528670668602, 0.09608084708452225, 0.09608084708452225],[0.0025878415908664465, 7.541260856669396e-05, 0.002295528305694461, 0.3666481673717499, 0.00037391207297332585, 0.0003638862108346075, 0.1262233406305313, 0.00013798437430523336, 0.0025878415908664465, 7.541260856669396e-05, 0.002295528305694461, 0.3666481673717499, 0.00037391207297332585, 0.0003638862108346075, 0.1262233406305313, 0.00013798437430523336],[0.06351253390312195, 4.9346796004101634e-05, 0.0013415858848020434, 0.000417254981584847, 0.14132755994796753, 0.15202414989471436, 0.14132755994796753, 0.06351253390312195, 4.9346796004101634e-05, 0.0013415858848020434, 0.000417254981584847, 0.14132755994796753, 0.15202414989471436, 0.14132755994796753],[0.0002905697328969836, 0.0009525288478471339, 0.15025466680526733, 0.192986398935318, 0.07733215391635895, 0.07733215391635895, 0.0002905697328969836, 0.0009525288478471339, 0.15025466680526733, 0.192986398935318, 0.07733215391635895, 0.07733215391635895],[0.0004147732397541404, 0.0018249702407047153, 0.0023820879869163036, 0.0023820879869163036, 0.210161492228508, 0.001941043883562088, 0.2699304521083832, 0.25093787908554077, 0.25093787908554077, 0.001941043883562088],[0.0010388834634795785, 0.0005810486036352813, 0.1323879510164261, 0.09165628254413605, 0.11772289872169495, 0.04717309772968292, 0.10943979769945145, 0.0010388834634795785, 0.0005810486036352813, 0.1323879510164261, 0.09165628254413605, 0.11772289872169495, 0.04717309772968292, 0.10943979769945145],[0.002163560362532735, 0.002163560362532735, 0.19088174402713776, 0.001762976753525436, 0.24516764283180237, 0.09824185073375702, 0.09824185073375702, 0.001762976753525436, 0.03945641592144966, 0.03945641592144966, 0.03946949169039726, 0.002754542278125882, 0.002754542278125882, 0.15464600920677185, 0.002163560362532735, 0.03945641592144966, 0.03945641592144966],[0.0015760875539854169, 0.20084542036056519, 0.0015760875539854169, 0.13905151188373566, 0.0012842746218666434, 0.1785971075296402, 0.16603083908557892, 0.16603083908557892, 0.0012842746218666434, 0.028742792084813118, 0.028742792084813118, 0.028752315789461136, 0.028742792084813118, 0.028742792084813118],[0.01776767335832119, 0.001020482275635004, 0.07053066790103912, 0.21426261961460114, 0.1530439555644989, 0.02208816446363926, 0.0035187688190490007, 0.01776767335832119, 0.001020482275635004, 0.07053066790103912, 0.21426261961460114, 0.1530439555644989, 0.02208816446363926, 0.0035187688190490007],[0.001899942522868514, 0.001899942522868514, 0.001899942522868514, 0.1676238477230072, 0.001548167783766985, 0.21529531478881836, 0.2001468986272812, 0.2001468986272812, 0.001548167783766985, 0.0009899672586470842, 0.034648869186639786, 0.034648869186639786, 0.1358032375574112, 0.001899942522868514],[0.01773209497332573, 0.42923709750175476, 0.03593983128666878, 0.0005610210937447846, 0.0014290492981672287, 0.004015590529888868, 0.004015590529888868, 0.01773209497332573, 0.42923709750175476, 0.03593983128666878, 0.0005610210937447846, 0.0014290492981672287, 0.004015590529888868, 0.004015590529888868],[0.027684975415468216, 0.3509036898612976, 0.005556797608733177, 0.06157400459051132, 0.004516029264777899, 0.04278133809566498, 0.027684975415468216, 0.3509036898612976, 0.005556797608733177, 0.06157400459051132, 0.004516029264777899, 0.04278133809566498],[0.008521589450538158, 0.0011265286011621356, 0.02376728132367134, 0.05410497263073921, 0.266747385263443, 0.08204951882362366, 0.029838383197784424, 0.03384433314204216, 0.008521589450538158, 0.0011265286011621356, 0.02376728132367134, 0.05410497263073921, 0.266747385263443, 0.08204951882362366, 0.029838383197784424, 0.03384433314204216],[0.018030911684036255, 0.023486046120524406, 0.013312125578522682, 0.08404582738876343, 0.06732828170061111, 0.036414556205272675, 0.021311718970537186, 0.18143412470817566, 0.010504601523280144, 0.04413178563117981, 0.018030911684036255, 0.023486046120524406, 0.013312125578522682, 0.08404582738876343, 0.06732828170061111, 0.036414556205272675, 0.021311718970537186, 0.18143412470817566, 0.010504601523280144, 0.04413178563117981]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>