
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["polysyllabic polysyllabic","apr <unk> ists <unk> <unk> ists","autodesk bbs","dir","unsubscribe","unsubscribe","bullshit","commodore cdtv","yep","mhz iisi","isbn","<unk> <unk>","pierre turgeon islanders","dino ciccarelli ray sheppard","compuserve com","lou gehrig <unk>","<unk> jeremy scott noonan","deleted","cheek","ernest <unk> <unk> sage purdue edu <unk> sage <unk>","ken","comp graphics faq","xli xloadimage goto flag","fox <unk> dave feustel nmyi feustel netcom com","liar cheat <unk>","posted","article <unk> sys bison baden sys bison baden bari","brandon wise <unk> nyx edu","abolish cults","exit","mjones donald aix kingston ibm com","<unk> file dis <unk> file tga","<unk> <unk> umcc umcc umich edu dlc umcc umcc umich edu david","shut andi","career mattingly","caching drive","dancing <unk>","<unk> phones","xli xloadimage imagemagick export lcs mit edu contrib","quoting dougb ecs comm mot com article apr <unk> comm mot com","david","flat engine","fuhr rings <unk> errey bob rings","article apr nmt edu erickson <unk> nmt edu alan erickson","bill mcd","okay okay forgot <unk>","objects ufos","<unk> subscrive please subscribe","please subscribe","please subscribe"];
var att_heads = [1,1,0,4,3,3,3,4,3,4,1,0,4,4,3,3,4,0,3,1,3,0,4,4,3,4,0,3,2,2,4,2,4,2,4,4,3,4,2,0,4,4,4,0,2,3,0,3,3,3];
var trigram_weights = [[0.4914432466030121, 0.4914432466030121],[0.03555399924516678, 0.3176279067993164, 0.005781157873570919, 0.3176279067993164, 0.3176279067993164, 0.005781157873570919],[0.033294931054115295, 0.719383955001831],[0.4477367699146271],[0.8522950410842896],[0.8522950410842896],[0.9749864339828491],[0.987514317035675, 2.9803097277181223e-05],[0.9997542500495911],[0.10217973589897156, 0.00012688027345575392],[0.9796095490455627],[0.3333333432674408, 0.3333333432674408],[0.8997057676315308, 0.0009077825816348195, 0.09680821001529694],[0.035727377980947495, 0.000104783262941055, 0.8268575668334961, 0.12337108701467514],[0.011495555751025677, 0.963034987449646],[0.9297895431518555, 0.06516005843877792, 0.0008417340577580035],[0.0014084726572036743, 0.059073515236377716, 0.9368637800216675, 0.0012457739794626832],[0.8381708264350891],[0.9238461256027222],[0.0011623186292126775, 0.00030669226543977857, 0.00030669226543977857, 0.4985823333263397, 8.054071258811746e-06, 0.0001314435212407261, 0.00030669226543977857, 0.4985823333263397, 0.00030669226543977857],[0.9989416003227234],[0.00010478342301212251, 0.9758697748184204, 0.0038167128805071115],[0.0038873786106705666, 0.05109146609902382, 0.018160812556743622, 0.9268602728843689],[0.2680216431617737, 0.005352029111236334, 0.3308926522731781, 3.1712821510154754e-05, 0.005352029111236334, 3.1712821510154754e-05, 0.0010674119694158435, 0.3838987648487091],[0.17762482166290283, 0.8199483752250671, 0.0012133886339142919],[0.9978122711181641],[0.9956751465797424, 0.0014999958220869303, 5.500805491465144e-05, 0.0006052657845430076, 1.7143792092610965e-06, 5.500805491465144e-05, 0.0006052657845430076, 1.7143792092610965e-06, 9.710557833386702e-07],[0.3268124461174011, 0.6719350814819336, 0.0007097558700479567, 0.00039147466304712, 0.00015123885532375425],[0.9997650980949402, 3.419042695895769e-05],[0.9959802627563477],[0.003374591004103422, 0.3174301087856293, 0.0012455701362341642, 0.33999624848365784, 0.08914638310670853, 0.2420579493045807],[0.0019349424401298165, 0.4954873025417328, 0.005045279394835234, 0.0019349424401298165, 0.4954873025417328, 0.00011010459274984896],[0.0020295828580856323, 0.0020295828580856323, 0.0020295828580856323, 0.0020295828580856323, 0.0020295828580856323, 0.001802360755391419, 0.00022910218103788793, 0.0020295828580856323, 0.0020295828580856323, 0.0020295828580856323, 0.001802360755391419, 0.977899968624115],[0.9982757568359375, 0.0005389649886637926],[0.9996756315231323, 1.9075390810030513e-05],[9.812234929995611e-05, 0.9871104955673218],[0.9965044260025024, 0.0017478072550147772],[0.03388488292694092, 0.9322301745414734],[0.0007032973226159811, 0.0009140848414972425, 0.0009140848414972425, 0.9932282567024231, 0.0021728507708758116, 9.596941526979208e-05, 0.0010573291219770908, 0.0009140848414972425],[0.006156234070658684, 0.0014854284236207604, 0.0029901484958827496, 0.00014738392201252282, 2.4442844733130187e-05, 0.0007012031273916364, 0.9860055446624756, 0.00013107321865390986, 0.0014854284236207604, 0.00014738392201252282, 2.4442844733130187e-05, 0.0007012031273916364],[0.9958662986755371],[0.6936491131782532, 0.3041982650756836],[0.0017312833806499839, 0.13564296066761017, 0.003352524247020483, 2.6552192139206454e-05, 0.7236037254333496, 0.13564296066761017],[0.599175214767456, 7.96504900790751e-05, 0.19945237040519714, 1.8030370938504348e-06, 2.5231238396372646e-06, 0.0009026641491800547, 0.19945237040519714, 1.8030370938504348e-06, 2.6515304853091948e-05, 2.5231238396372646e-06],[0.9985607266426086, 0.0005585997714661062],[0.41989636421203613, 0.41989636421203613, 0.1601671427488327, 4.012019780930132e-05],[0.982987642288208, 0.015439850278198719],[0.008064071647822857, 0.008064071647822857, 0.6364774107933044, 0.3393303453922272],[0.6469109654426575, 0.34489285945892334],[0.6469109654426575, 0.34489285945892334]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>