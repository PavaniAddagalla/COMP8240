
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["jun jun","jun jun","walgreen qtr shr cts cts walgreen qtr shr cts cts","apr apr","apr apr","apr apr","oct oct","oct oct","oct oct","oct oct","oct oct","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","morgan inc qtr shr dlrs dlrs morgan inc qtr shr dlrs dlrs","gte corp qtr shr cts cts gte corp qtr shr cts cts","bancorp <unk> qtr net shr cts cts net mln mln avg shrs mln mln","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","<unk> bancorp inc <unk> qtr net shr dlrs dlrs net avg shrs","<unk> corp <unk> qtr net shr dlrs dlr net","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","ford raises qtly payout cts shr cts ford raises qtly payout cts shr cts","<unk> corp ohio <unk> qtr net shr cts cts net","roto rooter inc roto qtr net shr cts cts net revs mln","raytheon <unk> qtr net shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","john <unk> qtr net shr cts cts net mln revs mln mln","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","ncr corp ncr qtr net shr cts cts net mln mln revs billion mln avg shrs mln mln","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","<unk> corp <unk> qtr sept net shr cts cts net revs mln mln avg shrs mln mln","tandy corp <unk> qtr sept net shr cts cts net mln mln revs mln mln avg shrs mln mln","<unk> bancorp <unk> qtr net shr cts cts net nine mths shr dlrs dlrs net mln mln","ohio <unk> <unk> qtr net shr cts cts net mln mln revs mln mln avg shrs mln mln mths shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","<unk> acquire prince mln dlrs <unk> acquire prince mln dlrs","westport bancorp inc <unk> qtr net shr cts cts net nine mths shr cts dlrs net","napa valley bancorp <unk> qtr net shr cts cts net","<unk> bancshares inc <unk> qtr net shr cts cts net nine mths shr dlrs dlrs net","inc <unk> qtr sept net shr cts cts net revs mln mln avg shrs half shr cts cts <unk> revs mln mln avg shrs","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","barnett banks florida inc <unk> qtr net shr cts cts net mln mln avg shrs mln mln","merrill corp <unk> qtr april net shr cts cts net revs mln mln avg shrs","<unk> microsystems inc <unk> qtr loss shr loss cts loss cts net loss loss revs avg shrs","<unk> corp <unk> qtr net shr cts cts net nine mths shr cts dlrs net mln","<unk> savings bank <unk> qtr net shr cts cts net avg shrs","horizon bancorp <unk> qtr net shr dlrs cts net mln nine mths shr dlrs dlrs net mln mln","<unk> corp <unk> qtr sept loss shr loss cts loss cts net loss loss revs mln mln","westinghouse electric corp qtr shr dlrs cts westinghouse electric corp qtr shr dlrs cts","<unk> group inc <unk> qtr net shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln mths shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","merrill lynch first qtr shr one dlr cts merrill lynch first qtr shr one dlr cts"];
var att_heads = [6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,6,6,6,6,6,6,6,6,6,6];
var trigram_weights = [[0.44764846563339233, 0.44764846563339233],[0.44764846563339233, 0.44764846563339233],[0.008774804882705212, 0.12900321185588837, 0.17474433779716492, 0.0871577113866806, 0.0871577113866806, 0.008774804882705212, 0.12900321185588837, 0.17474433779716492, 0.0871577113866806, 0.0871577113866806],[0.4320080578327179, 0.4320080578327179],[0.4320080578327179, 0.4320080578327179],[0.4320080578327179, 0.4320080578327179],[0.3502004146575928, 0.3502004146575928],[0.3502004146575928, 0.3502004146575928],[0.3502004146575928, 0.3502004146575928],[0.3502004146575928, 0.3502004146575928],[0.3502004146575928, 0.3502004146575928],[0.005702067166566849, 0.1807907223701477, 0.08382921665906906, 0.11355283111333847, 0.05663706734776497, 0.05663706734776497, 0.005702067166566849, 0.1807907223701477, 0.08382921665906906, 0.11355283111333847, 0.05663706734776497, 0.05663706734776497],[0.010429679416120052, 0.1533324420452118, 0.20770005881786346, 0.05644664913415909, 0.05644664913415909, 0.010429679416120052, 0.1533324420452118, 0.20770005881786346, 0.05644664913415909, 0.05644664913415909],[0.01602308265864849, 0.1823139637708664, 0.09653683006763458, 0.13076621294021606, 0.03553834185004234, 0.03553834185004234, 0.01602308265864849, 0.1823139637708664, 0.09653683006763458, 0.13076621294021606, 0.03553834185004234, 0.03553834185004234],[0.1781565248966217, 0.07253769785165787, 0.06666229665279388, 0.09029897302389145, 0.04503867030143738, 0.04503867030143738, 0.1781565248966217, 0.07253769785165787, 0.06666229665279388, 0.09029897302389145, 0.04503867030143738, 0.04503867030143738],[0.15410828590393066, 0.14124181866645813, 0.06549113988876343, 0.08871255815029144, 0.024109413847327232, 0.024109413847327232, 0.15410828590393066, 0.14124181866645813, 0.06549113988876343, 0.08871255815029144, 0.024109413847327232, 0.024109413847327232],[0.032496292144060135, 0.10536687076091766, 0.09683237224817276, 0.13116656243801117, 0.06542231142520905, 0.06542231142520905, 0.032496292144060135, 0.10536687076091766, 0.09683237224817276, 0.13116656243801117, 0.06542231142520905, 0.06542231142520905],[0.011512824334204197, 0.011512824334204197, 0.16925634443759918, 0.0014114755904302, 0.22927016019821167, 0.114353708922863, 0.114353708922863, 0.0014114755904302, 0.055151116102933884, 0.055151116102933884, 0.11480013281106949, 0.011512824334204197, 0.055151116102933884, 0.055151116102933884],[0.01371340174227953, 0.11277167499065399, 0.10363740473985672, 0.021320821717381477, 0.1403844803571701, 0.038152292370796204, 0.07001995295286179, 0.01371340174227953, 0.11277167499065399, 0.10363740473985672, 0.021320821717381477, 0.1403844803571701, 0.038152292370796204, 0.07001995295286179],[0.01082684751600027, 0.01082684751600027, 0.3432779014110565, 0.01082684751600027, 0.1591714322566986, 0.0013273743679746985, 0.2156093865633011, 0.0585961677134037, 0.0585961677134037, 0.0013273743679746985, 0.10795991867780685, 0.01082684751600027],[0.01082733366638422, 0.1732080727815628, 0.01082733366638422, 0.15917855501174927, 0.0013274343218654394, 0.2156190574169159, 0.058598797768354416, 0.3257766366004944, 0.0013274343218654394],[0.022233180701732635, 0.10767998546361923, 0.09895813465118408, 0.1340460628271103, 0.06685852259397507, 0.06685852259397507, 0.022233180701732635, 0.10767998546361923, 0.09895813465118408, 0.1340460628271103, 0.06685852259397507, 0.06685852259397507],[0.05429999530315399, 0.0006887073977850378, 0.010817915201187134, 0.003859117394313216, 0.10745136439800262, 0.21543149650096893, 0.10745136439800262, 0.05429999530315399, 0.0006887073977850378, 0.010817915201187134, 0.003859117394313216, 0.10745136439800262, 0.21543149650096893, 0.10745136439800262],[0.006558762397617102, 0.10492247343063354, 0.5033454298973083, 0.006558762397617102, 0.09642396122217178, 0.0008041061228141189, 0.13061334192752838, 0.06514638662338257, 0.06514638662338257, 0.0008041061228141189],[0.007588260341435671, 0.02021394670009613, 0.3270467519760132, 0.007588260341435671, 0.15164534747600555, 0.0012646123068407178, 0.2054147720336914, 0.10245530307292938, 0.10245530307292938, 0.0012646123068407178, 0.013335226103663445, 0.04941268265247345],[0.012213023379445076, 0.012213023379445076, 0.17955036461353302, 0.0014973202487453818, 0.24321416020393372, 0.06609831750392914, 0.06609831750392914, 0.0014973202487453818, 0.058505356311798096, 0.058505356311798096, 0.015789106488227844, 0.016906218603253365, 0.016906218603253365, 0.12178216874599457, 0.012213023379445076, 0.058505356311798096, 0.058505356311798096],[0.3205918073654175, 0.009385315701365471, 0.137978658080101, 0.001150642056018114, 0.1869022399187088, 0.0932217538356781, 0.0932217538356781, 0.001150642056018114, 0.04495948180556297, 0.012133420445024967, 0.04495948180556297, 0.04495948180556297],[0.010732117109000683, 0.1716848462820053, 0.010732117109000683, 0.15777873992919922, 0.0013157605426385999, 0.21372288465499878, 0.10659915953874588, 0.10659915953874588, 0.0013157605426385999, 0.051411207765340805, 0.051411207765340805, 0.013874576427042484, 0.051411207765340805, 0.051411207765340805],[0.21021507680416107, 0.08559057116508484, 0.21021507680416107, 0.07865791022777557, 0.0006559497560374439, 0.10654790699481964, 0.053143199533224106, 0.053143199533224106, 0.0006559497560374439, 0.025630183517932892, 0.025630183517932892, 0.0069169350899755955, 0.007406322285532951, 0.025630183517932892, 0.05335066094994545, 0.005350314546376467, 0.025630183517932892, 0.025630183517932892],[0.16261135041713715, 0.027597853913903236, 0.08340801298618317, 0.0006955625722184777, 0.11298228055238724, 0.056352488696575165, 0.056352488696575165, 0.16261135041713715, 0.027597853913903236, 0.08340801298618317, 0.0006955625722184777, 0.11298228055238724, 0.056352488696575165, 0.056352488696575165],[0.006928041577339172, 0.1108299270272255, 0.006928041577339172, 0.10185293108224869, 0.2784460783004761, 0.0008493796922266483, 0.1379672735929489, 0.06881432980298996, 0.06881432980298996, 0.0008493796922266483, 0.008956634439527988, 0.03318813815712929, 0.03318813815712929, 0.06908296793699265, 0.006928041577339172, 0.03318813815712929, 0.03318813815712929],[0.00645487243309617, 0.10326050221920013, 0.00645487243309617, 0.09489661455154419, 0.25942885875701904, 0.0007913690060377121, 0.12854443490505219, 0.06411446630954742, 0.06411446630954742, 0.0007913690060377121, 0.030921466648578644, 0.030921466648578644, 0.008344916626811028, 0.030921466648578644, 0.030921466648578644, 0.06436476111412048, 0.00645487243309617, 0.030921466648578644, 0.030921466648578644],[0.009301328100264072, 0.009301328100264072, 0.009301328100264072, 0.1367439180612564, 0.0011403454700484872, 0.18522968888282776, 0.09238752722740173, 0.09238752722740173, 0.0011403454700484872, 0.000591987743973732, 0.08631063252687454, 0.18522968888282776, 0.05033987760543823, 0.05033987760543823, 0.0011403454700484872, 0.04455714672803879, 0.04455714672803879],[0.30844125151634216, 0.004019094631075859, 0.004019094631075859, 0.05908694490790367, 0.0004927421687170863, 0.08003752678632736, 0.039920564740896225, 0.039920564740896225, 0.0004927421687170863, 0.019253095611929893, 0.019253095611929893, 0.005195922218263149, 0.019253095611929893, 0.019253095611929893, 0.04007640480995178, 0.004019094631075859, 0.019253095611929893, 0.019253095611929893, 0.037294741719961166, 0.08003752678632736, 0.02175181359052658, 0.02175181359052658, 0.0004927421687170863, 0.019253095611929893, 0.019253095611929893, 0.005195922218263149, 0.005563544109463692, 0.005563544109463692, 0.04007640480995178, 0.004019094631075859, 0.019253095611929893, 0.019253095611929893],[0.028491463512182236, 0.0004000542394351214, 0.13768643140792847, 0.13648571074008942, 0.15419915318489075, 0.028491463512182236, 0.0004000542394351214, 0.13768643140792847, 0.13648571074008942, 0.15419915318489075],[0.007453924976289272, 0.007453924976289272, 0.23633542656898499, 0.007453924976289272, 0.10958424210548401, 0.0009138531167991459, 0.1484398990869522, 0.07403779029846191, 0.07403779029846191, 0.0009138531167991459, 0.00047440899652428925, 0.06916787475347519, 0.1484398990869522, 0.07403779029846191, 0.040341515094041824, 0.0009138531167991459],[0.14918756484985352, 0.003892872715368867, 0.014179958030581474, 0.014179958030581474, 0.20846733450889587, 0.001738466788083315, 0.28238430619239807, 0.14084561169147491, 0.14084561169147491, 0.001738466788083315],[0.007654805202037096, 0.007654805202037096, 0.2427045702934265, 0.007654805202037096, 0.11253748834133148, 0.0009384811273775995, 0.15244029462337494, 0.0760330781340599, 0.0760330781340599, 0.0009384811273775995, 0.0004871941346209496, 0.07103192061185837, 0.15244029462337494, 0.04142870008945465, 0.04142870008945465, 0.0009384811273775995],[0.14781135320663452, 0.004661912564188242, 0.06853736191987991, 0.18736784160137177, 0.0005715517909266055, 0.09283880144357681, 0.046305492520332336, 0.046305492520332336, 0.0005715517909266055, 0.006026961840689182, 0.02233245223760605, 0.02233245223760605, 0.0464862622320652, 0.004661912564188242, 0.0019130526343360543, 0.09283880144357681, 0.046305492520332336, 0.046305492520332336, 0.004661912564188242, 0.006026961840689182, 0.02233245223760605, 0.02233245223760605, 0.0464862622320652, 0.004661912564188242],[0.027481069788336754, 0.06484720855951309, 0.03584115207195282, 0.15461242198944092, 0.15461242198944092, 0.013137108646333218, 0.04946865141391754, 0.027481069788336754, 0.06484720855951309, 0.03584115207195282, 0.15461242198944092, 0.15461242198944092, 0.013137108646333218, 0.04946865141391754],[0.09818078577518463, 0.027026083320379257, 0.09734362363815308, 0.2096693515777588, 0.006612887140363455, 0.09721968322992325, 0.0008107416797429323, 0.13169120252132416, 0.0656839907169342, 0.0656839907169342, 0.0008107416797429323, 0.031678423285484314, 0.031678423285484314, 0.06594040989875793, 0.006612887140363455, 0.031678423285484314, 0.031678423285484314],[0.13545918464660645, 0.08387186378240585, 0.0052428776398301125, 0.07707841694355011, 0.3687274754047394, 0.0006427780026569963, 0.10440836101770401, 0.0520760603249073, 0.0520760603249073, 0.0006427780026569963, 0.006778038572520018, 0.025115517899394035, 0.025115517899394035, 0.052279356867074966, 0.0052428776398301125],[0.00942730437964201, 0.041833847761154175, 0.2989037334918976, 0.00942730437964201, 0.13859596848487854, 0.00011864948464790359, 0.18773841857910156, 0.00011864948464790359, 0.0936388224363327, 0.00011864948464790359, 0.0936388224363327, 0.0011557899415493011, 0.00011864948464790359, 0.00011864948464790359, 0.012187703512609005, 0.09400437027215958, 0.00942730437964201],[0.008114311844110489, 0.12980705499649048, 0.008114311844110489, 0.11929295212030411, 0.0009948170045390725, 0.1615910679101944, 0.08059722185134888, 0.08059722185134888, 0.0009948170045390725, 0.0005164395552128553, 0.07529585063457489, 0.1615910679101944, 0.08059722185134888, 0.04391561076045036, 0.0009948170045390725, 0.038870859891176224],[0.014013069681823254, 0.0019335250835865736, 0.03539624065160751, 0.014013069681823254, 0.20601382851600647, 0.0017180063296109438, 0.27906087040901184, 0.13918796181678772, 0.13918796181678772, 0.0017180063296109438, 0.13973133265972137, 0.014013069681823254],[0.0035938434302806854, 0.009331276640295982, 0.009331276640295982, 0.13718421757221222, 0.0011440172092989087, 0.1858261078596115, 0.05050196498632431, 0.09268499910831451, 0.0011440172092989087, 0.04470061510801315, 0.0005938938702456653, 0.0865885391831398, 0.1858261078596115, 0.05050196498632431, 0.05050196498632431, 0.0011440172092989087, 0.04470061510801315, 0.04470061510801315],[0.008082184009253979, 0.12929308414459229, 0.008082184009253979, 0.11882060766220093, 0.32483237981796265, 0.00010172014299314469, 0.16095122694969177, 0.00010172014299314469, 0.08027809858322144, 0.00010172014299314469, 0.08027809858322144, 0.0009908777428790927, 0.00010172014299314469, 0.00010172014299314469, 0.010448719374835491, 0.03871694952249527, 0.03871694952249527],[0.007365502882748842, 0.00682058185338974, 0.1178281307220459, 0.10828429460525513, 0.14667902886867523, 0.03986296430230141, 0.07315950840711594, 0.007365502882748842, 0.00682058185338974, 0.1178281307220459, 0.10828429460525513, 0.14667902886867523, 0.03986296430230141, 0.07315950840711594],[0.005269345361739397, 0.004510072525590658, 0.16707073152065277, 0.005269345361739397, 0.07746756821870804, 0.0006460232543759048, 0.104935422539711, 0.0285183135420084, 0.0285183135420084, 0.0006460232543759048, 0.025242304429411888, 0.025242304429411888, 0.006812256760895252, 0.007294236682355404, 0.007294236682355404, 0.0525432787835598, 0.005269345361739397, 0.025242304429411888, 0.025242304429411888, 0.04889629781246185, 0.104935422539711, 0.0285183135420084, 0.0285183135420084, 0.0006460232543759048, 0.025242304429411888, 0.025242304429411888, 0.006812256760895252, 0.007294236682355404, 0.007294236682355404, 0.0525432787835598, 0.005269345361739397, 0.025242304429411888, 0.025242304429411888],[0.12360775470733643, 0.014522997662425041, 0.00043494251440279186, 0.07033476233482361, 0.09527360647916794, 0.0019660291727632284, 0.14394792914390564, 0.047519881278276443, 0.12360775470733643, 0.014522997662425041, 0.00043494251440279186, 0.07033476233482361, 0.09527360647916794, 0.0019660291727632284, 0.14394792914390564, 0.047519881278276443]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>