
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["<unk> <unk>","<unk>","isbn","dir","commodore cdtv","autodesk bbs","unsubscribe","unsubscribe","mhz iisi","polysyllabic polysyllabic","deleted","lou gehrig <unk>","ken","apr <unk> ists <unk> <unk> ists","david","jsn jeremy scott noonan","italy sweden canada sweden russia italy","dreams","exit","dancing <unk>","posted","pierre turgeon islanders","<unk> phones","bill mcd","kent wife","secrecy lds ceremonies clh","please subscrive","please subscrive","jesus peace","career mattingly","test","test","mistake","mjones donald aix kingston ibm com","compuserve com","ultimate <unk>","ego trip","objects <unk>","dino ciccarelli ray sheppard","bullshit","ignore","joke","religious fanaticism","<unk> order","<unk> <unk> umcc umcc umich edu dlc umcc umcc umich edu david","alt religion spam","consistently","ernest <unk> jcs sage purdue edu <unk> sage jcs","unfortunately","fuhr rings <unk> errey bob rings"];
var att_heads = [0,0,1,1,1,1,1,1,1,2,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,0,1,1,1,1,2,1,1,2,1,1,1,1,0,1,2,1,1,1,2,1,2,1];
var trigram_weights = [[0.3333333432674408, 0.3333333432674408],[0.3333333432674408],[0.8926398754119873],[0.8156726956367493],[0.8885058760643005, 0.05574709549546242],[0.036793068051338196, 0.9264138340950012],[0.5761330723762512],[0.2536242604255676],[0.8651260137557983, 0.06743693351745605],[0.474626749753952, 0.474626749753952],[0.9898504018783569],[0.8468155264854431, 0.05106150731444359, 0.05106150731444359],[0.7939126491546631],[0.2387073040008545, 0.022778984159231186, 0.3464778959751129, 0.022778984159231186, 0.022778984159231186, 0.3464778959751129],[0.8088595271110535],[0.04418369010090828, 0.44656217098236084, 0.4208868145942688, 0.04418369010090828],[0.07937786728143692, 0.20470677316188812, 0.2194565236568451, 0.20470677316188812, 0.1978999823331833, 0.07937786728143692],[0.6727885007858276],[0.9294050931930542],[0.7438558340072632, 0.1280721127986908],[0.997248113155365],[0.8175299167633057, 0.03560074046254158, 0.11126861721277237],[0.04870862513780594, 0.9025827646255493],[0.30205532908439636, 0.6753628849983215],[0.7523034811019897, 0.19614653289318085],[0.20616115629673004, 0.45202764868736267, 0.22789253294467926, 0.0569593645632267],[0.9857347011566162, 0.007132643833756447],[0.9857347011566162, 0.007132643833756447],[0.6998426914215088, 0.25129589438438416],[0.7750459909439087, 0.11247702687978745],[0.40362703800201416],[0.40362703800201416],[0.8801742196083069],[0.006129927467554808, 0.10957539826631546, 0.33965474367141724, 0.2653524577617645, 0.21687418222427368, 0.0624132938683033],[0.674584686756134, 0.19283807277679443],[0.8986372351646423, 0.012670349329710007],[0.7637544870376587, 0.17813065648078918],[0.8108076453208923, 0.09459620714187622],[0.2537417709827423, 0.021141299977898598, 0.2759039103984833, 0.3435065746307373],[0.7678950428962708],[0.9972531199455261],[0.7246093153953552],[0.8751363158226013, 0.10505862534046173],[0.11068672686815262, 0.11450621485710144],[0.0076960353180766106, 0.0076960353180766106, 0.0076960353180766106, 0.0076960353180766106, 0.21387991309165955, 0.11767534911632538, 0.22557774186134338, 0.0076960353180766106, 0.0076960353180766106, 0.21387991309165955, 0.11767534911632538, 0.06513548642396927],[0.17183755338191986, 0.23769818246364594, 0.5414057374000549],[0.6782078742980957],[0.06251240521669388, 0.017211459577083588, 0.017211459577083588, 0.1491791158914566, 0.30711355805397034, 0.26316988468170166, 0.017211459577083588, 0.1491791158914566, 0.017211459577083588],[0.9435100555419922],[0.11712978035211563, 0.3257395923137665, 0.034338466823101044, 0.034338466823101044, 0.12837561964988708, 0.3257395923137665]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>