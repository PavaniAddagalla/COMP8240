
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["polysyllabic polysyllabic","autodesk bbs","apr <unk> ists <unk> <unk> ists","unsubscribe","unsubscribe","dir","bullshit","isbn","commodore cdtv","urn <unk>","yep","mhz iisi","ernest <unk> <unk> sage purdue edu <unk> sage <unk>","comp graphics faq","lou gehrig <unk>","compuserve com","deleted","cheek","article <unk> sys bison baden sys bison baden bari","pierre turgeon islanders","dino ciccarelli ray sheppard","liar cheat demagogue","ken","<unk> jeremy scott noonan","abolish cults","xli xloadimage goto flag","mjones donald aix kingston ibm com","posted","dancing <unk>","fox <unk> dave feustel nmyi feustel netcom com","career mattingly","exit","quoting dougb ecs comm mot com article apr <unk> comm mot com","alt religion spam","objects ufos","<unk> file dis <unk> file tga","secrecy lds ceremonies clh","fuhr rings <unk> errey bob rings","<unk> subscrive please subscribe","please subscribe","please subscribe","please subscribe","<unk> <unk> umcc umcc umich edu dlc umcc umcc umich edu david","david","xli xloadimage imagemagick export lcs mit edu contrib","<unk> phones","dreams","caching drive","flat engine","subscribe <unk> <unk> eve <unk>"];
var att_heads = [0,0,0,0,0,2,0,2,2,0,0,2,2,2,0,0,0,0,2,2,2,0,0,2,1,2,2,2,0,2,2,1,2,1,2,1,1,2,0,0,0,0,2,2,1,2,0,2,2,2];
var trigram_weights = [[0.49540233612060547, 0.49540233612060547],[0.0015733559848740697, 0.7818920016288757],[0.0015741524985060096, 0.058103833347558975, 0.41205713152885437, 0.058103833347558975, 0.058103833347558975, 0.41205713152885437],[0.9987962245941162],[0.9987962245941162],[0.07605826109647751],[0.9994383454322815],[0.9945585131645203],[0.6733338832855225, 1.842485107772518e-05],[0.5452950596809387, 0.22735245525836945],[0.9996137022972107],[0.8357723951339722, 6.194657908054069e-05],[0.778078019618988, 0.0027486952021718025, 0.0027486952021718025, 0.07457476109266281, 0.061652135103940964, 0.00012563883501570672, 0.0027486952021718025, 0.07457476109266281, 0.0027486952021718025],[0.0007889495464041829, 0.9277601838111877, 0.001125105656683445],[0.4118039011955261, 0.5873457193374634, 0.0008503784774802625],[0.013880793936550617, 0.9760503172874451],[0.9937556982040405],[0.9986541271209717],[0.6607979536056519, 0.0020809751003980637, 7.3168553171854e-07, 0.003102409653365612, 0.0031146439723670483, 7.3168553171854e-07, 0.003102409653365612, 0.0031146439723670483, 0.32468554377555847],[0.9321671724319458, 0.0005850074230693281, 0.06544826179742813],[0.002109283348545432, 1.4249589185055811e-05, 0.9813024401664734, 0.016574004665017128],[0.6164579391479492, 0.2279813587665558, 0.1554969847202301],[0.9933673739433289],[0.0002640330058056861, 0.02180544100701809, 0.9777033925056458, 0.00022721356071997434],[0.9980186223983765, 0.0018625276861712337],[0.00015828001778572798, 0.01866217888891697, 8.423489634878933e-05, 0.906446635723114],[0.0006345133879221976, 0.014951351098716259, 0.00017680802557151765, 0.9808684587478638, 0.0019033740973100066, 0.001465453882701695],[0.9992731213569641],[0.9967549443244934, 0.001622494077309966],[0.7868702411651611, 0.016123119741678238, 0.12704943120479584, 7.013861613813788e-05, 0.016123119741678238, 7.013861613813788e-05, 0.00033330314909107983, 0.037237491458654404],[0.9999034404754639, 1.1298544677629252e-06],[0.9987919926643372],[0.3398503065109253, 0.0020281062461435795, 8.039239219215233e-06, 3.941021532227751e-06, 1.0374245675848215e-06, 0.0046840556897223, 0.6440098881721497, 0.0006693596369586885, 0.0020281062461435795, 3.941021532227751e-06, 1.0374245675848215e-06, 0.0046840556897223],[0.0002778360212687403, 0.9425369501113892, 0.05353819206357002],[0.9061444997787476, 6.830639904364944e-05],[0.0006157514872029424, 0.4983013868331909, 0.0011992946965619922, 0.0006157514872029424, 0.4983013868331909, 0.00035067598219029605],[0.9774501323699951, 0.00029754912247881293, 0.01918633095920086, 0.0006132004782557487],[9.83501649898244e-06, 0.22113707661628723, 0.0013891439884901047, 1.613773406461405e-06, 0.5563252568244934, 0.22113707661628723],[0.0002333696756977588, 0.0002333696756977588, 0.5515854358673096, 0.44794782996177673],[0.5517141819000244, 0.44805237650871277],[0.5517141819000244, 0.44805237650871277],[0.5517141819000244, 0.44805237650871277],[0.0012148782843723893, 0.0012148782843723893, 0.0012148782843723893, 0.0012148782843723893, 0.0012148782843723893, 5.553030496230349e-05, 3.7339708796935156e-05, 0.0012148782843723893, 0.0012148782843723893, 0.0012148782843723893, 5.553030496230349e-05, 0.9889178276062012],[0.9975491166114807],[2.918364407378249e-05, 0.0008500776602886617, 0.0008500776602886617, 0.9954727292060852, 0.0010795294074341655, 2.0665911506512202e-06, 1.615138717170339e-05, 0.0008500776602886617],[0.09495441615581512, 0.8100911378860474],[0.9997499585151672],[5.791795047116466e-06, 0.9957864880561829],[0.33402642607688904, 0.665593683719635],[1.8244107195641845e-05, 0.0033590325620025396, 0.0033590325620025396, 0.9899045825004578, 0.0033590325620025396]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>