
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["apr apr","apr apr","apr apr","oct oct","oct oct","oct oct","oct oct","oct oct","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","walgreen qtr shr cts cts walgreen qtr shr cts cts","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","jun jun","jun jun","ford raises qtly payout cts shr cts ford raises qtly payout cts shr cts","<unk> corp <unk> qtr mar shr cts cts net revs mln mln","roto rooter inc roto qtr net shr cts cts net revs mln","tandy corp <unk> qtr sept net shr cts cts net mln mln revs mln mln avg shrs mln mln","<unk> corp <unk> qtr sept net shr cts cts net revs mln mln avg shrs mln mln","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","bancorp <unk> qtr net shr cts cts net mln mln avg shrs mln mln","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","<unk> corp ohio <unk> qtr net shr cts cts net","napa valley bancorp <unk> qtr net shr cts cts net","<unk> microsystems inc <unk> qtr loss shr loss cts loss cts net loss loss revs avg shrs","westinghouse electric corp qtr shr dlrs cts westinghouse electric corp qtr shr dlrs cts","<unk> corp <unk> qtr sept loss shr loss cts loss cts net loss loss revs mln mln","park communications inc <unk> qtr mar shr cts cts net revs mln mln","trump interstate properties talks acquire alexanders trump interstate properties talks acquire alexanders","greyhound lines agrees acquire remaining routes trailways corp greyhound lines agrees acquire remaining routes trailways corp","ncr corp ncr qtr net shr cts cts net mln mln revs billion mln avg shrs mln mln","rio tinto zinc corp plc pretax profit mln stg mln rio tinto zinc corp plc pretax profit mln stg mln","permian raises crude oil postings cts bbl wti dlrs permian raises crude oil postings cts bbl wti dlrs","rowe furniture corp rowe qtr feb shr cts cts net revs mln mln","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","marathon raises crude oil postings cts bbl wti dlrs marathon raises crude oil postings cts bbl wti dlrs","petro canada raises crude postings cts canadian bbl sweet crude dlrs canadian bbl petro canada raises crude postings cts canadian bbl sweet crude dlrs canadian bbl","<unk> corp <unk> qtr net shr dlrs dlr net","<unk> acquire prince mln dlrs <unk> acquire prince mln dlrs","gte corp gte qtr mar shr cts cts net mln mln revs billion billion avg shrs mln mln","merrill corp <unk> qtr april net shr cts cts net revs mln mln avg shrs","afg industries inc afg qtr net shr primary cts cts shr diluted cts cts net revs mln mln avg shrs primary","<unk> bancorp inc <unk> qtr net shr dlrs dlrs net avg shrs","roto rooter inc roto qtr net shr cts cts net revs mln mln nine mths shr cts cts net revs mln mln","uspci inc <unk> qtr net shr cts cts net revs mln mln nine mths shr cts cts net revs mln mln","park communications inc <unk> qtr net shr cts cts net revs mln mln","circle express terminates planned acquisition overland express circle express terminates planned acquisition overland express"];
var att_heads = [3,3,3,8,8,8,8,8,8,8,8,3,3,9,9,3,5,5,5,3,3,3,3,6,0,2,6,1,0,1,0,2,0,8,8,3,5,1,3,3,2,1,8,3,8,1,7,7,0,0];
var trigram_weights = [[0.36230936646461487, 0.36230936646461487],[0.36230936646461487, 0.36230936646461487],[0.36230936646461487, 0.36230936646461487],[0.03207557648420334, 0.03207557648420334],[0.03207557648420334, 0.03207557648420334],[0.03207557648420334, 0.03207557648420334],[0.03207557648420334, 0.03207557648420334],[0.03207557648420334, 0.03207557648420334],[0.00833173654973507, 0.14738048613071442, 0.31116509437561035, 0.009732004255056381, 0.003722712630406022, 0.003722712630406022, 0.00833173654973507, 0.14738048613071442, 0.31116509437561035, 0.009732004255056381, 0.003722712630406022, 0.003722712630406022],[0.03470630943775177, 0.38487914204597473, 0.012037486769258976, 0.00460461201146245, 0.00460461201146245, 0.03470630943775177, 0.38487914204597473, 0.012037486769258976, 0.00460461201146245, 0.00460461201146245],[0.0236806720495224, 0.3694513440132141, 0.09658659994602203, 0.0030208451207727194, 0.0011555420933291316, 0.0011555420933291316, 0.0236806720495224, 0.3694513440132141, 0.09658659994602203, 0.0030208451207727194, 0.0011555420933291316, 0.0011555420933291316],[0.025552671402692795, 0.27178382873535156, 0.16586975753307343, 0.0357537567615509, 3.870485306833871e-05, 3.870485306833871e-05, 0.025552671402692795, 0.27178382873535156, 0.16586975753307343, 0.0357537567615509, 3.870485306833871e-05, 3.870485306833871e-05],[0.09349139779806137, 0.2328656017780304, 0.1421179622411728, 0.03063398040831089, 3.316249421914108e-05, 3.316249421914108e-05, 0.09349139779806137, 0.2328656017780304, 0.1421179622411728, 0.03063398040831089, 3.316249421914108e-05, 3.316249421914108e-05],[0.03422432020306587, 0.03422432020306587],[0.03422432020306587, 0.03422432020306587],[0.003839851589873433, 0.2514895796775818, 0.002019994892179966, 0.20505475997924805, 4.061098297825083e-05, 0.037514567375183105, 4.061098297825083e-05, 0.003839851589873433, 0.2514895796775818, 0.002019994892179966, 0.20505475997924805, 4.061098297825083e-05, 0.037514567375183105, 4.061098297825083e-05],[0.027912747114896774, 0.016331307590007782, 0.027912747114896774, 0.0016741440631449223, 0.00807009357959032, 0.00013427395606413484, 0.0011599499266594648, 0.0011599499266594648, 0.8783290386199951, 0.007463884074240923, 0.0009695303160697222, 0.0009695303160697222],[0.0001667750475462526, 0.00035655355895869434, 0.002753849606961012, 0.0001667750475462526, 0.0009283558465540409, 0.4870559871196747, 7.445835217367858e-05, 0.0006432219524867833, 0.0006432219524867833, 0.4870559871196747, 0.004138914868235588, 0.0005376294138841331],[0.044809237122535706, 0.008316013030707836, 0.014213360846042633, 0.0008524855365976691, 0.0006950986571609974, 0.4472511112689972, 6.837320688646287e-05, 0.0005906543810851872, 0.0005906543810851872, 0.4472511112689972, 0.0004936914192512631, 0.0004936914192512631, 0.0038006603717803955, 0.0004936914192512631, 0.0004936914192512631, 0.0001723519671941176, 0.014213360846042633, 0.0004936914192512631, 0.0004936914192512631],[0.0011391815496608615, 0.16082167625427246, 0.0011391815496608615, 0.09814953058958054, 0.004861038643866777, 0.09393079578876495, 0.021156443282961845, 2.290268639626447e-05, 2.290268639626447e-05, 0.09393079578876495, 0.002228564815595746, 0.12860402464866638, 0.12860402464866638, 0.007041729521006346, 0.0011391815496608615, 0.12860402464866638, 0.12860402464866638],[0.0011542349820956588, 0.16294680535793304, 0.0011542349820956588, 0.09944649785757065, 0.09517201781272888, 0.02143600955605507, 2.3205326215247624e-05, 2.3205326215247624e-05, 0.09517201781272888, 0.13030342757701874, 0.13030342757701874, 0.002258013468235731, 0.13030342757701874, 0.13030342757701874],[0.4752967953681946, 0.0007193365599960089, 0.06197654828429222, 0.059312622994184494, 0.013359242118895054, 1.4461898899753578e-05, 1.4461898899753578e-05, 0.059312622994184494, 0.0812070444226265, 0.0812070444226265, 0.0044465018436312675, 0.0007193365599960089, 0.0812070444226265, 0.0812070444226265],[0.002171803265810013, 0.15072529017925262, 0.032489314675331116, 0.1559947282075882, 0.1559947282075882, 0.002171803265810013, 0.15072529017925262, 0.032489314675331116, 0.1559947282075882, 0.1559947282075882],[0.2110251635313034, 0.0490843839943409, 0.0005493108765222132, 0.23045778274536133, 4.3954085413133726e-05, 0.00032665804610587656, 0.00032665804610587656, 0.2110251635313034, 0.0490843839943409, 0.0005493108765222132, 0.23045778274536133, 4.3954085413133726e-05, 0.00032665804610587656, 0.00032665804610587656],[0.06393298506736755, 0.02231600135564804, 0.0033940174616873264, 0.0008233459084294736, 0.00024368843878619373, 0.40715324878692627, 0.002136670285835862, 0.06393298506736755, 0.02231600135564804, 0.0033940174616873264, 0.0008233459084294736, 0.00024368843878619373, 0.40715324878692627, 0.002136670285835862],[0.014641689136624336, 0.005485984496772289, 0.12446031719446182, 0.014641689136624336, 0.00048299020272679627, 0.39759281277656555, 4.6411230869125575e-05, 0.0005651441751979291, 0.0005651441751979291, 0.39759281277656555],[0.01890573836863041, 0.2722055912017822, 0.003892027772963047, 0.011661074124276638, 0.0007824961794540286, 0.32828831672668457, 6.261282396735623e-05, 0.0004653260693885386, 0.0004653260693885386, 0.32828831672668457],[0.010773618705570698, 0.0021771604660898447, 0.0020825304090976715, 0.010773618705570698, 0.0005466783768497407, 0.13860829174518585, 6.335967918857932e-05, 0.13860829174518585, 0.0004921234794892371, 0.13860829174518585, 0.0004921234794892371, 0.2651817798614502, 0.13860829174518585, 0.13860829174518585, 0.003458859398961067, 0.00014309935795608908, 0.010773618705570698],[0.0189670342952013, 0.0996701791882515, 0.019553400576114655, 0.0029738564044237137, 0.00021352112526074052, 0.35674986243247986, 0.0018721619853749871, 0.0189670342952013, 0.0996701791882515, 0.019553400576114655, 0.0029738564044237137, 0.00021352112526074052, 0.35674986243247986, 0.0018721619853749871],[0.010873023420572281, 0.004915259312838316, 0.010873023420572281, 0.0005517224199138582, 0.00044787736260332167, 0.13988718390464783, 6.39442732790485e-05, 0.13988718390464783, 0.0004966640844941139, 0.13988718390464783, 0.0004966640844941139, 0.2676285207271576, 0.13988718390464783, 0.13988718390464783, 0.003490773029625416, 0.00036332389572635293, 0.00036332389572635293],[0.6409711241722107, 0.09110765159130096, 0.003576957155019045, 0.01089642383158207, 0.001320053357630968, 0.004757656250149012, 9.477906860411167e-05, 0.0008310265257023275, 0.0008310265257023275, 0.23814640939235687, 0.005786173045635223, 0.0008403534302487969, 0.0008403534302487969],[0.08070792257785797, 0.07397069782018661, 0.10764797776937485, 0.08364998549222946, 0.15025967359542847, 5.414017869043164e-05, 0.08070792257785797, 0.07397069782018661, 0.10764797776937485, 0.08364998549222946, 0.15025967359542847, 5.414017869043164e-05],[0.001306024962104857, 0.23231524229049683, 0.05436442047357559, 0.04972734674811363, 0.025139886885881424, 0.13263097405433655, 8.186015475075692e-05, 0.002724211197346449, 0.001306024962104857, 0.23231524229049683, 0.05436442047357559, 0.04972734674811363, 0.025139886885881424, 0.13263097405433655, 8.186015475075692e-05, 0.002724211197346449],[0.013182801194489002, 0.20566998422145844, 0.013182801194489002, 0.0537688210606575, 0.13155849277973175, 0.0016816752031445503, 0.0006432791124098003, 0.0006432791124098003, 0.13155849277973175, 0.00743637140840292, 0.00743637140840292, 0.0043305903673172, 0.40003737807273865, 0.00743637140840292, 0.0010498894844204187, 0.0055106207728385925, 0.00743637140840292, 0.00743637140840292],[0.004103943705558777, 0.007670058868825436, 0.030059436336159706, 0.052328258752822876, 0.0031406297348439693, 0.0086513115093112, 0.39009082317352295, 0.0018920227885246277, 0.00017153700173366815, 0.0018920227885246277, 0.004103943705558777, 0.007670058868825436, 0.030059436336159706, 0.052328258752822876, 0.0031406297348439693, 0.0086513115093112, 0.39009082317352295, 0.0018920227885246277, 0.00017153700173366815, 0.0018920227885246277],[0.004413409158587456, 0.25244465470314026, 0.001584156765602529, 0.0022260332480072975, 0.0027047127950936556, 4.076521145179868e-05, 0.05469171330332756, 0.0010874310974031687, 0.18080711364746094, 0.004413409158587456, 0.25244465470314026, 0.001584156765602529, 0.0022260332480072975, 0.0027047127950936556, 4.076521145179868e-05, 0.05469171330332756, 0.0010874310974031687, 0.18080711364746094],[0.12756210565567017, 0.19930583238601685, 0.00951247289776802, 0.12756210565567017, 0.0009751362958922982, 0.0003186057729180902, 7.821035978849977e-05, 0.0006756343645974994, 0.0006756343645974994, 0.511599063873291, 0.004347478039562702, 0.0005647209472954273, 0.0005647209472954273],[0.19363389909267426, 0.03404707834124565, 0.00030818223604001105, 3.57181197614409e-05, 0.1344691962003708, 0.1344691962003708, 0.19363389909267426, 0.03404707834124565, 0.00030818223604001105, 3.57181197614409e-05, 0.1344691962003708, 0.1344691962003708],[0.010333044454455376, 0.24942928552627563, 0.0015652343863621354, 0.002199443755671382, 0.002672405680641532, 4.027828254038468e-05, 0.054038435220718384, 0.0010744419414550066, 0.17864741384983063, 0.010333044454455376, 0.24942928552627563, 0.0015652343863621354, 0.002199443755671382, 0.002672405680641532, 4.027828254038468e-05, 0.054038435220718384, 0.0010744419414550066, 0.17864741384983063],[0.0021036281250417233, 0.006067439913749695, 0.22270622849464417, 0.0013975414913147688, 0.0023860952351242304, 3.596299939090386e-05, 0.0026559948455542326, 0.048249002546072006, 0.000798893510363996, 0.0013975414913147688, 0.1595078706741333, 0.0026559948455542326, 0.048249002546072006, 0.0021036281250417233, 0.006067439913749695, 0.22270622849464417, 0.0013975414913147688, 0.0023860952351242304, 3.596299939090386e-05, 0.0026559948455542326, 0.048249002546072006, 0.000798893510363996, 0.0013975414913147688, 0.1595078706741333, 0.0026559948455542326, 0.048249002546072006],[0.010669896379113197, 0.003997822292149067, 0.010669896379113197, 0.00035197127726860344, 0.28973937034606934, 3.3821463148342445e-05, 0.35192519426345825, 0.000193066502106376, 0.28973937034606934],[0.007367132231593132, 0.13588440418243408, 0.18234023451805115, 0.00024617405142635107, 0.16311132907867432, 0.007367132231593132, 0.13588440418243408, 0.18234023451805115, 0.00024617405142635107, 0.16311132907867432],[0.013772444799542427, 0.16180136799812317, 0.013772444799542427, 0.042300138622522354, 0.0011299799662083387, 0.0013229803880676627, 0.0005060701514594257, 0.0005060701514594257, 0.10349757969379425, 0.005850221961736679, 0.005850221961736679, 0.003406892064958811, 0.31471094489097595, 0.31471094489097595, 0.0008259520982392132, 0.004335226956754923, 0.005850221961736679, 0.005850221961736679],[0.23285405337810516, 0.1656440794467926, 0.0011733410647138953, 0.1010926365852356, 0.007087342906743288, 0.09674739837646484, 0.021790843456983566, 2.3589444026583806e-05, 2.3589444026583806e-05, 0.09674739837646484, 0.0022953907027840614, 0.132460355758667, 0.132460355758667, 0.007252883166074753, 0.0011733410647138953],[0.002971865236759186, 0.5131418704986572, 0.01105212327092886, 0.002971865236759186, 0.02333439327776432, 0.057093262672424316, 0.0007298067794181406, 0.08047059178352356, 0.00027916772523894906, 0.00027916772523894906, 0.0007298067794181406, 0.15525145828723907, 0.00027916772523894906, 0.00027916772523894906, 0.057093262672424316, 0.0018793732160702348, 0.0032272078096866608, 0.0032272078096866608, 0.00045562710147351027, 0.0023914785124361515, 0.08047059178352356],[0.01019930187612772, 0.0027937700506299734, 0.0019715153612196445, 0.01019930187612772, 0.000517536245752126, 0.2510455548763275, 5.9982117818435654e-05, 0.2258167415857315, 0.2258167415857315, 0.2510455548763275, 0.00013547106937039644, 0.01019930187612772],[8.168150816345587e-05, 0.0001668949844315648, 0.0013044424122199416, 8.168150816345587e-05, 0.0003948891826439649, 0.2271856963634491, 4.0175364119932055e-05, 0.0002709426626097411, 0.0002709426626097411, 0.2271856963634491, 0.0022338598500937223, 0.00030406852602027357, 0.00030406852602027357, 0.2943079471588135, 0.0076286024414002895, 4.0175364119932055e-05, 0.0002709426626097411, 0.0002709426626097411, 0.2271856963634491, 0.0022338598500937223, 0.00030406852602027357, 0.00030406852602027357],[0.0075164055451750755, 0.0012852575164288282, 0.0075164055451750755, 0.00038908139686100185, 0.22384439408779144, 3.9584487240063027e-05, 0.00026695779524743557, 0.00026695779524743557, 0.22384439408779144, 0.002201005583629012, 0.0002995964605361223, 0.0002995964605361223, 0.2899794578552246, 0.0075164055451750755, 3.9584487240063027e-05, 0.00026695779524743557, 0.00026695779524743557, 0.22384439408779144, 0.002201005583629012, 0.0002995964605361223, 0.0002995964605361223],[0.5196830034255981, 0.07386774569749832, 0.0029001054354012012, 0.008834541775286198, 0.0010702654253691435, 0.1930830031633377, 7.684444426558912e-05, 0.0006737750372849405, 0.0006737750372849405, 0.1930830031633377, 0.0046912808902561665, 0.0006813370273448527, 0.0006813370273448527],[0.05505404993891716, 0.11737009137868881, 0.003916360903531313, 0.1724604070186615, 0.026406701654195786, 0.007422272581607103, 0.11737009137868881, 0.05505404993891716, 0.11737009137868881, 0.003916360903531313, 0.1724604070186615, 0.026406701654195786, 0.007422272581607103, 0.11737009137868881]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>