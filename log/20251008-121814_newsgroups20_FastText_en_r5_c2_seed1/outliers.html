
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["<unk>","<unk> <unk>","dir","isbn","commodore cdtv","mhz iisi","autodesk bbs","unsubscribe","unsubscribe","polysyllabic polysyllabic","deleted","ken","lou gehrig <unk>","exit","david","<unk> jeremy scott noonan","dancing <unk>","apr <unk> ists <unk> <unk> ists","posted","<unk> phones","italy sweden canada sweden russia italy","dreams","test","test","career mattingly","pierre turgeon islanders","objects <unk>","mistake","compuserve com","ignore","bill mcd","alt law enforcement","please subscrive","please subscrive","ultimate <unk>","mjones donald aix kingston ibm com","<unk> order","joke","religious fanaticism","bullshit","dino ciccarelli ray sheppard","unfortunately","alt religion spam","<unk> <unk> umcc umcc umich edu dlc umcc umcc umich edu david","consistently","simple","jesus peace","yes","fox <unk> dave feustel nmyi feustel netcom com","ego trip"];
var att_heads = [0,0,4,4,4,4,4,4,4,0,4,4,4,1,4,4,3,4,1,3,4,3,3,3,3,4,3,3,4,1,4,3,4,4,0,4,3,3,3,4,4,0,3,4,2,0,4,4,4,3];
var trigram_weights = [[0.5],[0.25, 0.25],[0.9567291736602783],[0.9671095013618469],[0.8971316814422607, 0.10286835581064224],[0.9287494421005249, 0.0712505429983139],[0.0594598762691021, 0.9405401349067688],[0.6978919506072998],[0.6978919506072998],[0.5, 0.5],[0.4329671263694763],[0.9489389657974243],[0.955564022064209, 0.014811979606747627, 0.014811979606747627],[0.9943403005599976],[0.9847256541252136],[0.008340972475707531, 0.5843381881713867, 0.39897987246513367, 0.008340972475707531],[0.7507227063179016, 0.2492772787809372],[0.46654003858566284, 0.016367288306355476, 0.2421790063381195, 0.016367288306355476, 0.016367288306355476, 0.2421790063381195],[0.9984910488128662],[0.14028781652450562, 0.8597121834754944],[0.1476256549358368, 0.2132357656955719, 0.14134690165519714, 0.2132357656955719, 0.13284873962402344, 0.1476256549358368],[0.8713905811309814],[0.8273332118988037],[0.8273332118988037],[0.9839403629302979, 0.016059627756476402],[0.891364574432373, 0.016864430159330368, 0.007448779884725809],[0.9713910818099976, 0.028608864173293114],[0.6297086477279663],[0.7249523401260376, 0.20437316596508026],[0.9997767806053162],[0.03021995723247528, 0.9697800278663635],[0.005629603285342455, 0.8376621603965759, 0.12516210973262787],[0.899603009223938, 0.100397028028965],[0.899603009223938, 0.100397028028965],[0.9970341920852661, 0.0029658079147338867],[0.003579535987228155, 0.24696987867355347, 0.16957244277000427, 0.32477298378944397, 0.18941877782344818, 0.062106888741254807],[0.06288143992424011, 0.9371185302734375],[0.8204512596130371],[0.10294956713914871, 0.7662267684936523],[0.8971841335296631],[0.09305404871702194, 0.009610258042812347, 0.08333908766508102, 0.8139966130256653],[0.9615148901939392],[0.006110391113907099, 0.9330768585205078, 0.026572465896606445],[0.003496465738862753, 0.003496465738862753, 0.003496465738862753, 0.003496465738862753, 0.19601653516292572, 0.08224187791347504, 0.19708910584449768, 0.003496465738862753, 0.003496465738862753, 0.19601653516292572, 0.08224187791347504, 0.22541525959968567],[0.9864656329154968],[0.9989808201789856],[0.9783103466033936, 0.021689705550670624],[0.8960909843444824],[0.1447046846151352, 0.012581202201545238, 0.5740986466407776, 0.012581202201545238, 0.012581202201545238, 0.012581202201545238, 0.012581202201545238, 0.21829065680503845],[0.23986154794692993, 0.7601384520530701]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>