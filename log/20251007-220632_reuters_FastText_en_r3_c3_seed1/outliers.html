
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["jun jun","jun jun","walgreen qtr shr cts cts walgreen qtr shr cts cts","apr apr","apr apr","apr apr","oct oct","oct oct","oct oct","oct oct","oct oct","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","stoltenberg rule central bank intervention stabilize currencies stoltenberg rule central bank intervention stabilize currencies","gte corp qtr shr cts cts gte corp qtr shr cts cts","morgan inc qtr shr dlrs dlrs morgan inc qtr shr dlrs dlrs","bancorp <unk> qtr net shr cts cts net mln mln avg shrs mln mln","napa valley bancorp <unk> qtr net shr cts cts net","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","ford raises qtly payout cts shr cts ford raises qtly payout cts shr cts","northwest natural gas <unk> qtr net shr dlrs dlrs div cts cts prior net revs mln mln avg shrs","<unk> bancorp inc <unk> qtr net shr dlrs dlrs net avg shrs","general electric qtr shr dlrs dlrs general electric qtr shr dlrs dlrs","westinghouse electric corp qtr shr dlrs cts westinghouse electric corp qtr shr dlrs cts","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","roto rooter inc roto qtr net shr cts cts net revs mln","<unk> corp <unk> qtr net shr dlrs dlr net","raytheon <unk> qtr net shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","<unk> corp ohio <unk> qtr net shr cts cts net","<unk> savings bank <unk> qtr net shr cts cts net avg shrs","boeing acquire argosystems dlrs share boeing acquire argosystems dlrs share","john <unk> qtr net shr cts cts net mln revs mln mln","ncr corp ncr qtr net shr cts cts net mln mln revs billion mln avg shrs mln mln","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","<unk> inc <unk> payout qtly div two cts two cts prior pay may record may eight","trump interstate properties talks acquire alexanders trump interstate properties talks acquire alexanders","marathon raises crude oil postings cts bbl wti dlrs marathon raises crude oil postings cts bbl wti dlrs","cable wireless merge two units new telecommunication operation cable wireless merge two units new telecommunication operation","rio tinto zinc corp plc pretax profit mln stg mln rio tinto zinc corp plc pretax profit mln stg mln","ibc acquisition gets shares tender buy pct ibc acquisition gets shares tender buy pct","<unk> <unk> <unk> qtr net shr cts cts net sales mln mln avg shrs","wells fargo wfc raises quarterly div qtly div cts cts pay jan record dec","<unk> corp <unk> qtr sept net shr cts cts net revs mln mln avg shrs mln mln","tandy corp <unk> qtr sept net shr cts cts net mln mln revs mln mln avg shrs mln mln","<unk> acquire prince mln dlrs <unk> acquire prince mln dlrs","national city bancorp <unk> qtr net shr cts cts net"];
var att_heads = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];
var trigram_weights = [[0.41647791862487793, 0.41647791862487793],[0.41647791862487793, 0.41647791862487793],[0.004764096345752478, 0.15632258355617523, 0.08646326512098312, 0.12265195697546005, 0.12265195697546005, 0.004764096345752478, 0.15632258355617523, 0.08646326512098312, 0.12265195697546005, 0.12265195697546005],[0.4103851318359375, 0.4103851318359375],[0.4103851318359375, 0.4103851318359375],[0.4103851318359375, 0.4103851318359375],[0.34329167008399963, 0.34329167008399963],[0.34329167008399963, 0.34329167008399963],[0.34329167008399963, 0.34329167008399963],[0.34329167008399963, 0.34329167008399963],[0.34329167008399963, 0.34329167008399963],[0.007631511427462101, 0.2504100501537323, 0.1385037899017334, 0.04600369185209274, 0.04600369185209274, 0.007631511427462101, 0.2504100501537323, 0.1385037899017334, 0.04600369185209274, 0.04600369185209274],[0.00318361003883183, 0.16905830800533295, 0.1044626459479332, 0.05777912959456444, 0.08196224272251129, 0.08196224272251129, 0.00318361003883183, 0.16905830800533295, 0.1044626459479332, 0.05777912959456444, 0.08196224272251129, 0.08196224272251129],[0.06377600878477097, 0.15364934504032135, 0.14597508311271667, 0.08073998987674713, 0.02681758813560009, 0.02681758813560009, 0.06377600878477097, 0.15364934504032135, 0.14597508311271667, 0.08073998987674713, 0.02681758813560009, 0.02681758813560009],[0.24471457302570343, 0.08557518571615219, 0.05408983305096626, 0.02991752326488495, 0.04243932664394379, 0.04243932664394379, 0.24471457302570343, 0.08557518571615219, 0.05408983305096626, 0.02991752326488495, 0.04243932664394379, 0.04243932664394379],[0.00617311242967844, 0.005367608740925789, 0.34363219141960144, 0.108726866543293, 0.0030753614846616983, 0.0003886058693751693, 0.032636258751153946, 0.00617311242967844, 0.005367608740925789, 0.34363219141960144, 0.108726866543293, 0.0030753614846616983, 0.0003886058693751693, 0.032636258751153946],[0.03869231045246124, 0.1546366959810257, 0.09774181246757507, 0.054061777889728546, 0.07668901979923248, 0.07668901979923248, 0.03869231045246124, 0.1546366959810257, 0.09774181246757507, 0.054061777889728546, 0.07668901979923248, 0.07668901979923248],[0.0898708701133728, 0.18675072491168976, 0.1153949424624443, 0.06382587552070618, 0.021199606359004974, 0.021199606359004974, 0.0898708701133728, 0.18675072491168976, 0.1153949424624443, 0.06382587552070618, 0.021199606359004974, 0.021199606359004974],[0.006556018255650997, 0.006556018255650997, 0.21512027084827423, 0.00926437508314848, 0.11898473650217056, 0.16878509521484375, 0.16878509521484375, 0.00926437508314848, 0.04913539066910744, 0.04913539066910744, 0.09358643740415573, 0.006556018255650997, 0.04913539066910744, 0.04913539066910744],[0.1799195557832718, 0.01314461138099432, 0.007317292038351297, 0.007317292038351297, 0.24009966850280762, 0.010340138338506222, 0.13280104100704193, 0.18838413059711456, 0.18838413059711456, 0.010340138338506222],[0.0034760632552206516, 0.17914646863937378, 0.11323379725217819, 0.0284155011177063, 0.06263051927089691, 0.0208025723695755, 0.08884415775537491, 0.0034760632552206516, 0.17914646863937378, 0.11323379725217819, 0.0284155011177063, 0.06263051927089691, 0.0208025723695755, 0.08884415775537491],[0.02900904230773449, 0.1578826606273651, 0.09979349374771118, 0.05519657954573631, 0.07829878479242325, 0.07829878479242325, 0.02900904230773449, 0.1578826606273651, 0.09979349374771118, 0.05519657954573631, 0.07829878479242325, 0.07829878479242325],[0.040676217526197433, 0.0022171158343553543, 0.006268745753914118, 0.008019589819014072, 0.16138926148414612, 0.11377105116844177, 0.16138926148414612, 0.040676217526197433, 0.0022171158343553543, 0.006268745753914118, 0.008019589819014072, 0.16138926148414612, 0.11377105116844177, 0.16138926148414612],[0.007984213531017303, 0.001099618966691196, 0.019298210740089417, 0.0013674418441951275, 0.044869374483823776, 0.0019323454471305013, 0.024817612022161484, 0.008243109099566936, 0.008243109099566936, 0.7533325552940369, 0.03520487621426582, 0.03520487621426582, 0.0006993720890022814, 0.0019323454471305013, 0.01301881205290556, 0.01024856511503458, 0.01024856511503458, 0.01952008344233036, 0.0013674418441951275],[0.007234756834805012, 0.007234756834805012, 0.38418516516685486, 0.007234756834805012, 0.23739145696163177, 0.01022350788116455, 0.13130313158035278, 0.04361201077699661, 0.04361201077699661, 0.01022350788116455, 0.1032753735780716, 0.007234756834805012],[0.008742841891944408, 0.10473538935184479, 0.19967308640480042, 0.11044077575206757, 0.03668263182044029, 0.03668263182044029, 0.008742841891944408, 0.10473538935184479, 0.19967308640480042, 0.11044077575206757, 0.03668263182044029, 0.03668263182044029],[0.003270993009209633, 0.05629821866750717, 0.16980597376823425, 0.10732991248369217, 0.059365030378103256, 0.019717950373888016, 0.08421192318201065, 0.003270993009209633, 0.05629821866750717, 0.16980597376823425, 0.10732991248369217, 0.059365030378103256, 0.019717950373888016, 0.08421192318201065],[0.15845142304897308, 0.206101655960083, 0.005521923303604126, 0.038208745419979095, 0.038208745419979095, 0.014120446518063545, 0.0011782911606132984, 0.15845142304897308, 0.206101655960083, 0.005521923303604126, 0.038208745419979095, 0.038208745419979095, 0.014120446518063545, 0.0011782911606132984],[0.0069188629277050495, 0.01469914149492979, 0.292451947927475, 0.0069188629277050495, 0.18070867657661438, 0.007782405242323875, 0.09995142370462418, 0.14178550243377686, 0.14178550243377686, 0.007782405242323875, 0.05243249237537384, 0.04127547889947891],[0.00595368817448616, 0.3090718388557434, 0.00595368817448616, 0.19535622000694275, 0.008413217030465603, 0.10805308818817139, 0.03588956966996193, 0.29908064007759094, 0.008413217030465603],[0.0073613994754850864, 0.0073613994754850864, 0.24154695868492126, 0.010402467101812363, 0.13360154628753662, 0.044375427067279816, 0.044375427067279816, 0.010402467101812363, 0.055171482264995575, 0.055171482264995575, 0.07008466869592667, 0.048678867518901825, 0.048678867518901825, 0.1050831750035286, 0.0073613994754850864, 0.055171482264995575, 0.055171482264995575],[0.0030869673937559128, 0.16025270521640778, 0.4993229806423187, 0.0030869673937559128, 0.10129154473543167, 0.004362223669886589, 0.05602516606450081, 0.07947416603565216, 0.07947416603565216, 0.004362223669886589],[0.0070302593521773815, 0.007567955181002617, 0.12382378429174423, 0.0070302593521773815, 0.230681374669075, 0.009934529662132263, 0.12759169936180115, 0.18099446594715118, 0.18099446594715118, 0.009934529662132263, 0.10035617649555206, 0.0070302593521773815],[0.35792624950408936, 0.001434304635040462, 0.015488754957914352, 0.09336815029382706, 0.008549386635422707, 0.35792624950408936, 0.001434304635040462, 0.015488754957914352, 0.09336815029382706, 0.008549386635422707],[0.5405899882316589, 0.003298402763903141, 0.10822928696870804, 0.004661004990339279, 0.059862490743398666, 0.0849175825715065, 0.0849175825715065, 0.004661004990339279, 0.024720540270209312, 0.031402651220560074, 0.024720540270209312, 0.024720540270209312],[0.2838596999645233, 0.099263995885849, 0.2838596999645233, 0.06274217367172241, 0.0027020559646189213, 0.03470320254564285, 0.04922802373766899, 0.04922802373766899, 0.0027020559646189213, 0.014330875128507614, 0.014330875128507614, 0.018204595893621445, 0.012644409202039242, 0.014330875128507614, 0.027295513078570366, 0.0019121345831081271, 0.014330875128507614, 0.014330875128507614],[0.09943871200084686, 0.10153248906135559, 0.09356735646724701, 0.004029574804008007, 0.051752861589193344, 0.07341370731592178, 0.07341370731592178, 0.09943871200084686, 0.10153248906135559, 0.09356735646724701, 0.004029574804008007, 0.051752861589193344, 0.07341370731592178, 0.07341370731592178],[0.00503296684473753, 0.2612747550010681, 0.00503296684473753, 0.1651449352502823, 0.007112136576324701, 0.0913429856300354, 0.12957406044006348, 0.12957406044006348, 0.007112136576324701, 0.03772057965397835, 0.03772057965397835, 0.047916680574417114, 0.03772057965397835, 0.03772057965397835],[0.0015010233037173748, 0.07970839738845825, 0.0015010233037173748, 0.0019202545518055558, 0.0015010233037173748, 0.8269234299659729, 0.0011230685049667954, 0.03864394128322601, 0.0011230685049667954, 0.03864394128322601, 0.0007676917011849582, 0.0006272243335843086, 0.00018429987540002912, 0.003208573441952467, 0.00018429987540002912, 0.000937676290050149],[0.1038041040301323, 0.18803006410598755, 0.045941632241010666, 0.0026218758430331945, 0.0022250956390053034, 0.14536307752132416, 0.1038041040301323, 0.18803006410598755, 0.045941632241010666, 0.0026218758430331945, 0.0022250956390053034, 0.14536307752132416],[0.0027196533046662807, 0.004055059049278498, 0.004017248749732971, 0.03529465198516846, 0.015009382739663124, 0.2951776087284088, 0.06314609944820404, 0.01146540604531765, 0.06911488622426987, 0.0027196533046662807, 0.004055059049278498, 0.004017248749732971, 0.03529465198516846, 0.015009382739663124, 0.2951776087284088, 0.06314609944820404, 0.01146540604531765, 0.06911488622426987],[0.007157220970839262, 0.06788285076618195, 0.0062516676262021065, 0.007592383772134781, 0.24609269201755524, 0.021359391510486603, 0.13160638511180878, 0.00698359590023756, 0.007157220970839262, 0.06788285076618195, 0.0062516676262021065, 0.007592383772134781, 0.24609269201755524, 0.021359391510486603, 0.13160638511180878, 0.00698359590023756],[0.2904891073703766, 0.021870464086532593, 0.0030200565233826637, 0.09756897389888763, 0.0189896859228611, 0.0026762804482132196, 0.0012754973722621799, 0.014086160808801651, 0.03405815362930298, 0.014086160808801651, 0.2904891073703766, 0.021870464086532593, 0.0030200565233826637, 0.09756897389888763, 0.0189896859228611, 0.0026762804482132196, 0.0012754973722621799, 0.014086160808801651, 0.03405815362930298, 0.014086160808801651],[0.041185662150382996, 0.008749857544898987, 0.14141537249088287, 0.015795934945344925, 0.01522059552371502, 0.030406778678297997, 0.2472257763147354, 0.041185662150382996, 0.008749857544898987, 0.14141537249088287, 0.015795934945344925, 0.01522059552371502, 0.030406778678297997, 0.2472257763147354],[0.0071040973998606205, 0.0071040973998606205, 0.0071040973998606205, 0.23310419917106628, 0.010038871318101883, 0.12893179059028625, 0.18289543688297272, 0.18289543688297272, 0.010038871318101883, 0.015782644972205162, 0.05324308201670647, 0.05324308201670647, 0.10141021013259888, 0.0071040973998606205],[0.01110699400305748, 0.02675900049507618, 0.014043127186596394, 0.0002740213822107762, 0.004879623651504517, 0.42682966589927673, 0.00077477702870965, 0.42682966589927673, 0.019946683198213577, 0.019946683198213577, 0.00032375179580412805, 0.013637910597026348, 0.0016561561496928334, 0.0329919196665287],[0.003651481354609132, 0.18955813348293304, 0.003651481354609132, 0.11981473863124847, 0.21871136128902435, 0.005159945227205753, 0.06627049297094345, 0.09400761127471924, 0.09400761127471924, 0.005159945227205753, 0.03476415574550629, 0.02736675925552845, 0.02736675925552845, 0.052124496549367905, 0.003651481354609132, 0.02736675925552845, 0.02736675925552845],[0.003450050251558423, 0.17910131812095642, 0.003450050251558423, 0.11320526152849197, 0.20664633810520172, 0.004875300917774439, 0.06261473149061203, 0.08882175385951996, 0.08882175385951996, 0.004875300917774439, 0.025857094675302505, 0.025857094675302505, 0.032846421003341675, 0.025857094675302505, 0.025857094675302505, 0.04924909397959709, 0.003450050251558423, 0.025857094675302505, 0.025857094675302505],[0.02343118190765381, 0.0021697974298149347, 0.12239645421504974, 0.17560970783233643, 0.14124606549739838, 0.02343118190765381, 0.0021697974298149347, 0.12239645421504974, 0.17560970783233643, 0.14124606549739838],[0.20017977058887482, 0.10467775166034698, 0.00630355067551136, 0.00630355067551136, 0.20683614909648895, 0.008907610550522804, 0.11440271884202957, 0.16228531301021576, 0.16228531301021576, 0.008907610550522804]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>