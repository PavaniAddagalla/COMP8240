
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["jun jun","jun jun","apr apr","apr apr","apr apr","oct oct","oct oct","oct oct","oct oct","oct oct","walgreen qtr shr cts cts walgreen qtr shr cts cts","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","<unk> savings bank <unk> qtr net shr cts cts net avg shrs","bancorp <unk> qtr net shr cts cts net mln mln avg shrs mln mln","<unk> bancorp inc <unk> qtr net shr dlrs dlrs net avg shrs","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","napa valley bancorp <unk> qtr net shr cts cts net","<unk> <unk> <unk> qtr net shr cts cts net sales mln mln avg shrs","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","simon schuster acquire woodhead faulkner undisclosed terms simon schuster acquire woodhead faulkner undisclosed terms","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","national city bancorp <unk> qtr net shr cts cts net","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","morgan inc qtr shr dlrs dlrs morgan inc qtr shr dlrs dlrs","data <unk> inc <unk> qtr feb net shr cts cts net sales avg shrs","<unk> microsystems inc <unk> qtr loss shr loss cts loss cts net loss loss revs avg shrs","ibc acquisition gets shares tender buy pct ibc acquisition gets shares tender buy pct","fed approves citicorp purchase assets sears calif thrift fed approves citicorp purchase assets sears calif thrift","fleet financial group qtr shr cts cts fleet financial group qtr shr cts cts","hicks haas group gets financing spectradyne acquisition hicks haas group gets financing spectradyne acquisition","national banc commerce <unk> qtr shr cts cts net avg shrs nine mths shr dlrs dlrs net avg shrs","<unk> <unk> bank trust <unk> qtr net shr cts cts shr diluted cts cts net avg shrs avg shrs diluted","united telecommunications inc qtr shr cts cts united telecommunications inc qtr shr cts cts","<unk> acquire prince mln dlrs <unk> acquire prince mln dlrs","<unk> hall inc <unk> qtr feb net shr cts cts net revs mln mln avg shrs","whirlpool corp <unk> qtr net shr cts cts net sales mln mln avg shrs","international <unk> inc <unk> qtr shr loss five cts loss eight cts net loss loss revs avg shrs nine mths shr loss cts loss cts net loss loss revs avg shrs","circle express terminates planned acquisition overland express circle express terminates planned acquisition overland express","raytheon <unk> qtr net shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","merrill corp <unk> qtr april net shr cts cts net revs mln mln avg shrs","barnett banks florida inc <unk> qtr net shr cts cts net mln mln avg shrs mln mln","<unk> financial corp <unk> qtr net shr cts cts net avg shrs nine mths shr dlrs dlrs net mln mln avg shrs","<unk> systems inc <unk> qtr sept net shr cts cts net sales","<unk> corp ohio <unk> qtr net shr cts cts net","nature <unk> products inc <unk> qtr shr cts cts net revs avg shrs nine mths shr cts cts net revs mln mln avg shrs","boeing acquire argosystems dlrs share boeing acquire argosystems dlrs share","roto rooter inc roto qtr net shr cts cts net revs mln"];
var att_heads = [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2];
var trigram_weights = [[0.4360996186733246, 0.4360996186733246],[0.4360996186733246, 0.4360996186733246],[0.4579281806945801, 0.4579281806945801],[0.4579281806945801, 0.4579281806945801],[0.4579281806945801, 0.4579281806945801],[0.45052850246429443, 0.45052850246429443],[0.45052850246429443, 0.45052850246429443],[0.45052850246429443, 0.45052850246429443],[0.45052850246429443, 0.45052850246429443],[0.45052850246429443, 0.45052850246429443],[0.004733112640678883, 0.16067185997962952, 0.116456039249897, 0.10551965236663818, 0.10551965236663818, 0.004733112640678883, 0.16067185997962952, 0.116456039249897, 0.10551965236663818, 0.10551965236663818],[0.0036900208797305822, 0.11388091742992401, 0.12526270747184753, 0.0907912477850914, 0.08226504176855087, 0.08226504176855087, 0.0036900208797305822, 0.11388091742992401, 0.12526270747184753, 0.0907912477850914, 0.08226504176855087, 0.08226504176855087],[0.0879349410533905, 0.10942342132329941, 0.09912874549627304, 0.07184918224811554, 0.06510182470083237, 0.06510182470083237, 0.0879349410533905, 0.10942342132329941, 0.09912874549627304, 0.07184918224811554, 0.06510182470083237, 0.06510182470083237],[0.06640401482582092, 0.11514092981815338, 0.1043083444237709, 0.07560338824987411, 0.0685034766793251, 0.0685034766793251, 0.06640401482582092, 0.11514092981815338, 0.1043083444237709, 0.07560338824987411, 0.0685034766793251, 0.0685034766793251],[0.0039395675994455814, 0.13373391330242157, 0.09693122655153275, 0.12974298000335693, 0.12974298000335693, 0.0039395675994455814, 0.13373391330242157, 0.09693122655153275, 0.12974298000335693, 0.12974298000335693],[0.0035304157063364983, 0.004818858578801155, 0.03089250437915325, 0.0035304157063364983, 0.11984468996524811, 0.0034001057501882315, 0.08686422556638718, 0.07870680838823318, 0.07870680838823318, 0.0034001057501882315, 0.5792441964149475, 0.0035304157063364983],[0.0028636567294597626, 0.0028636567294597626, 0.09721066802740097, 0.0027579572051763535, 0.07045893371105194, 0.06384214013814926, 0.06384214013814926, 0.0027579572051763535, 0.05517296865582466, 0.05517296865582466, 0.4698473811149597, 0.0028636567294597626, 0.05517296865582466, 0.05517296865582466],[0.0030648706015199423, 0.0030648706015199423, 0.09458760172128677, 0.0030648706015199423, 0.10404113680124283, 0.0029517440125346184, 0.07540970295667648, 0.10093631595373154, 0.10093631595373154, 0.0029517440125346184, 0.5028610229492188, 0.0030648706015199423],[0.004462439101189375, 0.13158945739269257, 0.11920937150716782, 0.0864037498831749, 0.07828957587480545, 0.07828957587480545, 0.004462439101189375, 0.13158945739269257, 0.11920937150716782, 0.0864037498831749, 0.07828957587480545, 0.07828957587480545],[0.10555808246135712, 0.016684390604496002, 0.00797490868717432, 0.00797490868717432, 0.2707189917564392, 0.007680550217628479, 0.19621892273426056, 0.1777920126914978, 0.1777920126914978, 0.007680550217628479],[0.0031986006069928408, 0.0031986006069928408, 0.0031986006069928408, 0.10858078300952911, 0.003080538008362055, 0.07870006561279297, 0.07130934298038483, 0.07130934298038483, 0.003080538008362055, 0.0030901581048965454, 0.06162620335817337, 0.06162620335817337, 0.5248024463653564, 0.0031986006069928408],[0.05280133709311485, 0.011050164699554443, 0.14222274720668793, 0.004034991841763258, 0.10308399051427841, 0.09340337663888931, 0.09340337663888931, 0.05280133709311485, 0.011050164699554443, 0.14222274720668793, 0.004034991841763258, 0.10308399051427841, 0.09340337663888931, 0.09340337663888931],[0.229322150349617, 0.013033108785748482, 0.005399257410317659, 0.013033108785748482, 0.23442675173282623, 0.0024890017230063677, 0.002296603284776211, 0.229322150349617, 0.013033108785748482, 0.005399257410317659, 0.013033108785748482, 0.23442675173282623, 0.0024890017230063677, 0.002296603284776211],[0.09056593477725983, 0.06760217249393463, 0.12914247810840607, 0.09878279268741608, 0.09878279268741608, 0.001282995566725731, 0.013840809464454651, 0.09056593477725983, 0.06760217249393463, 0.12914247810840607, 0.09878279268741608, 0.09878279268741608, 0.001282995566725731, 0.013840809464454651],[0.029312612488865852, 0.05132792145013809, 0.008352885022759438, 0.008352885022759438, 0.2835499048233032, 0.008044574409723282, 0.20551885664463043, 0.18621857464313507, 0.18621857464313507, 0.008044574409723282],[0.009180673398077488, 0.11605122685432434, 0.10513299703598022, 0.022393343970179558, 0.07620110362768173, 0.10199559479951859, 0.0690450593829155, 0.009180673398077488, 0.11605122685432434, 0.10513299703598022, 0.022393343970179558, 0.07620110362768173, 0.10199559479951859, 0.0690450593829155],[0.1300542801618576, 0.07329092919826508, 0.08061596751213074, 0.0584309920668602, 0.07821021974086761, 0.07821021974086761, 0.1300542801618576, 0.07329092919826508, 0.08061596751213074, 0.0584309920668602, 0.07821021974086761, 0.07821021974086761],[0.0036419061943888664, 0.0028631428722292185, 0.08836191147565842, 0.0028631428722292185, 0.09719322621822357, 0.12033549696207047, 0.002757462440058589, 0.07044629007577896, 0.06383068114519119, 0.06383068114519119, 0.002757462440058589, 0.0027660734485834837, 0.4697630703449249, 0.0028631428722292185],[0.0031048995442688465, 0.04146452620625496, 0.09582297503948212, 0.0031048995442688465, 0.1053999811410904, 0.00041408135439269245, 0.07639460265636444, 0.00041408135439269245, 0.06922038644552231, 0.00041408135439269245, 0.06922038644552231, 0.002990295644849539, 0.00041408135439269245, 0.00041408135439269245, 0.015568112954497337, 0.5094286799430847, 0.0031048995442688465],[0.016537219285964966, 0.006508525460958481, 0.04277093708515167, 0.03402597829699516, 0.00021478622511494905, 0.07077047973871231, 0.3126348555088043, 0.016537219285964966, 0.006508525460958481, 0.04277093708515167, 0.03402597829699516, 0.00021478622511494905, 0.07077047973871231, 0.3126348555088043],[0.0008803357486613095, 0.1510593146085739, 0.014138386584818363, 0.011907455511391163, 0.02636086754500866, 0.12745395302772522, 0.10900908708572388, 0.052121397107839584, 0.0008803357486613095, 0.1510593146085739, 0.014138386584818363, 0.011907455511391163, 0.02636086754500866, 0.12745395302772522, 0.10900908708572388, 0.052121397107839584],[0.0033124363981187344, 0.0015832606004551053, 0.022213194519281387, 0.15414942800998688, 0.11172852665185928, 0.10123610496520996, 0.10123610496520996, 0.0033124363981187344, 0.0015832606004551053, 0.022213194519281387, 0.15414942800998688, 0.11172852665185928, 0.10123610496520996, 0.10123610496520996],[0.1313631534576416, 0.11883877217769623, 0.1180538609623909, 0.062417224049568176, 0.01156209222972393, 0.02413337677717209, 0.009498132392764091, 0.1313631534576416, 0.11883877217769623, 0.1180538609623909, 0.062417224049568176, 0.01156209222972393, 0.02413337677717209, 0.009498132392764091],[0.004816657863557339, 0.25052928924560547, 0.007710478734225035, 0.0013725486351177096, 0.04659299924969673, 0.03377092257142067, 0.03059949353337288, 0.03059949353337288, 0.0013218870153650641, 0.22519750893115997, 0.0013725486351177096, 0.0004494175664149225, 0.01222623698413372, 0.03377092257142067, 0.04520256444811821, 0.04520256444811821, 0.0013218870153650641, 0.22519750893115997, 0.0013725486351177096],[0.0019353283569216728, 0.0019353283569216728, 0.016934871673583984, 0.0009457062697038054, 0.0019353283569216728, 0.0656973123550415, 0.0018638940528035164, 0.047617845237255096, 0.043146055191755295, 0.043146055191755295, 0.047617845237255096, 6.474125984823331e-05, 0.043146055191755295, 0.043146055191755295, 0.0018638940528035164, 0.3175341784954071, 0.0019353283569216728, 0.3175341784954071, 0.0019353283569216728, 6.474125984823331e-05],[0.01551055908203125, 0.0011065308935940266, 0.1113286018371582, 0.12245530635118484, 0.08875642716884613, 0.08042130619287491, 0.08042130619287491, 0.01551055908203125, 0.0011065308935940266, 0.1113286018371582, 0.12245530635118484, 0.08875642716884613, 0.08042130619287491, 0.08042130619287491],[0.008777450770139694, 0.003636256791651249, 0.016237853094935417, 0.16911177337169647, 0.2890704870223999, 0.008777450770139694, 0.003636256791651249, 0.016237853094935417, 0.16911177337169647, 0.2890704870223999],[0.002451804466545582, 0.04483654350042343, 0.07566724717617035, 0.002451804466545582, 0.08322978764772415, 0.10304728895425797, 0.0023613066878169775, 0.0603255033493042, 0.054660335183143616, 0.054660335183143616, 0.0023613066878169775, 0.012293463572859764, 0.04723797366023064, 0.04723797366023064, 0.4022737443447113, 0.002451804466545582],[0.0036371208261698484, 0.10725227743387222, 0.002862219698727131, 0.09716188162565231, 0.002756573259830475, 0.07042357325553894, 0.06381010264158249, 0.06381010264158249, 0.002756573259830475, 0.0027651814743876457, 0.05514528229832649, 0.05514528229832649, 0.46961158514022827, 0.002862219698727131],[0.014417193830013275, 0.0017626850167289376, 0.05439973622560501, 0.0017626850167289376, 0.05983670428395271, 0.043370041996240616, 0.00023507846344728023, 0.0005014459602534771, 0.039297159761190414, 0.00023507846344728023, 0.00045558897545561194, 0.039297159761190414, 0.0016976231709122658, 0.00023507846344728023, 0.00023507846344728023, 0.008838186040520668, 0.28920817375183105, 0.0017626850167289376, 0.0005771610303781927, 0.015701450407505035, 0.043370041996240616, 0.00023507846344728023, 0.039297159761190414, 0.00023507846344728023, 0.039297159761190414, 0.0016976231709122658, 0.00023507846344728023, 0.00023507846344728023, 0.008838186040520668, 0.28920817375183105, 0.0017626850167289376],[0.0017959346296265721, 0.012960204854607582, 0.023285122588276863, 0.36728811264038086, 0.08163221180438995, 7.819943130016327e-05, 0.012960204854607582, 0.0017959346296265721, 0.012960204854607582, 0.023285122588276863, 0.36728811264038086, 0.08163221180438995, 7.819943130016327e-05, 0.012960204854607582],[0.002534926403313875, 0.002534926403313875, 0.08605147153139114, 0.0024413603823632, 0.062370676547288895, 0.0834835022687912, 0.0834835022687912, 0.0024413603823632, 0.048839446157217026, 0.048839446157217026, 0.012710240669548512, 0.024071792140603065, 0.024071792140603065, 0.4159117341041565, 0.002534926403313875, 0.048839446157217026, 0.048839446157217026],[0.07521374523639679, 0.09015198796987534, 0.0024058676790446043, 0.08167040348052979, 0.0751386284828186, 0.002317065605893731, 0.059195250272750854, 0.05363622307777405, 0.05363622307777405, 0.002317065605893731, 0.012063134461641312, 0.04635292664170265, 0.04635292664170265, 0.39473676681518555, 0.0024058676790446043],[0.01124686747789383, 0.007623800076544285, 0.0987371876835823, 0.07184047996997833, 0.0023278079461306334, 0.07902055978775024, 0.002241886919364333, 0.05727462098002434, 0.05189596489071846, 0.05189596489071846, 0.002241886919364333, 0.0448489747941494, 0.0448489747941494, 0.38192930817604065, 0.0023278079461306334, 0.0448489747941494, 0.0448489747941494],[0.001625400735065341, 0.0005667140940204263, 0.0609065517783165, 0.001625400735065341, 0.05517640709877014, 0.0015654060989618301, 0.03999222442507744, 0.03623655438423157, 0.03623655438423157, 0.0015654060989618301, 0.26668357849121094, 0.001625400735065341, 0.0005322096403688192, 0.014478565193712711, 0.03999222442507744, 0.05352981761097908, 0.05352981761097908, 0.0015654060989618301, 0.031315967440605164, 0.031315967440605164, 0.26668357849121094, 0.001625400735065341],[0.002711043693125248, 0.0044956817291677, 0.08366784453392029, 0.002711043693125248, 0.09203001111745834, 0.6162486672401428, 0.002610977506265044, 0.06670396775007248, 0.06043979898095131, 0.06043979898095131, 0.002610977506265044, 0.0026191312354058027],[0.0053744022734463215, 0.20138807594776154, 0.2070789635181427, 0.0053744022734463215, 0.18244127929210663, 0.00517602963373065, 0.13223464787006378, 0.11981650441884995, 0.11981650441884995, 0.00517602963373065],[0.0008388468995690346, 0.0016731121577322483, 0.003558073192834854, 0.05163535103201866, 0.0016731121577322483, 0.056796032935380936, 0.04116613790392876, 0.0373002290725708, 0.0373002290725708, 0.0016113563906401396, 0.00838906317949295, 0.2745117247104645, 0.0016731121577322483, 0.0005478318780660629, 0.01490356307476759, 0.04116613790392876, 0.0373002290725708, 0.0373002290725708, 0.0016113563906401396, 0.00838906317949295, 0.03223520517349243, 0.03223520517349243, 0.2745117247104645, 0.0016731121577322483],[0.16515092551708221, 0.0037774660158902407, 0.009118312038481236, 0.30029618740081787, 0.007979637011885643, 0.16515092551708221, 0.0037774660158902407, 0.009118312038481236, 0.30029618740081787, 0.007979637011885643],[0.01569337397813797, 0.007707199547439814, 0.18395771086215973, 0.01569337397813797, 0.20234329998493195, 0.005740668158978224, 0.14665977656841278, 0.13288696110248566, 0.13288696110248566, 0.005740668158978224, 0.029887137934565544, 0.11484213918447495]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>