
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["apr apr","apr apr","apr apr","oct oct","oct oct","oct oct","oct oct","oct oct","jun jun","jun jun","walgreen qtr shr cts cts walgreen qtr shr cts cts","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","roto rooter inc roto qtr net shr cts cts net revs mln","napa valley bancorp <unk> qtr net shr cts cts net","bancorp <unk> qtr net shr cts cts net mln mln avg shrs mln mln","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","<unk> corp <unk> qtr sept net shr cts cts net revs mln mln avg shrs mln mln","<unk> corp <unk> qtr mar shr cts cts net revs mln mln","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","<unk> corp ohio <unk> qtr net shr cts cts net","tandy corp <unk> qtr sept net shr cts cts net mln mln revs mln mln avg shrs mln mln","ncr corp ncr qtr net shr cts cts net mln mln revs billion mln avg shrs mln mln","sumita welcomes west german joint confirmation louvre accord sumita welcomes west german joint confirmation louvre accord","<unk> bancorp inc <unk> qtr net shr dlrs dlrs net avg shrs","balladur urges respect pledges monetary policy louvre accord balladur urges respect pledges monetary policy louvre accord","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","gte corp gte qtr mar shr cts cts net mln mln revs billion billion avg shrs mln mln","<unk> microsystems inc <unk> qtr loss shr loss cts loss cts net loss loss revs avg shrs","raytheon <unk> qtr net shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","ford raises qtly payout cts shr cts ford raises qtly payout cts shr cts","trump interstate properties talks acquire alexanders trump interstate properties talks acquire alexanders","fed approves citicorp purchase assets sears calif thrift fed approves citicorp purchase assets sears calif thrift","simon schuster acquire woodhead faulkner undisclosed terms simon schuster acquire woodhead faulkner undisclosed terms","circle express terminates planned acquisition overland express circle express terminates planned acquisition overland express","<unk> <unk> bank trust <unk> qtr net shr cts cts shr diluted cts cts net avg shrs avg shrs diluted","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","roto rooter inc roto qtr net shr cts cts net revs mln mln nine mths shr cts cts net revs mln mln","<unk> savings bank <unk> qtr net shr cts cts net avg shrs","data <unk> inc <unk> qtr feb net shr cts cts net sales avg shrs","<unk> systems inc <unk> qtr sept net shr cts cts net sales","<unk> inc <unk> qtr sept net shr cts cts net sales mln mln avg shrs mln mln","usair buy pct mln piedmont shares tendered usair buy pct mln piedmont shares tendered","national city bancorp <unk> qtr net shr cts cts net","morgan inc qtr shr dlrs dlrs morgan inc qtr shr dlrs dlrs","aspen <unk> inc <unk> qtr net sept shr seven cts five cts net revs","ohio <unk> <unk> qtr net shr cts cts net mln mln revs mln mln avg shrs mln mln mths shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln"];
var att_heads = [4,4,4,0,0,0,0,0,1,1,4,4,4,4,4,4,4,4,4,2,4,4,4,4,4,4,0,4,2,4,4,4,4,2,2,2,2,2,4,4,4,4,4,4,4,4,0,4,0,4];
var trigram_weights = [[0.3616583049297333, 0.3616583049297333],[0.3616583049297333, 0.3616583049297333],[0.3616583049297333, 0.3616583049297333],[0.23278149962425232, 0.23278149962425232],[0.23278149962425232, 0.23278149962425232],[0.23278149962425232, 0.23278149962425232],[0.23278149962425232, 0.23278149962425232],[0.23278149962425232, 0.23278149962425232],[0.34123703837394714, 0.34123703837394714],[0.34123703837394714, 0.34123703837394714],[0.08043978363275528, 0.32610800862312317, 0.05281979218125343, 0.02001188136637211, 0.02001188136637211, 0.08043978363275528, 0.32610800862312317, 0.05281979218125343, 0.02001188136637211, 0.02001188136637211],[0.005934207234531641, 0.00732708303257823, 0.3786894679069519, 0.06133642420172691, 0.023238586261868477, 0.023238586261868477, 0.005934207234531641, 0.00732708303257823, 0.3786894679069519, 0.06133642420172691, 0.023238586261868477, 0.023238586261868477],[0.02708684280514717, 0.13979467749595642, 0.259170800447464, 0.041977956891059875, 0.015904225409030914, 0.015904225409030914, 0.02708684280514717, 0.13979467749595642, 0.259170800447464, 0.041977956891059875, 0.015904225409030914, 0.015904225409030914],[0.025268150493502617, 0.14033229649066925, 0.26016750931739807, 0.04213939607143402, 0.01596538908779621, 0.01596538908779621, 0.025268150493502617, 0.14033229649066925, 0.26016750931739807, 0.04213939607143402, 0.01596538908779621, 0.01596538908779621],[0.015134311281144619, 0.14332790672779083, 0.2657211720943451, 0.04303892329335213, 0.01630619540810585, 0.01630619540810585, 0.015134311281144619, 0.14332790672779083, 0.2657211720943451, 0.04303892329335213, 0.01630619540810585, 0.01630619540810585],[2.305823545611929e-05, 6.621723514399491e-06, 0.0027715086471289396, 2.305823545611929e-05, 0.14324131608009338, 0.17024047672748566, 0.023200830444693565, 0.008790119551122189, 0.008790119551122189, 0.17024047672748566, 0.005332991015166044, 0.46716123819351196],[0.0004905250971205533, 1.8407370589557104e-05, 0.02601337432861328, 0.00033034259104169905, 0.2654948830604553, 0.31553730368614197, 0.04300227016210556, 0.016292309388518333, 0.016292309388518333, 0.31553730368614197],[0.005805436056107283, 7.372295658569783e-05, 0.059250809252262115, 0.0704188346862793, 0.009596867486834526, 0.003635974135249853, 0.003635974135249853, 0.0704188346862793, 0.19323810935020447, 0.19323810935020447, 0.0041374280117452145, 7.372295658569783e-05, 0.19323810935020447, 0.19323810935020447],[0.0005534164956770837, 0.008337262086570263, 0.1985732913017273, 0.23600183427333832, 0.03216296434402466, 0.012185610830783844, 0.012185610830783844, 0.0005534164956770837, 0.008337262086570263, 0.1985732913017273, 0.23600183427333832, 0.03216296434402466, 0.012185610830783844, 0.012185610830783844],[0.015418028458952904, 0.0016120520886033773, 0.0027325639966875315, 0.0005966937751509249, 4.8179517762036994e-05, 0.00763295404613018, 0.47195953130722046, 0.015418028458952904, 0.0016120520886033773, 0.0027325639966875315, 0.0005966937751509249, 4.8179517762036994e-05, 0.00763295404613018, 0.47195953130722046],[7.166332216002047e-05, 0.03106655180454254, 7.166332216002047e-05, 0.05759548768401146, 0.00022650917526334524, 0.06845150142908096, 0.009328755550086498, 0.003534394083544612, 0.003534394083544612, 0.06845150142908096, 0.0021443271543830633, 0.18783952295780182, 0.18783952295780182, 0.004021838773041964, 7.166332216002047e-05, 0.18783952295780182, 0.18783952295780182],[0.0001299301948165521, 0.05632564797997475, 0.0001299301948165521, 0.10442431271076202, 5.557901204156224e-06, 0.016913631930947304, 0.006408082786947489, 0.006408082786947489, 0.12410696595907211, 0.0038878023624420166, 0.3405650854110718, 0.3405650854110718],[7.197943341452628e-05, 0.03120359033346176, 7.197943341452628e-05, 0.05784954875707626, 0.0687534511089325, 0.009369905106723309, 0.0035499846562743187, 0.0035499846562743187, 0.0687534511089325, 0.18866810202598572, 0.18866810202598572, 0.0021537858992815018, 0.18866810202598572, 0.18866810202598572],[0.0002957251272164285, 0.12819893658161163, 4.089020148967393e-05, 0.0002957251272164285, 0.23767298460006714, 0.28247132897377014, 0.038495950400829315, 0.014584994874894619, 0.014584994874894619, 0.28247132897377014],[0.0007370287203229964, 0.022567234933376312, 5.20573667017743e-05, 0.04183827340602875, 0.000164539844263345, 0.04972425475716591, 0.0067765554413199425, 0.0025674395728856325, 0.0025674395728856325, 0.04972425475716591, 0.13644960522651672, 0.13644960522651672, 0.0015576730947941542, 0.13644960522651672, 0.13644960522651672, 0.002921527251601219, 5.20573667017743e-05, 0.13644960522651672, 0.13644960522651672],[0.004280535504221916, 0.023772908374667168, 0.004280535504221916, 0.04407351836562157, 0.05238081514835358, 0.007138598244637251, 0.0027046073228120804, 0.0027046073228120804, 0.05238081514835358, 0.14373953640460968, 0.14373953640460968, 0.0016408930532634258, 0.08281204104423523, 0.14373953640460968, 0.0030776122584939003, 5.4838576033944264e-05, 0.14373953640460968, 0.14373953640460968],[3.842756512995038e-08, 2.974702795199846e-07, 0.251655250787735, 0.24542978405952454, 0.0015833862125873566, 0.000283976347418502, 0.0009193448349833488, 6.348344322759658e-05, 3.842756512995038e-08, 2.974702795199846e-07, 0.251655250787735, 0.24542978405952454, 0.0015833862125873566, 0.000283976347418502, 0.0009193448349833488, 6.348344322759658e-05],[8.000295929377899e-05, 0.006299965083599091, 0.0012440719874575734, 8.000295929377899e-05, 0.06429801136255264, 0.07641737908124924, 0.010414366610348225, 0.3800494372844696, 0.3800494372844696, 0.07641737908124924, 0.004489869810640812, 8.000295929377899e-05],[0.00012725287524517626, 0.08685680478811264, 0.20109589397907257, 0.003984557464718819, 0.10230495035648346, 0.10422081500291824, 1.2050150871800724e-05, 0.0012490976369008422, 0.00012725287524517626, 0.08685680478811264, 0.20109589397907257, 0.003984557464718819, 0.10230495035648346, 0.10422081500291824, 1.2050150871800724e-05, 0.0012490976369008422],[0.005445070099085569, 0.03808565065264702, 0.006168743129819632, 0.22511473298072815, 0.22511473298072815, 0.005445070099085569, 0.03808565065264702, 0.006168743129819632, 0.22511473298072815, 0.22511473298072815],[0.005191075149923563, 0.026791037991642952, 0.005191075149923563, 0.04966894909739494, 2.6435902782395715e-06, 0.008044891990721226, 0.003047975478693843, 0.003047975478693843, 0.059030912816524506, 0.16198822855949402, 0.16198822855949402, 0.0018492154777050018, 0.09332559257745743, 0.09332559257745743, 0.0034683358389884233, 6.180070340633392e-05, 0.16198822855949402, 0.16198822855949402],[0.00036571917007677257, 0.05631669610738754, 0.005687051918357611, 0.00036571917007677257, 0.293926864862442, 0.035698920488357544, 0.047607406973838806, 0.035698920488357544, 0.018037060275673866, 0.035698920488357544, 0.018037060275673866, 0.3493283689022064, 0.035698920488357544, 0.035698920488357544, 0.010943134315311909, 0.020524635910987854, 0.00036571917007677257],[0.0044104065746068954, 3.838353950413875e-05, 0.030848676338791847, 0.03666326403617859, 0.00499656843021512, 0.18233880400657654, 0.18233880400657654, 0.03666326403617859, 0.10060859471559525, 0.10060859471559525, 0.0011485209688544273, 0.05796319991350174, 0.05796319991350174, 0.002154134213924408, 3.838353950413875e-05, 0.10060859471559525, 0.10060859471559525],[0.0013718573609367013, 0.4770315885543823, 0.0008024677517823875, 0.012436731718480587, 0.00210075406357646, 0.004155861213803291, 0.00210075406357646, 0.0013718573609367013, 0.4770315885543823, 0.0008024677517823875, 0.012436731718480587, 0.00210075406357646, 0.004155861213803291, 0.00210075406357646],[0.006541795562952757, 0.02157127857208252, 0.13104988634586334, 0.008194556459784508, 0.3320966362953186, 3.992401616415009e-05, 0.006541795562952757, 0.02157127857208252, 0.13104988634586334, 0.008194556459784508, 0.3320966362953186, 3.992401616415009e-05],[0.25340116024017334, 0.006073273252695799, 9.937303548213094e-05, 0.20607201755046844, 0.025979967787861824, 0.005105196498334408, 5.4743093642173335e-05, 0.002951890230178833, 0.25340116024017334, 0.006073273252695799, 9.937303548213094e-05, 0.20607201755046844, 0.025979967787861824, 0.005105196498334408, 5.4743093642173335e-05, 0.002951890230178833],[9.80746335699223e-05, 6.744699203409255e-05, 0.12651699781417847, 1.9968481865362264e-05, 8.876497304299846e-06, 0.000157456990564242, 0.37274572253227234, 9.80746335699223e-05, 6.744699203409255e-05, 0.12651699781417847, 1.9968481865362264e-05, 8.876497304299846e-06, 0.000157456990564242, 0.37274572253227234],[0.016814379021525383, 0.062293607741594315, 0.0007914895541034639, 0.09215692430734634, 0.26541802287101746, 0.0002319857885595411, 0.062293607741594315, 0.016814379021525383, 0.062293607741594315, 0.0007914895541034639, 0.09215692430734634, 0.26541802287101746, 0.0002319857885595411, 0.062293607741594315],[0.00021991007088217884, 0.00021991007088217884, 0.06289210915565491, 0.0008432603790424764, 0.00021991007088217884, 0.17674075067043304, 0.21005414426326752, 0.028626741841435432, 0.01084583904594183, 0.01084583904594183, 0.028626741841435432, 0.10627806186676025, 0.01084583904594183, 0.01084583904594183, 0.21005414426326752, 0.012341639026999474, 0.00021991007088217884, 0.012341639026999474, 0.00021991007088217884, 0.10627806186676025],[6.765309990441892e-06, 0.03514520078897476, 0.06515704095363617, 1.2163677638454828e-05, 0.010553503409028053, 0.3851269483566284, 0.003998416010290384, 6.765309990441892e-06, 0.03514520078897476, 0.06515704095363617, 1.2163677638454828e-05, 0.010553503409028053, 0.3851269483566284, 0.003998416010290384],[8.801789590506814e-06, 2.527644483052427e-06, 0.0010579403024166822, 8.801789590506814e-06, 0.05467807501554489, 0.06498419493436813, 0.008856221102178097, 0.0033553645480424166, 0.0033553645480424166, 0.06498419493436813, 0.0020357093308120966, 0.17832478880882263, 0.17832478880882263, 0.0006507659563794732, 6.80333178024739e-05, 0.008856221102178097, 0.0033553645480424166, 0.0033553645480424166, 0.06498419493436813, 0.0020357093308120966, 0.17832478880882263, 0.17832478880882263],[0.0002994573151227087, 0.015089509077370167, 0.08564183115959167, 0.0002994573151227087, 0.2406725138425827, 0.2860362231731415, 0.038981784135103226, 0.014769063331186771, 0.014769063331186771, 0.2860362231731415, 0.01680593378841877, 0.0002994573151227087],[0.0009058575960807502, 0.00028760291752405465, 0.004472319036722183, 0.00028760291752405465, 0.2311452031135559, 0.0006826752796769142, 0.2747131288051605, 0.03743864223361015, 0.014184411615133286, 0.014184411615133286, 0.2747131288051605, 0.13055674731731415, 0.0161406509578228, 0.00028760291752405465],[0.0002922902931459248, 0.0007962816162034869, 0.004545208998024464, 0.0002922902931459248, 0.23491241037845612, 0.0009238538914360106, 0.27919042110443115, 0.038048818707466125, 0.014415590092539787, 0.014415590092539787, 0.27919042110443115, 0.13268455862998962],[7.163729605963454e-05, 0.0011139832204207778, 7.163729605963454e-05, 0.057574573904275894, 0.0002264269278384745, 0.06842664629220963, 0.009325367398560047, 0.003533110488206148, 0.003533110488206148, 0.06842664629220963, 0.03251960128545761, 0.18777130544185638, 0.18777130544185638, 0.004020377993583679, 7.163729605963454e-05, 0.18777130544185638, 0.18777130544185638],[0.016880106180906296, 0.029561078175902367, 0.03277641162276268, 0.35174238681793213, 3.265175109845586e-05, 0.05474730208516121, 0.014260055497288704, 0.016880106180906296, 0.029561078175902367, 0.03277641162276268, 0.35174238681793213, 3.265175109845586e-05, 0.05474730208516121, 0.014260055497288704],[0.23678764700889587, 0.7221774458885193, 3.521471080603078e-05, 0.000207435674383305, 1.5178062312770635e-05, 0.020034832879900932, 3.7343349390539515e-07, 4.236094537191093e-05, 4.236094537191093e-05, 0.020034832879900932],[0.00019256022642366588, 0.0007436908199451864, 0.03843655437231064, 0.00622557895258069, 0.227188840508461, 0.227188840508461, 0.00019256022642366588, 0.0007436908199451864, 0.03843655437231064, 0.00622557895258069, 0.227188840508461, 0.227188840508461],[0.00010229198232991621, 1.4026912140252534e-05, 5.758928182331147e-06, 1.4026912140252534e-05, 1.026348627419793e-06, 0.0013547661947086453, 1.4798552911088336e-05, 2.525177400514167e-08, 0.543362021446228, 2.8644699341384694e-06, 0.4537704288959503, 2.8644699341384694e-06, 0.0013547661947086453, 3.685799754293839e-07],[3.220249936930486e-06, 2.3289425371331163e-05, 2.3289425371331163e-05, 0.018717605620622635, 0.022245638072490692, 0.003031695494428277, 0.001148621435277164, 0.001148621435277164, 0.022245638072490692, 0.06104482337832451, 0.06104482337832451, 0.000696871429681778, 0.06104482337832451, 0.06104482337832451, 0.0013070327695459127, 2.3289425371331163e-05, 0.06104482337832451, 0.06104482337832451, 2.3289425371331163e-05, 0.003031695494428277, 0.11063507199287415, 0.11063507199287415, 0.022245638072490692, 0.06104482337832451, 0.06104482337832451, 0.000696871429681778, 0.03516949340701103, 0.03516949340701103, 0.0013070327695459127, 2.3289425371331163e-05, 0.06104482337832451, 0.06104482337832451]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>