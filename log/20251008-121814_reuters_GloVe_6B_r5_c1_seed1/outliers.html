
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["apr apr","apr apr","apr apr","oct oct","oct oct","oct oct","oct oct","oct oct","jun jun","jun jun","walgreen qtr shr cts cts walgreen qtr shr cts cts","ford raises qtly payout cts shr cts ford raises qtly payout cts shr cts","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","basin pipeline texas okla border washed floods bpd crude affected basin pipeline texas okla border washed floods bpd crude affected","gte corp qtr shr cts cts gte corp qtr shr cts cts","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","sumita welcomes west german joint confirmation louvre accord sumita welcomes west german joint confirmation louvre accord","napa valley bancorp <unk> qtr net shr cts cts net","balladur urges respect pledges monetary policy louvre accord balladur urges respect pledges monetary policy louvre accord","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","stoltenberg rule central bank intervention stabilize currencies stoltenberg rule central bank intervention stabilize currencies","shell canada raises crude oil posting canadian cts bbl shell canada raises crude oil posting canadian cts bbl","<unk> savings bank <unk> qtr net shr cts cts net avg shrs","imperial oil raises crude oil postings canadian cts bbl light sweet imperial oil raises crude oil postings canadian cts bbl light sweet","marathon raised crude posted prices cts barrel effective october marathon raised crude posted prices cts barrel effective october","permian raises crude oil postings cts bbl wti dlrs permian raises crude oil postings cts bbl wti dlrs","<unk> <unk> bank trust <unk> qtr net shr cts cts shr diluted cts cts net avg shrs avg shrs diluted","<unk> valley <unk> qtr net qtr ended april shr seven cts cts net revs","marathon raises crude oil postings cts bbl wti dlrs marathon raises crude oil postings cts bbl wti dlrs","<unk> <unk> <unk> qtr net shr cts cts net sales mln mln avg shrs","bancorp usbc qtr net shr cts cts net mln mln avg shrs mln mln","quaker oats oat qtr sept net shr cts cts net mln mln sales billion mln avg shrs","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","stoltenberg declines comment possible changed targets currencies stoltenberg declines comment possible changed targets currencies","john <unk> qtr net shr cts cts net mln revs mln mln","stoltenberg says assumes monetary cooperation continue stoltenberg says assumes monetary cooperation continue","treasury baker met west germany stoltenberg today agreed support louvre pact treasury baker met west germany stoltenberg today agreed support louvre pact","fed johnson says louvre accord alive cites german differences fed johnson says louvre accord alive cites german differences","miyazawa says baker remarks aimed reaffirming louvre agreement miyazawa says baker remarks aimed reaffirming louvre agreement","neworld bank savings <unk> qtr net oper shr cts cts oper net note net excludes dlr tax credit","miyazawa says still strongly supports louvre accord miyazawa says still strongly supports louvre accord","<unk> corp ohio <unk> qtr net shr cts cts net","wells fargo wfc raises quarterly div qtly div cts cts pay jan record dec","stoltenberg says meeting baker underscored monetary cooperation stoltenberg says meeting baker underscored monetary cooperation","arco raises crude oil prices cts barrel today wti arco raises crude oil prices cts barrel today wti","ohio edison <unk> qtr net shr cts cts net mln mln revs mln mln avg shrs mln mln mths shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","stop shop cos split hikes dividend stop shop cos split hikes dividend","<unk> participating mortgage trust <unk> div qtly div cts cts prior payable may record april"];
var att_heads = [1,1,1,1,1,1,1,1,2,2,1,1,4,4,1,3,4,4,3,1,3,0,3,3,1,3,3,1,1,3,1,1,1,1,1,3,1,2,3,2,2,1,2,4,3,2,3,1,3,3];
var trigram_weights = [[0.49851667881011963, 0.49851667881011963],[0.49851667881011963, 0.49851667881011963],[0.49851667881011963, 0.49851667881011963],[0.4987947940826416, 0.4987947940826416],[0.4987947940826416, 0.4987947940826416],[0.4987947940826416, 0.4987947940826416],[0.4987947940826416, 0.4987947940826416],[0.4987947940826416, 0.4987947940826416],[0.44902247190475464, 0.44902247190475464],[0.44902247190475464, 0.44902247190475464],[0.00024702519294805825, 0.4140113294124603, 0.08473336696624756, 0.0004800345632247627, 0.0004800345632247627, 0.00024702519294805825, 0.4140113294124603, 0.08473336696624756, 0.0004800345632247627, 0.0004800345632247627],[0.0037148534320294857, 0.27337542176246643, 3.374460357008502e-05, 0.13296456634998322, 0.0005036630318500102, 0.08890413492918015, 0.0005036630318500102, 0.0037148534320294857, 0.27337542176246643, 3.374460357008502e-05, 0.13296456634998322, 0.0005036630318500102, 0.08890413492918015, 0.0005036630318500102],[0.0068217176012694836, 0.48441505432128906, 0.0008602148154750466, 0.0001204639338538982, 0.003879305673763156, 0.003879305673763156, 0.0068217176012694836, 0.48441505432128906, 0.0008602148154750466, 0.0001204639338538982, 0.003879305673763156, 0.003879305673763156],[0.0008470293250866234, 0.4902835786342621, 0.0008706360240466893, 0.00012192330905236304, 0.003926302306354046, 0.003926302306354046, 0.0008470293250866234, 0.4902835786342621, 0.0008706360240466893, 0.00012192330905236304, 0.003926302306354046, 0.003926302306354046],[2.3930041948005965e-07, 2.5968074623961e-06, 0.32469746470451355, 0.10809275507926941, 0.06645400077104568, 0.0003764776047319174, 0.0003764776047319174, 2.3930041948005965e-07, 2.5968074623961e-06, 0.32469746470451355, 0.10809275507926941, 0.06645400077104568, 0.0003764776047319174, 0.0003764776047319174],[0.1484069973230362, 0.0019927602261304855, 0.05275993421673775, 3.740946397101652e-07, 0.13539887964725494, 0.0020771920680999756, 0.004041905049234629, 7.86267191870138e-05, 0.0019371201051399112, 0.15330621600151062, 0.1484069973230362, 0.0019927602261304855, 0.05275993421673775, 3.740946397101652e-07, 0.13539887964725494, 0.0020771920680999756, 0.004041905049234629, 7.86267191870138e-05, 0.0019371201051399112, 0.15330621600151062],[0.002932958072051406, 0.4882347285747528, 0.0008669976959936321, 0.00012141380284447223, 0.00390989426523447, 0.00390989426523447, 0.002932958072051406, 0.4882347285747528, 0.0008669976959936321, 0.00012141380284447223, 0.00390989426523447, 0.00390989426523447],[0.001282513258047402, 0.49546220898628235, 0.00031954326550476253, 4.474863817449659e-05, 0.0014410425210371614, 0.0014410425210371614, 0.001282513258047402, 0.49546220898628235, 0.00031954326550476253, 4.474863817449659e-05, 0.0014410425210371614, 0.0014410425210371614],[8.828440201114063e-08, 0.0013854190474376082, 0.1983707696199417, 0.04013080894947052, 0.14301162958145142, 0.020467383787035942, 7.202973392850254e-06, 0.0966266617178917, 8.828440201114063e-08, 0.0013854190474376082, 0.1983707696199417, 0.04013080894947052, 0.14301162958145142, 0.020467383787035942, 7.202973392850254e-06, 0.0966266617178917],[4.69768165203277e-05, 7.503495567107166e-07, 0.002460881369188428, 4.1368788515683264e-05, 0.5325350165367126, 0.17728251218795776, 0.10899094492197037, 0.0006174594745971262, 0.0006174594745971262, 0.17728251218795776],[2.723705847529345e-06, 0.0017548032337799668, 0.2017722725868225, 0.008256579749286175, 0.01498649176210165, 0.2288765162229538, 3.301570131952758e-06, 0.044289980083703995, 2.723705847529345e-06, 0.0017548032337799668, 0.2017722725868225, 0.008256579749286175, 0.01498649176210165, 0.2288765162229538, 3.301570131952758e-06, 0.044289980083703995],[0.06751987338066101, 0.0007415434229187667, 2.9008626370341517e-05, 0.08591584861278534, 0.07218770682811737, 0.12779401242733002, 0.1458120048046112, 0.06751987338066101, 0.0007415434229187667, 2.9008626370341517e-05, 0.08591584861278534, 0.07218770682811737, 0.12779401242733002, 0.1458120048046112],[0.0004821188631467521, 0.254038006067276, 0.1364210993051529, 0.00014211625966709107, 0.10880618542432785, 0.00010611963080009446, 4.361456376500428e-06, 0.0004821188631467521, 0.254038006067276, 0.1364210993051529, 0.00014211625966709107, 0.10880618542432785, 0.00010611963080009446, 4.361456376500428e-06],[0.0012211488792672753, 0.17176955938339233, 0.08052807301282883, 0.008660076186060905, 0.011692045256495476, 0.09634870290756226, 0.12977777421474457, 2.408240334261791e-06, 1.8641830479282362e-07, 0.0012211488792672753, 0.17176955938339233, 0.08052807301282883, 0.008660076186060905, 0.011692045256495476, 0.09634870290756226, 0.12977777421474457, 2.408240334261791e-06, 1.8641830479282362e-07],[3.9293830923270434e-05, 0.02092883735895157, 0.014443852938711643, 3.9293830923270434e-05, 0.5058243870735168, 0.1683904528617859, 0.10352423042058945, 0.0005864892737008631, 0.0005864892737008631, 0.1683904528617859, 0.017167571932077408, 3.9293830923270434e-05],[0.13047364354133606, 0.0028112605214118958, 0.019362343475222588, 0.0020822472870349884, 0.0028112605214118958, 0.002153335604816675, 0.031204042956233025, 5.79042762183235e-07, 4.482283344486859e-08, 0.24960273504257202, 0.05942500755190849, 0.13047364354133606, 0.0028112605214118958, 0.019362343475222588, 0.0020822472870349884, 0.0028112605214118958, 0.002153335604816675, 0.031204042956233025, 5.79042762183235e-07, 4.482283344486859e-08, 0.24960273504257202, 0.05942500755190849],[0.02754715457558632, 0.07256324589252472, 0.0011273808777332306, 0.011398611590266228, 0.0012254082830622792, 3.13508280669339e-07, 0.0004972447641193867, 0.17352263629436493, 0.2121180295944214, 0.02754715457558632, 0.07256324589252472, 0.0011273808777332306, 0.011398611590266228, 0.0012254082830622792, 3.13508280669339e-07, 0.0004972447641193867, 0.17352263629436493, 0.2121180295944214],[0.0006207623519003391, 0.0890221819281578, 0.00632771011441946, 0.0035014022141695023, 9.769105417944957e-07, 0.00016401322500314564, 0.011668642051517963, 0.0026027532294392586, 0.38609156012535095, 0.0006207623519003391, 0.0890221819281578, 0.00632771011441946, 0.0035014022141695023, 9.769105417944957e-07, 0.00016401322500314564, 0.011668642051517963, 0.0026027532294392586, 0.38609156012535095],[3.503361949697137e-05, 3.503361949697137e-05, 0.012877860106527805, 0.00011038150114472955, 3.503361949697137e-05, 0.4509832561016083, 0.15013368427753448, 0.09230020642280579, 0.0005229024682193995, 0.0005229024682193995, 0.09230020642280579, 0.009105668403208256, 0.0005229024682193995, 0.0005229024682193995, 0.15013368427753448, 0.015306275337934494, 3.503361949697137e-05, 0.015306275337934494, 3.503361949697137e-05, 0.009105668403208256],[0.00011476744839455932, 0.021826528012752533, 0.00011476744839455932, 1.1981672969341162e-06, 9.754660277394578e-05, 1.1981672969341162e-06, 0.17586100101470947, 0.2450944483280182, 8.262671968850555e-08, 0.5567891001701355, 4.5211609744910675e-07, 4.5211609744910675e-07, 9.754660277394578e-05, 9.200090858030308e-07],[0.00540807144716382, 0.08816877752542496, 0.00626705028116703, 0.003467836184427142, 9.675454748503398e-07, 0.00016244093421846628, 0.011556781828403473, 0.0025778021663427353, 0.3823903203010559, 0.00540807144716382, 0.08816877752542496, 0.00626705028116703, 0.003467836184427142, 9.675454748503398e-07, 0.00016244093421846628, 0.011556781828403473, 0.0025778021663427353, 0.3823903203010559],[1.0341630513721611e-05, 1.0341630513721611e-05, 1.0341630513721611e-05, 0.13312646746635437, 0.04431820288300514, 0.02724624238908291, 0.0001543564285384491, 0.0001543564285384491, 0.04431820288300514, 0.015246490947902203, 0.3654380142688751, 0.3654380142688751, 0.004518283996731043, 1.0341630513721611e-05],[0.0003584488295018673, 1.9205568605684675e-05, 0.07756837457418442, 0.025822745636105537, 0.015875481069087982, 8.993837400339544e-05, 8.993837400339544e-05, 0.025822745636105537, 0.21292860805988312, 0.21292860805988312, 0.0026326540391892195, 6.025724815117428e-06, 0.21292860805988312, 0.21292860805988312],[1.238536697201198e-06, 0.001210294314660132, 4.496996552916244e-06, 0.08886723965406418, 0.02303391508758068, 0.029584171250462532, 0.018187956884503365, 0.00010303909220965579, 0.00010303909220965579, 0.029584171250462532, 0.24394449591636658, 0.24394449591636658, 0.010177642107009888, 0.06428622454404831, 0.24394449591636658, 0.0030161351896822453, 6.90345177645213e-06],[6.163500984257553e-06, 4.057577098137699e-05, 0.0750279501080513, 0.015355546958744526, 0.20478342473506927, 0.20478342473506927, 6.163500984257553e-06, 4.057577098137699e-05, 0.0750279501080513, 0.015355546958744526, 0.20478342473506927, 0.20478342473506927],[0.0003362978168297559, 0.00032080578966997564, 0.00030553099350072443, 0.21297205984592438, 0.21835434436798096, 0.06761402636766434, 3.0422954750974895e-06, 0.0003362978168297559, 0.00032080578966997564, 0.00030553099350072443, 0.21297205984592438, 0.21835434436798096, 0.06761402636766434, 3.0422954750974895e-06],[5.732560452997859e-07, 7.654027285752818e-06, 0.09852929413318634, 0.03280070051550865, 0.02016543596982956, 0.000114241978735663, 0.000114241978735663, 0.03280070051550865, 0.27046728134155273, 0.004057677928358316, 0.27046728134155273, 0.27046728134155273],[0.0008844631374813616, 0.41583675146102905, 0.004369433503597975, 0.01151035912334919, 0.017799563705921173, 0.04953370615839958, 0.0008844631374813616, 0.41583675146102905, 0.004369433503597975, 0.01151035912334919, 0.017799563705921173, 0.04953370615839958],[9.052072527993005e-06, 0.023939263075590134, 0.07855066657066345, 0.05452381819486618, 0.031700629740953445, 0.00024637419846840203, 0.1255226582288742, 0.0533452108502388, 0.11200015246868134, 1.979796707018977e-06, 0.020125821232795715, 9.052072527993005e-06, 0.023939263075590134, 0.07855066657066345, 0.05452381819486618, 0.031700629740953445, 0.00024637419846840203, 0.1255226582288742, 0.0533452108502388, 0.11200015246868134, 1.979796707018977e-06, 0.020125821232795715],[0.005194402299821377, 0.025743208825588226, 0.4515218734741211, 0.0005128163029439747, 0.006422102451324463, 0.004218148533254862, 0.0008376431651413441, 0.0032714104745537043, 0.002278384752571583, 0.005194402299821377, 0.025743208825588226, 0.4515218734741211, 0.0005128163029439747, 0.006422102451324463, 0.004218148533254862, 0.0008376431651413441, 0.0032714104745537043, 0.002278384752571583],[0.0005121959839016199, 0.40096017718315125, 0.018894687294960022, 0.056477371603250504, 0.0013024855870753527, 0.00024598141317255795, 0.0004553908365778625, 0.021088378503918648, 0.0005121959839016199, 0.40096017718315125, 0.018894687294960022, 0.056477371603250504, 0.0013024855870753527, 0.00024598141317255795, 0.0004553908365778625, 0.021088378503918648],[2.4620134354336187e-05, 0.009050010703504086, 0.013113274239003658, 2.4620134354336187e-05, 0.316931813955307, 0.10550754517316818, 1.8644171859705239e-06, 0.0648646429181099, 0.00036747357808053493, 0.00036747357808053493, 1.8644171859705239e-06, 0.10550754517316818, 0.0008597587002441287, 0.10550754517316818, 0.03178955987095833, 0.22146427631378174, 0.019917743280529976, 0.004698364529758692],[0.0005516445962712169, 0.43184158205986023, 0.03186924755573273, 0.019603939726948738, 0.009500944055616856, 0.0004904643865302205, 0.006142184603959322, 0.0005516445962712169, 0.43184158205986023, 0.03186924755573273, 0.019603939726948738, 0.009500944055616856, 0.0004904643865302205, 0.006142184603959322],[9.693337779026479e-05, 0.9815124273300171, 7.573429320473224e-05, 9.693337779026479e-05, 0.0017429506406188011, 0.00010985803237417713, 0.00024408168974332511, 0.007860174402594566, 0.007860174402594566, 0.00010985803237417713],[0.0011696135625243187, 1.0811993433890166e-06, 4.220449682179606e-06, 0.1024053618311882, 0.003214606549590826, 0.00014709866081830114, 0.0007773996912874281, 0.00014709866081830114, 3.06249717141327e-06, 3.06249717141327e-06, 0.1619318127632141, 0.003588133491575718, 0.7127617001533508, 0.013845746405422688],[0.0008064641151577234, 0.3791649341583252, 0.03770545497536659, 0.017867619171738625, 0.0377303771674633, 0.01049528457224369, 0.01622985675930977, 0.0008064641151577234, 0.3791649341583252, 0.03770545497536659, 0.017867619171738625, 0.0377303771674633, 0.01049528457224369, 0.01622985675930977],[7.622458610967442e-07, 0.03274485841393471, 0.0035214179661124945, 0.004754297435283661, 0.003827611682936549, 9.792546507014777e-07, 0.001553162350319326, 0.4535905718803406, 6.308164302026853e-06, 7.622458610967442e-07, 0.03274485841393471, 0.0035214179661124945, 0.004754297435283661, 0.003827611682936549, 9.792546507014777e-07, 0.001553162350319326, 0.4535905718803406, 6.308164302026853e-06],[1.0469611311236804e-07, 5.561559532907268e-07, 2.1042437765572686e-06, 0.027087656781077385, 0.009017562493681908, 0.005543877836316824, 3.140738408546895e-05, 3.140738408546895e-05, 0.009017562493681908, 0.0743568167090416, 0.0743568167090416, 0.0011155360843986273, 0.0743568167090416, 0.0743568167090416, 0.0009193493169732392, 2.1042437765572686e-06, 0.0743568167090416, 0.0743568167090416, 2.1042437765572686e-06, 0.005543877836316824, 0.07393382489681244, 0.07393382489681244, 0.009017562493681908, 0.0743568167090416, 0.0743568167090416, 0.0011155360843986273, 0.019595108926296234, 0.019595108926296234, 0.0009193493169732392, 2.1042437765572686e-06, 0.0743568167090416, 0.0743568167090416],[0.18795861303806305, 0.008228503167629242, 1.3332486048511782e-07, 0.30322203040122986, 0.00046176716568879783, 5.655560744344257e-05, 0.18795861303806305, 0.008228503167629242, 1.3332486048511782e-07, 0.30322203040122986, 0.00046176716568879783, 5.655560744344257e-05],[5.2368872275110334e-05, 0.2708311975002289, 3.1777155982126715e-06, 0.00576586090028286, 5.2368872275110334e-05, 9.909175787470303e-06, 5.2368872275110334e-05, 9.909175787470303e-06, 2.0630250219255686e-07, 2.0630250219255686e-07, 0.30466723442077637, 1.7538739029987482e-06, 0.2586488723754883, 0.048014577478170395, 0.11183763295412064]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>