
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["<unk> <unk>","dir","isbn","commodore cdtv","mhz iisi","unsubscribe","unsubscribe","autodesk bbs","polysyllabic polysyllabic","deleted","ken","lou gehrig <unk>","apr <unk> ists dchhabra stpl ists","david","exit","<unk> jeremy scott noonan","italy sweden canada sweden russia italy","<unk> phones","posted","compuserve com","test","test","dreams","please subscrive","please subscrive","dancing <unk>","bill mcd","objects <unk>","<unk> <unk> umcc umcc umich edu dlc umcc umcc umich edu david","pierre turgeon islanders","cheek","ignore","career mattingly","mjones donald aix kingston ibm com","<unk> order","mistake","ultimate <unk>","bullshit","dino ciccarelli ray sheppard","unfortunately","consistently","joke","jesus peace","alt religion spam","simple","secrecy lds ceremonies clh","religious fanaticism","ernest <unk> <unk> sage purdue edu <unk> sage <unk>","<unk> subscrive please subscribe","please subscribe"];
var att_heads = [0,1,1,1,1,1,1,1,0,2,1,1,1,1,2,1,1,1,2,1,0,0,1,2,2,1,1,1,1,1,1,2,1,1,1,0,0,1,1,0,0,1,1,1,0,1,0,1,2,2];
var trigram_weights = [[0.3333333432674408, 0.3333333432674408],[0.7627796530723572],[0.8315755128860474],[0.8900970816612244, 0.05495144799351692],[0.9358636140823364, 0.0320681557059288],[0.40870484709739685],[0.40870484709739685],[0.04715121164917946, 0.9056975841522217],[0.4861234128475189, 0.4861234128475189],[0.8649805188179016],[0.5454316735267639],[0.7420547604560852, 0.08598174899816513, 0.08598174899816513],[0.5366551876068115, 0.029755614697933197, 0.18703900277614594, 0.029755614697933197, 0.029755614697933197, 0.18703900277614594],[0.8765738010406494],[0.7588542699813843],[0.026091184467077255, 0.6567153930664062, 0.29110220074653625, 0.026091184467077255],[0.11798752099275589, 0.19427305459976196, 0.24485208094120026, 0.19427305459976196, 0.13062675297260284, 0.11798752099275589],[0.06495187431573868, 0.545336902141571],[0.9841431379318237],[0.42246001958847046, 0.5162500739097595],[0.13454152643680573],[0.35237324237823486],[0.5990561246871948],[0.8113372921943665, 0.02695181593298912],[0.8113372921943665, 0.02695181593298912],[0.767856776714325, 0.11607158929109573],[0.38512885570526123, 0.5900954604148865],[0.8505916595458984, 0.07470422238111496],[0.013646758161485195, 0.013646758161485195, 0.013646758161485195, 0.013646758161485195, 0.13936635851860046, 0.13062770664691925, 0.17064577341079712, 0.013646758161485195, 0.013646758161485195, 0.13936635851860046, 0.13062770664691925, 0.19383876025676727],[0.6723229289054871, 0.046289920806884766, 0.2350972443819046],[0.7228808999061584],[0.9826813340187073],[0.8348903656005859, 0.08255476504564285],[0.016216427087783813, 0.2617863714694977, 0.17737099528312683, 0.2067250907421112, 0.20130875706672668, 0.13659240305423737],[0.27673327922821045, 0.4465334117412567],[0.7491536736488342],[0.9626253247261047, 0.018687337636947632],[0.7904970645904541],[0.2931199371814728, 0.018732750788331032, 0.27709507942199707, 0.3923195004463196],[0.8623055219650269],[0.8406758308410645],[0.3658340871334076],[0.6885305047035217, 0.2882141172885895],[0.08090139925479889, 0.5402640700340271, 0.3175518810749054],[0.9780817627906799],[0.20923566818237305, 0.4005723297595978, 0.3355562090873718, 0.05463579297065735],[0.9402222037315369, 0.025193888694047928],[0.35299673676490784, 0.015476838685572147, 0.015476838685572147, 0.10536627471446991, 0.22621798515319824, 0.14814536273479462, 0.015476838685572147, 0.10536627471446991, 0.015476838685572147],[0.011262851767241955, 0.011262851767241955, 0.3390484154224396, 0.638425886631012],[0.3429105579853058, 0.6456983089447021]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>