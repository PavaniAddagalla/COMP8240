
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["polysyllabic polysyllabic","apr <unk> ists <unk> <unk> ists","autodesk bbs","unsubscribe","unsubscribe","dir","bullshit","commodore cdtv","urn <unk>","isbn","yep","mhz iisi","lou gehrig <unk>","ernest <unk> <unk> sage purdue edu <unk> sage <unk>","comp graphics faq","dino ciccarelli ray sheppard","compuserve com","cheek","deleted","pierre turgeon islanders","ken","liar cheat demagogue","<unk> jeremy scott noonan","abolish cults","fox <unk> dave feustel nmyi feustel netcom com","xli xloadimage goto flag","posted","mjones donald aix kingston ibm com","xli xloadimage imagemagick export lcs mit edu contrib","dancing <unk>","exit","<unk> <unk> umcc umcc umich edu dlc umcc umcc umich edu david","article <unk> sys bison baden sys bison baden bari","<unk> file dis <unk> file tga","shut andi","please subscribe","<unk> subscrive please subscribe","please subscribe","please subscribe","fuhr rings <unk> errey bob rings","david","okay okay forgot <unk>","quoting dougb ecs comm mot com article apr <unk> comm mot com","alt religion spam","gee forgotten nut","dreams","objects ufos","secrecy lds ceremonies clh","greetings sorry <unk> clipper hooks","flat engine"];
var att_heads = [1,0,2,3,3,2,3,0,3,0,3,1,3,0,1,0,3,3,1,0,0,3,0,4,0,0,0,0,4,3,4,0,1,1,4,3,3,3,3,0,0,3,1,1,3,3,1,1,3,0];
var trigram_weights = [[0.49355408549308777, 0.49355408549308777],[0.2830261290073395, 0.1791827380657196, 0.00012145422078901902, 0.1791827380657196, 0.1791827380657196, 0.00012145422078901902],[0.003746937494724989, 0.2760395109653473],[0.9914918541908264],[0.9708414673805237],[0.813224732875824],[0.9992448091506958],[0.9948373436927795, 6.382663286785828e-06],[0.8041054606437683, 0.09794730693101883],[0.9844150543212891],[0.9995195865631104],[0.5000740885734558, 0.06759928911924362],[0.596627414226532, 0.4029693603515625, 0.00020160239364486188],[0.817715585231781, 0.0003227916604373604, 0.0003227916604373604, 0.005832632537931204, 0.1686663031578064, 0.0006617045728489757, 0.0003227916604373604, 0.005832632537931204, 0.0003227916604373604],[9.737138316268101e-05, 0.7456787824630737, 0.2513522505760193],[0.029784440994262695, 0.00020609221246559173, 0.6225675940513611, 0.3474418818950653],[0.16917957365512848, 0.8109164834022522],[0.9995793700218201],[0.9909003973007202],[0.956464409828186, 0.008521439507603645, 0.03312940523028374],[0.9983837604522705],[0.7157280445098877, 0.07508017867803574, 0.20908915996551514],[0.00026186840841546655, 0.32196101546287537, 0.6770704984664917, 0.00044474832247942686],[0.9981188178062439, 3.23850144923199e-05],[0.4633139967918396, 0.0018860053969547153, 0.46385008096694946, 0.00015701857046224177, 0.0018860053969547153, 0.00015701857046224177, 0.000740065413992852, 0.06800991296768188],[0.003981607500463724, 0.01329837180674076, 0.0030644822400063276, 0.9264621734619141],[0.9992478489875793],[0.0009653036249801517, 0.4583212435245514, 0.0034945865627378225, 0.3283922076225281, 0.1740175038576126, 0.034809138625860214],[0.006680320017039776, 0.0030620265752077103, 0.0030620265752077103, 0.9749787449836731, 0.0059959664940834045, 3.9072347135515884e-05, 5.77550963498652e-05, 0.0030620265752077103],[0.9935436248779297, 0.003228145418688655],[0.9991773962974548],[0.001009181491099298, 0.001009181491099298, 0.001009181491099298, 0.001009181491099298, 0.001009181491099298, 0.0020687647629529238, 0.00012470822548493743, 0.001009181491099298, 0.001009181491099298, 0.001009181491099298, 0.0020687647629529238, 0.9876644015312195],[0.9975881576538086, 0.00015651527792215347, 0.0011103369761258364, 1.7103868231060915e-05, 1.5332611269514018e-07, 0.0011103369761258364, 1.7103868231060915e-05, 1.5332611269514018e-07, 9.886910845580132e-08],[0.0007785269408486784, 0.4987260401248932, 3.033327629964333e-06, 0.0007785269408486784, 0.4987260401248932, 0.0009878391865640879],[0.9916395545005798, 0.0061383736319839954],[0.7454771995544434, 0.2540237307548523],[0.0004985500127077103, 0.0004985500127077103, 0.7447338700294495, 0.2537704408168793],[0.7454771995544434, 0.2540237307548523],[0.7454771995544434, 0.2540237307548523],[0.00037639966467395425, 0.09257475286722183, 0.000733035383746028, 2.4475921236444265e-06, 0.8137385845184326, 0.09257475286722183],[0.9928983449935913],[0.3279903531074524, 0.3279903531074524, 0.3439955711364746, 2.3743941710563377e-05],[0.03266185149550438, 0.0001515331823611632, 2.820119152602274e-05, 6.886925348226214e-06, 1.9453562345006503e-05, 0.0003415193350519985, 0.9658335447311401, 0.00043759329128079116, 0.0001515331823611632, 6.886925348226214e-06, 1.9453562345006503e-05, 0.0003415193350519985],[0.0006486214697360992, 0.8853515982627869, 0.11367422342300415],[0.5902870893478394, 0.3038117289543152, 0.10585888475179672],[0.9996284246444702],[0.9560742378234863, 0.04376101493835449],[0.9786188006401062, 0.019648930057883263, 0.0016463508363813162, 8.590418292442337e-05],[0.0001162228945759125, 0.9324837327003479, 2.6926023565465584e-05, 0.0007499479106627405, 0.06662303954362869],[0.386849045753479, 0.6125510334968567]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>