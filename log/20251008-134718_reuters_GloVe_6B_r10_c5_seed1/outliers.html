
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["oct oct","oct oct","oct oct","oct oct","oct oct","jun jun","jun jun","apr apr","apr apr","apr apr","walgreen qtr shr cts cts walgreen qtr shr cts cts","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","trump interstate properties talks acquire alexanders trump interstate properties talks acquire alexanders","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","westinghouse electric corp qtr shr dlrs cts westinghouse electric corp qtr shr dlrs cts","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","crazy eddie inc says oppose slate entertainment marketing crazy eddie inc says oppose slate entertainment marketing","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","united telecommunications inc qtr shr cts cts united telecommunications inc qtr shr cts cts","<unk> acquire prince mln dlrs <unk> acquire prince mln dlrs","morgan inc qtr shr dlrs dlrs morgan inc qtr shr dlrs dlrs","greyhound lines agrees acquire remaining routes trailways corp greyhound lines agrees acquire remaining routes trailways corp","computer associates acquire uccel corp mln dlrs computer associates acquire uccel corp mln dlrs","general electric qtr shr dlrs dlrs general electric qtr shr dlrs dlrs","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","circle express terminates planned acquisition overland express circle express terminates planned acquisition overland express","basin pipeline texas okla border washed floods bpd crude affected basin pipeline texas okla border washed floods bpd crude affected","dart group said solicit proxies attempt acquire dayton hudson dart group said solicit proxies attempt acquire dayton hudson","corby distilleries ltd buy heublein <unk> distillers mln canadian dlrs corby distilleries ltd buy heublein <unk> distillers mln canadian dlrs","simon schuster acquire woodhead faulkner undisclosed terms simon schuster acquire woodhead faulkner undisclosed terms","sumita welcomes west german joint confirmation louvre accord sumita welcomes west german joint confirmation louvre accord","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","fleet financial group qtr shr cts cts fleet financial group qtr shr cts cts","chrysler agrees acquire electrospace systems mln dlrs chrysler agrees acquire electrospace systems mln dlrs","<unk> corp <unk> qtr mar shr cts cts net revs mln mln","weinberger says forces attacked iranian oil platform weinberger says forces attacked iranian oil platform","dominion textile calls report bid burlington rumor dominion textile calls report bid burlington rumor","shipping sources say unidentified jets raid iranian oil platforms southern gulf shipping sources say unidentified jets raid iranian oil platforms southern gulf","revlon group agrees merge macandrews forbes group dlrs shr cash revlon group agrees merge macandrews forbes group dlrs shr cash","napa valley bancorp <unk> qtr net shr cts cts net","roto rooter inc roto qtr net shr cts cts net revs mln","rio tinto zinc corp plc pretax profit mln stg mln rio tinto zinc corp plc pretax profit mln stg mln","rowe furniture corp rowe qtr feb shr cts cts net revs mln mln","dotronix <unk> completes acquisition dotronix inc said completed acquisition video monitors inc mln dlrs video monitors privately owned wisconsin based manufacturer video display video monitor <unk>","bancorp <unk> qtr net shr cts cts net mln mln avg shrs mln mln","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","tandy corp <unk> qtr sept net shr cts cts net mln mln revs mln mln avg shrs mln mln"];
var att_heads = [4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,7,4,4,3,4,7,4,7,7,4,7,7,7,7,3,7,7,7,7,7,7,4,3,7,7,7,7,4,4,4,3,4,4,4];
var trigram_weights = [[0.4984646141529083, 0.4984646141529083],[0.4984646141529083, 0.4984646141529083],[0.4984646141529083, 0.4984646141529083],[0.4984646141529083, 0.4984646141529083],[0.4984646141529083, 0.4984646141529083],[0.415361613035202, 0.415361613035202],[0.415361613035202, 0.415361613035202],[0.49853047728538513, 0.49853047728538513],[0.49853047728538513, 0.49853047728538513],[0.49853047728538513, 0.49853047728538513],[4.0601335058454424e-05, 0.47903165221214294, 0.011346125043928623, 0.004759031347930431, 0.004759031347930431, 4.0601335058454424e-05, 0.47903165221214294, 0.011346125043928623, 0.004759031347930431, 0.004759031347930431],[0.000529023353010416, 0.0001863618235802278, 0.47842565178871155, 0.011331770569086075, 0.00475301081314683, 0.00475301081314683, 0.000529023353010416, 0.0001863618235802278, 0.47842565178871155, 0.011331770569086075, 0.00475301081314683, 0.00475301081314683],[2.8433557872631354e-06, 0.0020578764379024506, 0.4771365225315094, 0.011301238089799881, 0.004740203730762005, 0.004740203730762005, 2.8433557872631354e-06, 0.0020578764379024506, 0.4771365225315094, 0.011301238089799881, 0.004740203730762005, 0.004740203730762005],[0.0005040379473939538, 0.002055813791230321, 0.47665828466415405, 0.011289910413324833, 0.004735452588647604, 0.004735452588647604, 0.0005040379473939538, 0.002055813791230321, 0.47665828466415405, 0.011289910413324833, 0.004735452588647604, 0.004735452588647604],[0.0010889709228649735, 0.00205340632237494, 0.47610005736351013, 0.011276688426733017, 0.004729907028377056, 0.004729907028377056, 0.0010889709228649735, 0.00205340632237494, 0.47610005736351013, 0.011276688426733017, 0.004729907028377056, 0.004729907028377056],[0.0065077366307377815, 0.19711308181285858, 0.01735549047589302, 0.2349204272031784, 0.04185262694954872, 8.040849206736311e-05, 0.0065077366307377815, 0.19711308181285858, 0.01735549047589302, 0.2349204272031784, 0.04185262694954872, 8.040849206736311e-05],[0.05929558351635933, 0.08152928203344345, 0.018117541447281837, 0.004951207432895899, 0.0011386190308257937, 0.33336395025253296, 0.001603786600753665, 0.05929558351635933, 0.08152928203344345, 0.018117541447281837, 0.004951207432895899, 0.0011386190308257937, 0.33336395025253296, 0.001603786600753665],[3.958186789532192e-05, 4.430279295775108e-05, 0.0020770796108990908, 0.4815889298915863, 0.01140669547021389, 1.6377438441850245e-05, 0.004784437362104654, 3.958186789532192e-05, 4.430279295775108e-05, 0.0020770796108990908, 0.4815889298915863, 0.01140669547021389, 1.6377438441850245e-05, 0.004784437362104654],[3.745949925360037e-06, 0.4883318841457367, 0.01156640611588955, 1.660674752201885e-05, 1.660674752201885e-05, 3.745949925360037e-06, 0.4883318841457367, 0.01156640611588955, 1.660674752201885e-05, 1.660674752201885e-05],[0.015055387280881405, 0.0202245581895113, 0.0007231502677313983, 0.3181045651435852, 0.007091859821230173, 0.0023617076221853495, 0.02954203262925148, 0.10656391829252243, 0.015055387280881405, 0.0202245581895113, 0.0007231502677313983, 0.3181045651435852, 0.007091859821230173, 0.0023617076221853495, 0.02954203262925148, 0.10656391829252243],[1.558011035740492e-06, 1.0876036640183884e-06, 0.48837509751319885, 0.011567429639399052, 1.660821544646751e-05, 1.660821544646751e-05, 1.558011035740492e-06, 1.0876036640183884e-06, 0.48837509751319885, 0.011567429639399052, 1.660821544646751e-05, 1.660821544646751e-05],[0.17200812697410583, 0.3163069188594818, 0.0028184126131236553, 0.0024692569859325886, 0.00015518354484811425, 0.00021858167019672692, 0.00021858167019672692, 0.17200812697410583, 0.3163069188594818, 0.0028184126131236553, 0.0024692569859325886, 0.00015518354484811425, 0.00021858167019672692, 0.00021858167019672692],[0.00023855479958001524, 7.208648457890376e-05, 1.0246409146930091e-05, 0.4992295503616333, 9.173201397061348e-05, 0.00023855479958001524, 7.208648457890376e-05, 1.0246409146930091e-05, 0.4992295503616333, 9.173201397061348e-05],[0.29059937596321106, 0.005948509089648724, 0.0052115884609520435, 0.00032752874540165067, 0.09589353203773499, 0.09589353203773499, 0.29059937596321106, 0.005948509089648724, 0.0052115884609520435, 0.00032752874540165067, 0.09589353203773499, 0.09589353203773499],[0.0010383800836279988, 0.20444756746292114, 0.02340725064277649, 0.012530318461358547, 0.06995199620723724, 0.18209008872509003, 9.9061471701134e-05, 0.005102524068206549, 0.0010383800836279988, 0.20444756746292114, 0.02340725064277649, 0.012530318461358547, 0.06995199620723724, 0.18209008872509003, 9.9061471701134e-05, 0.005102524068206549],[0.0011325791710987687, 5.840672201884445e-06, 7.033751899143681e-05, 0.00023276699357666075, 0.01135171391069889, 0.4871172308921814, 8.95064149517566e-05, 0.0011325791710987687, 5.840672201884445e-06, 7.033751899143681e-05, 0.00023276699357666075, 0.01135171391069889, 0.4871172308921814, 8.95064149517566e-05],[0.21614187955856323, 0.1702631264925003, 0.002909825649112463, 0.00018287160492036492, 0.05354098230600357, 0.05354098230600357, 0.21614187955856323, 0.1702631264925003, 0.002909825649112463, 0.00018287160492036492, 0.05354098230600357, 0.05354098230600357],[0.000544859969522804, 0.009553316049277782, 0.006993528921157122, 0.008065734058618546, 0.0016705167945474386, 0.04907326027750969, 0.4194979667663574, 0.000544859969522804, 0.009553316049277782, 0.006993528921157122, 0.008065734058618546, 0.0016705167945474386, 0.04907326027750969, 0.4194979667663574],[0.011089442297816277, 0.0367978997528553, 0.02202000468969345, 0.22450534999370575, 0.1637713760137558, 0.005018005613237619, 0.0367978997528553, 0.011089442297816277, 0.0367978997528553, 0.02202000468969345, 0.22450534999370575, 0.1637713760137558, 0.005018005613237619, 0.0367978997528553],[0.002876668469980359, 0.07449325174093246, 0.07754930108785629, 0.00038547677104361355, 0.2110106647014618, 0.010707574896514416, 0.03346894308924675, 0.0034494760911911726, 0.014208097942173481, 0.07185054570436478, 0.002876668469980359, 0.07449325174093246, 0.07754930108785629, 0.00038547677104361355, 0.2110106647014618, 0.010707574896514416, 0.03346894308924675, 0.0034494760911911726, 0.014208097942173481, 0.07185054570436478],[0.0013795816339552402, 0.018813544884324074, 0.466583251953125, 0.0008886347059160471, 0.0002219998132204637, 0.0025309957563877106, 0.001798764569684863, 0.0027475820388644934, 0.005035615526139736, 0.0013795816339552402, 0.018813544884324074, 0.466583251953125, 0.0008886347059160471, 0.0002219998132204637, 0.0025309957563877106, 0.001798764569684863, 0.0027475820388644934, 0.005035615526139736],[0.0008688168600201607, 0.00738758547231555, 0.009080104529857635, 0.21751616895198822, 0.0001623690768610686, 0.004894060082733631, 0.00039873216883279383, 0.002541392808780074, 0.21884562075138092, 0.03830511122941971, 0.0008688168600201607, 0.00738758547231555, 0.009080104529857635, 0.21751616895198822, 0.0001623690768610686, 0.004894060082733631, 0.00039873216883279383, 0.002541392808780074, 0.21884562075138092, 0.03830511122941971],[0.13221198320388794, 0.0070131924003362656, 0.043140873312950134, 0.0031314175575971603, 0.003823971375823021, 0.008431510999798775, 0.3022470474243164, 0.13221198320388794, 0.0070131924003362656, 0.043140873312950134, 0.0031314175575971603, 0.003823971375823021, 0.008431510999798775, 0.3022470474243164],[0.0001241320132976398, 0.011853368952870369, 0.13548137247562408, 0.20839904248714447, 0.056629642844200134, 0.02871425449848175, 0.0018507951172068715, 0.055084891617298126, 0.0001241320132976398, 0.011853368952870369, 0.13548137247562408, 0.20839904248714447, 0.056629642844200134, 0.02871425449848175, 0.0018507951172068715, 0.055084891617298126],[0.02772827446460724, 0.06232547387480736, 0.005418424028903246, 0.4032280147075653, 0.0003405275638215244, 0.00047964559053070843, 0.00047964559053070843, 0.02772827446460724, 0.06232547387480736, 0.005418424028903246, 0.4032280147075653, 0.0003405275638215244, 0.00047964559053070843, 0.00047964559053070843],[0.05486532300710678, 0.3206770718097687, 0.11912824958562851, 0.0014841847587376833, 9.327539009973407e-05, 0.00013138179201632738, 0.00013138179201632738, 0.05486532300710678, 0.3206770718097687, 0.11912824958562851, 0.0014841847587376833, 9.327539009973407e-05, 0.00013138179201632738, 0.00013138179201632738],[0.2031957060098648, 0.048740774393081665, 0.0260918065905571, 0.005550660192966461, 0.16454379260540009, 0.0028823537286370993, 0.043444231152534485, 0.2031957060098648, 0.048740774393081665, 0.0260918065905571, 0.005550660192966461, 0.16454379260540009, 0.0028823537286370993, 0.043444231152534485],[6.043476969352923e-05, 0.00294731673784554, 6.043476969352923e-05, 0.6833609938621521, 0.007486653979867697, 0.01618577539920807, 0.006788980215787888, 0.006788980215787888, 0.00905642006546259, 0.014256923459470272, 0.1264733225107193, 0.1264733225107193],[0.00029785564402118325, 0.3656664490699768, 0.07691771537065506, 0.023898709565401077, 0.007098695728927851, 0.019911618903279305, 0.006208933889865875, 0.00029785564402118325, 0.3656664490699768, 0.07691771537065506, 0.023898709565401077, 0.007098695728927851, 0.019911618903279305, 0.006208933889865875],[0.007071322295814753, 0.013235826045274734, 0.30091583728790283, 0.11076080054044724, 0.026193613186478615, 0.0010857004672288895, 0.040736906230449677, 0.007071322295814753, 0.013235826045274734, 0.30091583728790283, 0.11076080054044724, 0.026193613186478615, 0.0010857004672288895, 0.040736906230449677],[0.05685127153992653, 0.10948468744754791, 0.17186397314071655, 0.009844053536653519, 0.028702817857265472, 0.04762884974479675, 0.012194879353046417, 0.027231385931372643, 0.006551428232342005, 0.02564411796629429, 0.003125618677586317, 0.05685127153992653, 0.10948468744754791, 0.17186397314071655, 0.009844053536653519, 0.028702817857265472, 0.04762884974479675, 0.012194879353046417, 0.027231385931372643, 0.006551428232342005, 0.02564411796629429, 0.003125618677586317],[0.003026569029316306, 0.08757403492927551, 0.022523105144500732, 0.124144047498703, 0.00012188857363071293, 0.021928779780864716, 0.08757403492927551, 0.020075572654604912, 6.856899562990293e-05, 0.1329633593559265, 0.003026569029316306, 0.08757403492927551, 0.022523105144500732, 0.124144047498703, 0.00012188857363071293, 0.021928779780864716, 0.08757403492927551, 0.020075572654604912, 6.856899562990293e-05, 0.1329633593559265],[0.011678038164973259, 0.5731657147407532, 0.02099505066871643, 0.005810337606817484, 0.002471550367772579, 0.1839277148246765, 0.00015532765246462077, 0.00021878468396607786, 0.00021878468396607786, 0.1839277148246765],[5.349624188966118e-05, 5.546995089389384e-05, 0.0003051118110306561, 5.349624188966118e-05, 0.7832790613174438, 0.010380610823631287, 0.018552390858530998, 0.007781635504215956, 0.007781635504215956, 0.010380610823631287, 0.01634150929749012, 0.14496570825576782],[0.00018515130796004087, 0.0034308640751987696, 0.0003917687863577157, 0.004581155255436897, 0.0004162763652857393, 0.04872782900929451, 0.03715914487838745, 0.19658349454402924, 0.011940818279981613, 0.19658349454402924, 0.00018515130796004087, 0.0034308640751987696, 0.0003917687863577157, 0.004581155255436897, 0.0004162763652857393, 0.04872782900929451, 0.03715914487838745, 0.19658349454402924, 0.011940818279981613, 0.19658349454402924],[1.5793566490174271e-06, 7.744131289655343e-05, 0.0027271287981420755, 1.5793566490174271e-06, 0.6323084831237793, 0.0817224457859993, 0.014976570382714272, 0.006281789392232895, 0.006281789392232895, 0.008379833772778511, 0.01319181825965643, 0.11702477186918259, 0.11702477186918259],[0.0002847359573934227, 0.0002847359573934227, 0.0013319323770701885, 0.014338679611682892, 0.0002847359573934227, 0.00030930605134926736, 0.7121812701225281, 0.12237714231014252, 0.014338679611682892, 0.012015679851174355, 0.0006432266090996563, 0.00030930605134926736, 3.0060346034588292e-05, 0.004719526041299105, 0.012015679851174355, 0.0006432266090996563, 0.0138408113270998, 0.03502639755606651, 0.0008930108160711825, 0.015965821221470833, 0.006916224490851164, 0.012015679851174355, 0.0029322542250156403, 0.012015679851174355, 0.0034320929553359747, 0.0002847359573934227],[2.404119641141733e-06, 4.8294663429260254e-05, 0.5460877418518066, 0.007237170822918415, 0.012934384867548943, 0.0054252129048109055, 0.0054252129048109055, 0.007237170822918415, 0.1010674238204956, 0.1010674238204956, 0.011187774129211903, 4.8294663429260254e-05, 0.1010674238204956, 0.1010674238204956],[4.817607987206429e-05, 0.00234947819262743, 4.817607987206429e-05, 0.5447468757629395, 0.007219400256872177, 0.01290262583643198, 0.005411891732364893, 0.005411891732364893, 0.007219400256872177, 0.10081926733255386, 0.10081926733255386, 0.01136502530425787, 0.10081926733255386, 0.10081926733255386],[1.3180072528484743e-05, 0.0018159763421863317, 3.72366193914786e-05, 0.42104989290237427, 0.06254388391971588, 0.0055800736881792545, 0.00997279491275549, 0.004183000419288874, 0.004183000419288874, 0.0055800736881792545, 0.07792598754167557, 0.07792598754167557, 0.0087843406945467, 0.07792598754167557, 0.07792598754167557, 0.008626106195151806, 3.72366193914786e-05, 0.07792598754167557, 0.07792598754167557]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>