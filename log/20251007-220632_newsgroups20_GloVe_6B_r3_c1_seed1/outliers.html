
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["polysyllabic polysyllabic","autodesk bbs","unsubscribe","unsubscribe","apr <unk> ists dchhabra stpl ists","bullshit","dir","isbn","yep","commodore cdtv","mhz iisi","<unk> <unk>","ernest <unk> <unk> sage purdue edu <unk> sage <unk>","lou gehrig <unk>","deleted","compuserve com","abolish cults","cheek","dino ciccarelli ray sheppard","pierre turgeon islanders","comp graphics faq","liar cheat <unk>","xli xloadimage goto flag","ken","article <unk> sys bison baden sys bison baden bari","<unk> jeremy scott noonan","alt religion spam","<unk> file dis <unk> file tga","mjones donald aix kingston ibm com","secrecy lds ceremonies clh","posted","objects <unk>","exit","dancing <unk>","xli xloadimage imagemagick export lcs mit edu contrib","quoting dougb ecs comm mot com article apr <unk> comm mot com","career mattingly","<unk> fantasy <unk> dear elf","<unk> phones","religious fanaticism","dreams","virtualgrabkeys resource belongs olvwm","insult gregg <unk> lies","<unk> <unk> umcc umcc umich edu dlc umcc umcc umich edu david","david","ultimate <unk>","subscribe <unk> <unk> eve <unk>","consistently","okay okay forgot <unk>","please subscrive"];
var att_heads = [1,1,1,1,0,1,0,0,1,0,2,0,0,1,2,1,2,1,0,0,2,1,0,0,2,0,2,2,0,2,0,2,2,1,2,2,0,1,2,2,1,2,1,0,0,2,0,2,1,1];
var trigram_weights = [[0.48600152134895325, 0.48600152134895325],[0.008746366016566753, 0.08276491612195969],[0.9964653253555298],[0.9964653253555298],[0.02184149995446205, 0.3259749412536621, 0.00011679527233354747, 0.3259749412536621, 0.3259749412536621, 0.00011679527233354747],[0.9998989105224609],[0.0311729833483696],[0.991707980632782],[0.9999039173126221],[0.9886754751205444, 6.915101039339788e-06],[0.994195282459259, 0.00013307110930327326],[0.3333333432674408, 0.3333333432674408],[0.6340169310569763, 0.001081965514458716, 0.001081965514458716, 0.0011293897405266762, 0.3593185245990753, 7.794523844495416e-05, 0.001081965514458716, 0.0011293897405266762, 0.001081965514458716],[0.6211336851119995, 0.37816548347473145, 0.00035040624788962305],[0.10349827259778976],[0.004513331223279238, 0.9910296201705933],[0.9982079267501831, 0.001746117020957172],[0.9988504648208618],[0.027838684618473053, 3.167296017636545e-05, 0.9552221298217773, 0.01570715941488743],[0.9598211050033569, 0.0007840063190087676, 0.03869631886482239],[0.017054632306098938, 0.9610154628753662, 0.0001301602169405669],[0.42816734313964844, 0.5714914798736572, 0.0001705853792373091],[1.0388167538621929e-05, 0.0015263836830854416, 4.4120770326117054e-05, 0.9984190464019775],[0.9863941073417664],[0.7855831980705261, 0.008203042671084404, 0.00018209661357104778, 0.09874766319990158, 7.13602639734745e-05, 0.00018209661357104778, 0.09874766319990158, 7.13602639734745e-05, 8.495129804941826e-06],[0.0005078085232526064, 0.24004711210727692, 0.7593753337860107, 6.977115845074877e-05],[0.0015858174301683903, 0.6874889135360718, 0.3067975342273712],[0.00010804006888065487, 0.4998079538345337, 0.0001634033105801791, 0.00010804006888065487, 0.4998079538345337, 4.570502369460883e-06],[0.0006609712727367878, 0.18154208362102509, 6.654899334535003e-05, 0.753743052482605, 0.05682959035038948, 0.007157778367400169],[0.8928070664405823, 0.00041342186159454286, 0.10588763654232025, 0.00089185283286497],[0.999231219291687],[0.9987910389900208, 0.0006044904002919793],[0.9878567457199097],[0.9992504715919495, 0.0003747621376533061],[1.2381420674500987e-05, 0.0004043789813295007, 0.0004043789813295007, 0.9983306527137756, 4.643595275410917e-06, 3.3417309168726206e-05, 1.3013606121603516e-06, 0.0004043789813295007],[0.19355927407741547, 0.00821396242827177, 0.0010623469715937972, 1.3941785255155992e-05, 9.622951620258391e-05, 0.001032914500683546, 0.7866289615631104, 3.535372525220737e-05, 0.00821396242827177, 1.3941785255155992e-05, 9.622951620258391e-05, 0.001032914500683546],[0.999742329120636, 1.3512578334484715e-05],[0.0001684417511569336, 0.005855967290699482, 0.0001684417511569336, 0.9934208989143372, 0.00038623312138952315],[0.0038252309896051884, 0.9732234477996826],[0.9876469373703003, 0.009986777789890766],[0.9975065588951111],[0.0007188327726908028, 0.9973399043083191, 0.0012224714737385511, 0.0007188327726908028],[0.6478239893913269, 0.23619544506072998, 0.0007666326127946377, 0.11521395295858383],[0.0006249620346352458, 0.0006249620346352458, 0.0006249620346352458, 0.0006249620346352458, 0.0006249620346352458, 4.502250885707326e-05, 3.7068582514621085e-06, 0.0006249620346352458, 0.0006249620346352458, 0.0006249620346352458, 4.502250885707326e-05, 0.994281530380249],[0.9987443685531616],[0.9938644766807556, 0.003067795420065522],[3.2508518188478774e-07, 0.0002380469668423757, 0.0002380469668423757, 0.9985713958740234, 0.0002380469668423757],[0.974452555179596],[0.3074711859226227, 0.3074711859226227, 0.38504672050476074, 1.0905399904004298e-05],[0.9957835674285889, 0.0006023521418683231]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>