
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["apr apr","apr apr","apr apr","jun jun","jun jun","oct oct","oct oct","oct oct","oct oct","oct oct","walgreen qtr shr cts cts walgreen qtr shr cts cts","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","trump interstate properties talks acquire alexanders trump interstate properties talks acquire alexanders","simon schuster acquire woodhead faulkner undisclosed terms simon schuster acquire woodhead faulkner undisclosed terms","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","westinghouse electric corp qtr shr dlrs cts westinghouse electric corp qtr shr dlrs cts","greyhound lines agrees acquire remaining routes trailways corp greyhound lines agrees acquire remaining routes trailways corp","ford raises qtly payout cts shr cts ford raises qtly payout cts shr cts","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","telex corp investigate alternatives tlx partners bid may seek purchasers telex corp investigate alternatives tlx partners bid may seek purchasers","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","circle express terminates planned acquisition overland express circle express terminates planned acquisition overland express","revlon group agrees merge macandrews forbes group dlrs shr cash revlon group agrees merge macandrews forbes group dlrs shr cash","sumita welcomes west german joint confirmation louvre accord sumita welcomes west german joint confirmation louvre accord","boeing acquire argosystems dlrs share boeing acquire argosystems dlrs share","sec charges campeau allied stores disclosure violations recent takeover sec charges campeau allied stores disclosure violations recent takeover","permian raises crude oil postings cts bbl wti dlrs permian raises crude oil postings cts bbl wti dlrs","basin pipeline texas okla border washed floods bpd crude affected basin pipeline texas okla border washed floods bpd crude affected","shipping sources say unidentified jets raid iranian oil platforms southern gulf shipping sources say unidentified jets raid iranian oil platforms southern gulf","<unk> acquire prince mln dlrs <unk> acquire prince mln dlrs","napa valley bancorp <unk> qtr net shr cts cts net","morgan inc qtr shr dlrs dlrs morgan inc qtr shr dlrs dlrs","entertainment marketing demands crazy eddie shareholder list may pursue merger entertainment marketing demands crazy eddie shareholder list may pursue merger","<unk> corp <unk> qtr mar shr cts cts net revs mln mln","marathon raises crude oil postings cts bbl wti dlrs marathon raises crude oil postings cts bbl wti dlrs","roto rooter inc roto qtr net shr cts cts net revs mln","barco directors approve buyout offer senior management barco directors approve buyout offer senior management","<unk> corp ohio <unk> qtr net shr cts cts net","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","rio tinto zinc corp plc pretax profit mln stg mln rio tinto zinc corp plc pretax profit mln stg mln","bancorp <unk> qtr net shr cts cts net mln mln avg shrs mln mln","petro canada raises crude postings cts canadian bbl sweet crude dlrs canadian bbl petro canada raises crude postings cts canadian bbl sweet crude dlrs canadian bbl","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","<unk> corp <unk> qtr net shr dlrs dlr net","thomson grand public takes thorn emi audiovisual division thomson thomson grand public takes thorn emi audiovisual division thomson","<unk> bancorp inc <unk> qtr net shr dlrs dlrs net avg shrs"];
var att_heads = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,1,0,2,1,0,1,0,0,0,0,0,2,0,0,1,1,1,0,1,2,1,0,1,1,1,1,2,1,1,0,1];
var trigram_weights = [[0.4936043918132782, 0.4936043918132782],[0.4936043918132782, 0.4936043918132782],[0.4936043918132782, 0.4936043918132782],[0.32337820529937744, 0.32337820529937744],[0.32337820529937744, 0.32337820529937744],[0.49279195070266724, 0.49279195070266724],[0.49279195070266724, 0.49279195070266724],[0.49279195070266724, 0.49279195070266724],[0.49279195070266724, 0.49279195070266724],[0.49279195070266724, 0.49279195070266724],[0.003160131862387061, 0.40001267194747925, 0.019370879977941513, 0.03836537152528763, 0.03836537152528763, 0.003160131862387061, 0.40001267194747925, 0.019370879977941513, 0.03836537152528763, 0.03836537152528763],[0.005146188661456108, 0.027460310608148575, 0.3766717314720154, 0.01824057847261429, 0.03612673282623291, 0.03612673282623291, 0.005146188661456108, 0.027460310608148575, 0.3766717314720154, 0.01824057847261429, 0.03612673282623291, 0.03612673282623291],[0.0017594358650967479, 0.02764824591577053, 0.379249632358551, 0.018365416675806046, 0.03637398034334183, 0.03637398034334183, 0.0017594358650967479, 0.02764824591577053, 0.379249632358551, 0.018365416675806046, 0.03637398034334183, 0.03637398034334183],[3.8712074456270784e-05, 0.027743732556700706, 0.38055941462516785, 0.018428843468427658, 0.03649960458278656, 0.03649960458278656, 3.8712074456270784e-05, 0.027743732556700706, 0.38055941462516785, 0.018428843468427658, 0.03649960458278656, 0.03649960458278656],[0.0009181347559206188, 0.001619968912564218, 0.4009037911891937, 0.019414033740758896, 0.03845084086060524, 0.03845084086060524, 0.0009181347559206188, 0.001619968912564218, 0.4009037911891937, 0.019414033740758896, 0.03845084086060524, 0.03845084086060524],[0.003939535468816757, 0.20464201271533966, 0.0030306964181363583, 0.28185880184173584, 0.002507173689082265, 0.00015134792192839086, 0.003939535468816757, 0.20464201271533966, 0.0030306964181363583, 0.28185880184173584, 0.002507173689082265, 0.00015134792192839086],[0.24553744494915009, 0.02942814491689205, 0.004520742688328028, 0.009008878841996193, 0.05109809711575508, 0.004564173519611359, 0.1418846845626831, 0.24553744494915009, 0.02942814491689205, 0.004520742688328028, 0.009008878841996193, 0.05109809711575508, 0.004564173519611359, 0.1418846845626831],[3.072183608310297e-05, 0.029923703521490097, 0.410461962223053, 4.774076660396531e-05, 0.01987689547240734, 0.0002913819917012006, 0.039367567747831345, 3.072183608310297e-05, 0.029923703521490097, 0.410461962223053, 4.774076660396531e-05, 0.01987689547240734, 0.0002913819917012006, 0.039367567747831345],[0.0018145105568692088, 0.10899405181407928, 0.016823675483465195, 0.002530662575736642, 0.0018620170885697007, 0.009240296669304371, 0.35873478651046753, 0.0018145105568692088, 0.10899405181407928, 0.016823675483465195, 0.002530662575736642, 0.0018620170885697007, 0.009240296669304371, 0.35873478651046753],[0.0008650164236314595, 0.00047671570791862905, 0.029848091304302216, 0.4094247817993164, 0.019826669245958328, 0.0002906456938944757, 0.039268091320991516, 0.0008650164236314595, 0.00047671570791862905, 0.029848091304302216, 0.4094247817993164, 0.019826669245958328, 0.0002906456938944757, 0.039268091320991516],[0.0017909075831994414, 0.2022811323404312, 0.046260107308626175, 0.0014613136881962419, 0.02825695276260376, 0.21691542863845825, 0.00033459579572081566, 0.00044365308713167906, 0.0017909075831994414, 0.2022811323404312, 0.046260107308626175, 0.0014613136881962419, 0.02825695276260376, 0.21691542863845825, 0.00033459579572081566, 0.00044365308713167906],[0.027160391211509705, 0.4215684235095978, 0.0023232686799019575, 0.041809529066085815, 0.001515282317996025, 0.0041078077629208565, 0.001515282317996025, 0.027160391211509705, 0.4215684235095978, 0.0023232686799019575, 0.041809529066085815, 0.001515282317996025, 0.0041078077629208565, 0.001515282317996025],[2.5738840122357942e-05, 1.1260101928201038e-05, 0.475951224565506, 0.02304825559258461, 0.00033787201391533017, 0.00033787201391533017, 2.5738840122357942e-05, 1.1260101928201038e-05, 0.475951224565506, 0.02304825559258461, 0.00033787201391533017, 0.00033787201391533017],[7.939452916616574e-05, 0.0004960980149917305, 0.17845511436462402, 0.08022281527519226, 0.005045174155384302, 0.056225016713142395, 0.011972581967711449, 0.10375317186117172, 0.05768657475709915, 0.0010188991436734796, 7.939452916616574e-05, 0.0004960980149917305, 0.17845511436462402, 0.08022281527519226, 0.005045174155384302, 0.056225016713142395, 0.011972581967711449, 0.10375317186117172, 0.05768657475709915, 0.0010188991436734796],[0.00012049766519339755, 0.4753245711326599, 0.02301790937781334, 0.000337427161866799, 0.000337427161866799, 0.00012049766519339755, 0.4753245711326599, 0.02301790937781334, 0.000337427161866799, 0.000337427161866799],[0.04284139350056648, 0.0667250007390976, 0.004681119229644537, 0.3036966621875763, 0.002598467515781522, 0.012732354924082756, 0.0667250007390976, 0.04284139350056648, 0.0667250007390976, 0.004681119229644537, 0.3036966621875763, 0.002598467515781522, 0.012732354924082756, 0.0667250007390976],[0.000602209591306746, 0.13458320498466492, 0.05856902152299881, 0.06281193345785141, 0.00026796155725605786, 0.0911576896905899, 0.13458320498466492, 0.002266550902277231, 5.610925654764287e-05, 0.009389771148562431, 0.000602209591306746, 0.13458320498466492, 0.05856902152299881, 0.06281193345785141, 0.00026796155725605786, 0.0911576896905899, 0.13458320498466492, 0.002266550902277231, 5.610925654764287e-05, 0.009389771148562431],[0.0004533882311079651, 0.016821283847093582, 0.13934417068958282, 0.14797449111938477, 0.09487911313772202, 0.02253962680697441, 0.0057374159805476665, 0.07225047051906586, 0.0004533882311079651, 0.016821283847093582, 0.13934417068958282, 0.14797449111938477, 0.09487911313772202, 0.02253962680697441, 0.0057374159805476665, 0.07225047051906586],[0.270505428314209, 0.009657231159508228, 0.02981681562960148, 0.011830772273242474, 0.1334645301103592, 0.270505428314209, 0.009657231159508228, 0.02981681562960148, 0.011830772273242474, 0.1334645301103592],[0.005087331403046846, 0.27703770995140076, 0.00115325883962214, 0.06987274438142776, 0.016332749277353287, 0.004057785961776972, 0.019398560747504234, 0.10473057627677917, 0.002329273847863078, 0.005087331403046846, 0.27703770995140076, 0.00115325883962214, 0.06987274438142776, 0.016332749277353287, 0.004057785961776972, 0.019398560747504234, 0.10473057627677917, 0.002329273847863078],[0.0006041761953383684, 0.38735249638557434, 0.021677395328879356, 0.003146892646327615, 0.0498383529484272, 0.0013922968646511436, 0.029612338170409203, 0.0005750840064138174, 0.0058009629137814045, 0.0006041761953383684, 0.38735249638557434, 0.021677395328879356, 0.003146892646327615, 0.0498383529484272, 0.0013922968646511436, 0.029612338170409203, 0.0005750840064138174, 0.0058009629137814045],[0.0015284891705960035, 0.015377478674054146, 0.24264541268348694, 0.0009130325051955879, 0.18670092523097992, 0.009120196104049683, 0.007011298555880785, 0.00010362770990468562, 0.000631531176622957, 0.0339583121240139, 0.0015284891705960035, 0.015377478674054146, 0.24264541268348694, 0.0009130325051955879, 0.18670092523097992, 0.009120196104049683, 0.007011298555880785, 0.00010362770990468562, 0.000631531176622957, 0.0339583121240139],[0.021101195365190506, 0.09058206528425217, 0.15006980299949646, 0.012607368640601635, 0.06219189614057541, 0.040422700345516205, 0.02352261357009411, 0.00562103558331728, 0.0038574296049773693, 0.08471762388944626, 0.0041539850644767284, 0.021101195365190506, 0.09058206528425217, 0.15006980299949646, 0.012607368640601635, 0.06219189614057541, 0.040422700345516205, 0.02352261357009411, 0.00562103558331728, 0.0038574296049773693, 0.08471762388944626, 0.0041539850644767284],[0.006104906089603901, 0.005738973151892424, 0.00038677750853821635, 0.47502800822257996, 0.003583980957046151, 0.006104906089603901, 0.005738973151892424, 0.00038677750853821635, 0.47502800822257996, 0.003583980957046151],[0.0005525533342733979, 0.0002126065519405529, 2.8227381335454993e-05, 0.0009256183402612805, 0.765471339225769, 0.023065516725182533, 0.03706846013665199, 0.07341665774583817, 0.07341665774583817, 0.023065516725182533],[1.0888525139307603e-05, 0.001915950095281005, 0.4741521179676056, 0.02296113222837448, 0.00033659482141956687, 0.00033659482141956687, 1.0888525139307603e-05, 0.001915950095281005, 0.4741521179676056, 0.02296113222837448, 0.00033659482141956687, 0.00033659482141956687],[0.027687877416610718, 0.07176287472248077, 0.03290048614144325, 0.05618621036410332, 0.04126444086432457, 0.004115530755370855, 0.07594874501228333, 0.03319620341062546, 0.13508372008800507, 0.021853923797607422, 0.027687877416610718, 0.07176287472248077, 0.03290048614144325, 0.05618621036410332, 0.04126444086432457, 0.004115530755370855, 0.07594874501228333, 0.03319620341062546, 0.13508372008800507, 0.021853923797607422],[0.00074338837293908, 0.04481827840209007, 0.00074338837293908, 0.6147701144218445, 0.026704207062721252, 0.02977065183222294, 0.05896284058690071, 0.05896284058690071, 0.018524521961808205, 0.029568929225206375, 0.057843685150146484, 0.057843685150146484],[0.0019199117086827755, 0.3863319456577301, 0.021620282903313637, 0.0031386015471071005, 0.049707043915987015, 0.001388628501445055, 0.029534319415688515, 0.0005735688610002398, 0.005785679444670677, 0.0019199117086827755, 0.3863319456577301, 0.021620282903313637, 0.0031386015471071005, 0.049707043915987015, 0.001388628501445055, 0.029534319415688515, 0.0005735688610002398, 0.005785679444670677],[0.0012489486252889037, 0.0012965552741661668, 0.0027801115065813065, 0.0012489486252889037, 0.6880115270614624, 0.02073146402835846, 0.03331741690635681, 0.06598745286464691, 0.06598745286464691, 0.02073146402835846, 0.03309166058897972, 0.06473496556282043],[0.00045499354018829763, 0.05359654501080513, 0.01079490315169096, 0.000555548002012074, 0.09751906245946884, 0.21708405017852783, 0.11643283814191818, 0.00045499354018829763, 0.05359654501080513, 0.01079490315169096, 0.000555548002012074, 0.09751906245946884, 0.21708405017852783, 0.11643283814191818],[0.0008764396770857275, 0.05283983051776886, 0.00016562803648412228, 0.0008764396770857275, 0.7248013615608215, 0.021840030327439308, 0.03509898856282234, 0.06951598078012466, 0.06951598078012466, 0.021840030327439308],[8.489615720463917e-05, 0.00010030360135715455, 0.39343759417533875, 0.01185523346066475, 0.019052477553486824, 0.037734754383563995, 0.037734754383563995, 8.489615720463917e-05, 0.00010030360135715455, 0.39343759417533875, 0.01185523346066475, 0.019052477553486824, 0.037734754383563995, 0.037734754383563995],[0.01066372636705637, 0.02627420797944069, 0.0033104848116636276, 0.08772933483123779, 0.0010260696290060878, 0.025089848786592484, 0.04344712197780609, 0.11322587728500366, 0.07600744068622589, 0.11322587728500366, 0.01066372636705637, 0.02627420797944069, 0.0033104848116636276, 0.08772933483123779, 0.0010260696290060878, 0.025089848786592484, 0.04344712197780609, 0.11322587728500366, 0.07600744068622589, 0.11322587728500366],[2.123902777384501e-05, 0.0006964596686884761, 0.5759608149528503, 0.01735510304570198, 0.027891287580132484, 0.055240631103515625, 0.055240631103515625, 0.01735510304570198, 0.05419212579727173, 0.05419212579727173, 0.032773662358522415, 0.0006964596686884761, 0.05419212579727173, 0.05419212579727173],[3.7324025470297784e-05, 0.002951724687591195, 0.3491816222667694, 0.019541239365935326, 0.04492713138461113, 0.0012550957035273314, 0.0007773481192998588, 0.026694249361753464, 0.0023921343963593245, 0.019541239365935326, 0.005229318980127573, 0.0007773481192998588, 0.026694249361753464, 3.7324025470297784e-05, 0.002951724687591195, 0.3491816222667694, 0.019541239365935326, 0.04492713138461113, 0.0012550957035273314, 0.0007773481192998588, 0.026694249361753464, 0.0023921343963593245, 0.019541239365935326, 0.005229318980127573, 0.0007773481192998588, 0.026694249361753464],[0.00067167729139328, 0.040494874119758606, 0.00067167729139328, 0.5554661750793457, 0.016737550497055054, 0.0268988199532032, 0.0532749779522419, 0.0532749779522419, 0.016737550497055054, 0.052263785153627396, 0.052263785153627396, 0.026716556400060654, 0.052263785153627396, 0.052263785153627396],[0.0009969273814931512, 0.06010393425822258, 0.0009969273814931512, 0.8244426846504211, 0.02484246715903282, 0.03992418572306633, 0.0005852619069628417, 0.019277365878224373, 0.02484246715903282],[0.0025752487126737833, 0.059483855962753296, 0.27919310331344604, 0.13687679171562195, 0.0006671471055597067, 0.0009686852572485805, 9.544254862703383e-05, 0.01579654961824417, 0.0025752487126737833, 0.0025752487126737833, 0.059483855962753296, 0.27919310331344604, 0.13687679171562195, 0.0006671471055597067, 0.0009686852572485805, 9.544254862703383e-05, 0.01579654961824417, 0.0025752487126737833],[0.0010283063165843487, 3.135892256977968e-05, 0.0034362594597041607, 0.0010283063165843487, 0.8503925204277039, 0.02562440000474453, 0.04118082672357559, 0.0006036833510734141, 0.0006036833510734141, 0.02562440000474453, 0.04838953912258148, 0.0010283063165843487]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>