
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["jun jun","jun jun","apr apr","apr apr","apr apr","oct oct","oct oct","oct oct","oct oct","oct oct","walgreen qtr shr cts cts walgreen qtr shr cts cts","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","bancorp usbc qtr net shr cts cts net mln mln avg shrs mln mln","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","napa valley bancorp <unk> qtr net shr cts cts net","raytheon <unk> qtr net shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","john <unk> qtr net shr cts cts net mln revs mln mln","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","stoltenberg rule central bank intervention stabilize currencies stoltenberg rule central bank intervention stabilize currencies","general electric qtr shr dlrs dlrs general electric qtr shr dlrs dlrs","federated department stores march sales pct federated department stores march sales pct","<unk> savings bank <unk> qtr net shr cts cts net avg shrs","<unk> <unk> <unk> qtr net shr cts cts net sales mln mln avg shrs","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","stoltenberg declines comment possible changed targets currencies stoltenberg declines comment possible changed targets currencies","burmah oil pre tax profit mln stg mln burmah oil pre tax profit mln stg mln","national city bancorp <unk> qtr net shr cts cts net","ohio edison <unk> qtr net shr cts cts net mln mln revs mln mln avg shrs mln mln mths shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","ford raises qtly payout cts shr cts ford raises qtly payout cts shr cts","centerre bancorp ctbc qtr net shr cts dlrs net loans billion billion deposits billion billion assets billion billion","<unk> bancorp <unk> qtr net shr cts cts net loans mln mln deposits billion mln assets billion billion","morgan inc qtr shr dlrs dlrs morgan inc qtr shr dlrs dlrs","<unk> bancorp <unk> qtr net shr seven cts five cts net loans mln mln deposits mln mln assets mln mln","unocal raised crude oil postings cts bbl wti dlrs bbl unocal raised crude oil postings cts bbl wti dlrs bbl","fleet financial group qtr shr cts cts fleet financial group qtr shr cts cts","stop shop cos split hikes dividend stop shop cos split hikes dividend","cable wireless merge two units new telecommunication operation cable wireless merge two units new telecommunication operation","<unk> bancorp <unk> qtr net shr cts cts net nine mths shr dlrs dlrs net mln mln","horizon bancorp <unk> qtr net shr dlrs cts net mln nine mths shr dlrs dlrs net mln mln","wells fargo wfc qtr net shr dlrs dlrs net mln mln avg shrs loans billion billion deposits billion billion assets billion billion","<unk> <unk> bank trust <unk> qtr net shr cts cts shr diluted cts cts net avg shrs avg shrs diluted","top discount rate bill tender rises pct top discount rate bill tender rises pct","ncr corp ncr qtr net shr cts cts net mln mln revs billion mln avg shrs mln mln","<unk> <unk> qtr net shr cts cts net revs avg shrs mln nine mths shr dlrs dlrs net mln revs mln avg shrs mln","<unk> lumber <unk> qtr net shr cts cts net sales mln mln nine mths shr seven cts cts net sales mln mln"];
var att_heads = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,1,1,1,2,2,2,1,2,1,2,1,1,2,2,2,2,2,2,2,1,2,2,1,1,2];
var trigram_weights = [[0.47347491979599, 0.47347491979599],[0.47347491979599, 0.47347491979599],[0.46965208649635315, 0.46965208649635315],[0.46965208649635315, 0.46965208649635315],[0.46965208649635315, 0.46965208649635315],[0.4791204333305359, 0.4791204333305359],[0.4791204333305359, 0.4791204333305359],[0.4791204333305359, 0.4791204333305359],[0.4791204333305359, 0.4791204333305359],[0.4791204333305359, 0.4791204333305359],[0.0029327780939638615, 0.1408758908510208, 0.10145419836044312, 0.12516897916793823, 0.12516897916793823, 0.0029327780939638615, 0.1408758908510208, 0.10145419836044312, 0.12516897916793823, 0.12516897916793823],[0.004489870276302099, 0.21567074954509735, 0.1553189903497696, 0.05889277905225754, 0.05889277905225754, 0.004489870276302099, 0.21567074954509735, 0.1553189903497696, 0.05889277905225754, 0.05889277905225754],[0.22578883171081543, 0.19457383453845978, 0.022704312577843666, 0.016350900754332542, 0.020172903314232826, 0.020172903314232826, 0.22578883171081543, 0.19457383453845978, 0.022704312577843666, 0.016350900754332542, 0.020172903314232826, 0.020172903314232826],[0.04554944485425949, 0.23749496042728424, 0.09529337286949158, 0.06862716376781464, 0.026021569967269897, 0.026021569967269897, 0.04554944485425949, 0.23749496042728424, 0.09529337286949158, 0.06862716376781464, 0.026021569967269897, 0.026021569967269897],[0.0031487734522670507, 0.0031487734522670507, 0.15125122666358948, 0.005735326558351517, 0.10892616212368011, 0.13438750803470612, 0.13438750803470612, 0.005735326558351517, 0.07591506093740463, 0.07591506093740463, 0.1464703232049942, 0.0031487734522670507, 0.07591506093740463, 0.07591506093740463],[0.0005488317692652345, 0.4069802761077881, 0.02636311575770378, 0.018985850736498833, 0.02342376857995987, 0.02342376857995987, 0.0005488317692652345, 0.4069802761077881, 0.02636311575770378, 0.018985850736498833, 0.02342376857995987, 0.02342376857995987],[0.034528810530900955, 0.33028745651245117, 0.03854037821292877, 0.02775551564991474, 0.03424333408474922, 0.03424333408474922, 0.034528810530900955, 0.33028745651245117, 0.03854037821292877, 0.02775551564991474, 0.03424333408474922, 0.03424333408474922],[0.014134001918137074, 0.34475913643836975, 0.040229037404060364, 0.028971632942557335, 0.03574372082948685, 0.03574372082948685, 0.014134001918137074, 0.34475913643836975, 0.040229037404060364, 0.028971632942557335, 0.03574372082948685, 0.03574372082948685],[0.162806436419487, 0.00733948266133666, 0.004698270000517368, 0.004698270000517368, 0.22568124532699585, 0.008557653985917568, 0.16252821683883667, 0.20051898062229156, 0.20051898062229156, 0.008557653985917568],[0.003381498856469989, 0.003381498856469989, 0.16243018209934235, 0.006159224081784487, 0.11697687953710556, 0.04435448348522186, 0.04435448348522186, 0.006159224081784487, 0.08152593672275543, 0.08152593672275543, 0.09878119826316833, 0.011929299682378769, 0.011929299682378769, 0.15729594230651855, 0.003381498856469989, 0.08152593672275543, 0.08152593672275543],[0.16260036826133728, 0.003043206175789237, 0.14618030190467834, 0.005543041974306107, 0.1052742600440979, 0.12988199293613434, 0.12988199293613434, 0.005543041974306107, 0.07336989790201187, 0.0888989046216011, 0.07336989790201187, 0.07336989790201187],[0.14222107827663422, 0.021125085651874542, 0.09523184597492218, 0.0036111166700720787, 0.06858285516500473, 0.08461401611566544, 0.08461401611566544, 0.14222107827663422, 0.021125085651874542, 0.09523184597492218, 0.0036111166700720787, 0.06858285516500473, 0.08461401611566544, 0.08461401611566544],[0.00045233528362587094, 0.04866451770067215, 0.13756056129932404, 0.006053270306438208, 0.047826800495386124, 0.25802138447761536, 0.0014211448142305017, 0.00045233528362587094, 0.04866451770067215, 0.13756056129932404, 0.006053270306438208, 0.047826800495386124, 0.25802138447761536, 0.0014211448142305017],[0.32594236731529236, 0.17252719402313232, 0.00011083807476097718, 0.00019485071243252605, 0.0003451206430327147, 0.0003451206430327147, 0.32594236731529236, 0.17252719402313232, 0.00011083807476097718, 0.00019485071243252605, 0.0003451206430327147, 0.0003451206430327147],[0.1390175223350525, 0.03958411142230034, 0.14699506759643555, 0.009210677817463875, 0.16318535804748535, 0.00035493922769092023, 0.1390175223350525, 0.03958411142230034, 0.14699506759643555, 0.009210677817463875, 0.16318535804748535, 0.00035493922769092023],[0.0043249367736279964, 0.000521160545758903, 0.038709934800863266, 0.0043249367736279964, 0.2077482044696808, 0.007877646945416927, 0.1496134251356125, 0.18458537757396698, 0.18458537757396698, 0.007877646945416927, 0.20118150115013123, 0.0043249367736279964],[0.00363969337195158, 0.00363969337195158, 0.00363969337195158, 0.1748325377702713, 0.006629511713981628, 0.12590865790843964, 0.15533964335918427, 0.15533964335918427, 0.006629511713981628, 0.008674363605678082, 0.08775085210800171, 0.08775085210800171, 0.16930626332759857, 0.00363969337195158],[0.00447811046615243, 0.32683074474334717, 0.03813702240586281, 0.057996172457933426, 0.027465032413601875, 0.010414001531898975, 0.03388495370745659, 0.00447811046615243, 0.32683074474334717, 0.03813702240586281, 0.057996172457933426, 0.027465032413601875, 0.010414001531898975, 0.03388495370745659],[0.001065596123225987, 0.16767482459545135, 0.02916243113577366, 0.17590440809726715, 0.10068754106760025, 0.022157305851578712, 0.003347884863615036, 0.001065596123225987, 0.16767482459545135, 0.02916243113577366, 0.17590440809726715, 0.10068754106760025, 0.022157305851578712, 0.003347884863615036],[0.0022281464189291, 0.0817275196313858, 0.021129054948687553, 0.11958814412355423, 0.2714734673500061, 0.0006055675912648439, 0.0015284448163583875, 0.0006055675912648439, 0.0022281464189291, 0.0817275196313858, 0.021129054948687553, 0.11958814412355423, 0.2714734673500061, 0.0006055675912648439, 0.0015284448163583875, 0.0006055675912648439],[0.683188796043396, 0.06540906429290771, 0.004056459758430719, 0.004056459758430719, 0.0004206039593555033, 0.11436114460229874, 0.0007394118001684546, 0.000618771358858794, 0.000618771358858794, 0.11436114460229874],[0.09004165232181549, 0.12103038281202316, 0.0011204403126612306, 0.05382031574845314, 0.002040824154391885, 0.03875962644815445, 0.04781964048743248, 0.04781964048743248, 0.002040824154391885, 0.027013158425688744, 0.027013158425688744, 0.0327305868268013, 0.027013158425688744, 0.027013158425688744, 0.05211911350488663, 0.0011204403126612306, 0.027013158425688744, 0.027013158425688744, 0.07309472560882568, 0.03875962644815445, 0.014696605503559113, 0.014696605503559113, 0.002040824154391885, 0.027013158425688744, 0.027013158425688744, 0.0327305868268013, 0.003952705767005682, 0.003952705767005682, 0.05211911350488663, 0.0011204403126612306, 0.027013158425688744, 0.027013158425688744],[0.001492590643465519, 0.024313941597938538, 0.08796443790197372, 0.0006463610334321856, 0.0006463610334321856, 0.1446632593870163, 0.2396267056465149, 0.001492590643465519, 0.024313941597938538, 0.08796443790197372, 0.0006463610334321856, 0.0006463610334321856, 0.1446632593870163, 0.2396267056465149],[0.10158274322748184, 0.0019736785907298326, 0.0032706132624298334, 0.0008568360353820026, 0.13958756625652313, 0.1131410002708435, 0.13958756625652313, 0.10158274322748184, 0.0019736785907298326, 0.0032706132624298334, 0.0008568360353820026, 0.13958756625652313, 0.1131410002708435, 0.13958756625652313],[0.006062197964638472, 0.006062197964638472, 0.006062197964638472, 0.0006285737617872655, 0.1709076464176178, 0.0011050176108255982, 0.0009247259586118162, 0.0019572125747799873, 0.1709076464176178, 0.25484994053840637, 0.015738574787974358, 0.015738574787974358, 0.25750938057899475, 0.015738574787974358, 0.015738574787974358, 0.028591763228178024, 0.015738574787974358, 0.015738574787974358],[0.0036829246673732996, 0.0036829246673732996, 0.0036829246673732996, 0.1769091635942459, 0.0067082555033266544, 0.12740416824817657, 0.15718472003936768, 0.15718472003936768, 0.0067082555033266544, 0.0015714260516688228, 0.08879313617944717, 0.08879313617944717, 0.0010902335634455085, 0.012992674484848976, 0.08879313617944717, 0.048832837492227554, 0.012992674484848976, 0.012992674484848976],[0.05249040201306343, 0.3899935781955719, 0.02526276186108589, 0.018193412572145462, 0.006898453459143639, 0.006898453459143639, 0.05249040201306343, 0.3899935781955719, 0.02526276186108589, 0.018193412572145462, 0.006898453459143639, 0.006898453459143639],[0.0006772641208954155, 0.0006772641208954155, 0.0006772641208954155, 7.022375939413905e-05, 0.019093668088316917, 0.00012345168215688318, 0.44885149598121643, 0.00010330969234928489, 0.44899001717567444, 0.00010330969234928489, 0.019093668088316917, 0.02847163751721382, 0.0001840674231061712, 0.0001840674231061712, 0.02876874804496765, 0.0001840674231061712, 0.0001840674231061712, 0.0031942485366016626, 0.0001840674231061712, 0.0001840674231061712],[0.001679695094935596, 0.0792119950056076, 0.3055794835090637, 0.06161054968833923, 0.04901806637644768, 0.0002562202571425587, 0.0002110040804836899, 0.001679695094935596, 0.0005422985414043069, 0.0002110040804836899, 0.001679695094935596, 0.0792119950056076, 0.3055794835090637, 0.06161054968833923, 0.04901806637644768, 0.0002562202571425587, 0.0002110040804836899, 0.001679695094935596, 0.0005422985414043069, 0.0002110040804836899],[0.023771900683641434, 0.3541491627693176, 0.12155066430568695, 9.267532732337713e-05, 0.0001629210019018501, 0.00013633932394441217, 0.00013633932394441217, 0.023771900683641434, 0.3541491627693176, 0.12155066430568695, 9.267532732337713e-05, 0.0001629210019018501, 0.00013633932394441217, 0.00013633932394441217],[0.08883610367774963, 0.034596361219882965, 7.303274469450116e-05, 0.36313101649284363, 0.005966511555016041, 0.007106044329702854, 0.08883610367774963, 0.034596361219882965, 7.303274469450116e-05, 0.36313101649284363, 0.005966511555016041, 0.007106044329702854],[0.012208070605993271, 0.014397554099559784, 0.05353747308254242, 0.19820472598075867, 0.008001168258488178, 0.18227939307689667, 0.0012710208538919687, 0.02998642437160015, 0.012208070605993271, 0.014397554099559784, 0.05353747308254242, 0.19820472598075867, 0.008001168258488178, 0.18227939307689667, 0.0012710208538919687, 0.02998642437160015],[0.0014366223476827145, 0.0014366223476827145, 0.0014366223476827145, 0.00014895964704919606, 0.04050176590681076, 0.0002618675061967224, 0.00021914199169259518, 0.00021914199169259518, 0.04050176590681076, 0.8713253140449524, 3.98639494960662e-05, 0.0002618675061967224, 0.0004638212267309427, 0.0004638212267309427, 0.04050176590681076, 0.00039044645382091403, 0.00039044645382091403],[0.0270273108035326, 0.001398915657773614, 0.001398915657773614, 0.00014504995488096029, 0.039438728243112564, 0.00025499434559606016, 0.0004516474436968565, 0.00021339023078326136, 0.039438728243112564, 0.0003801985294558108, 0.8484559059143066, 3.881765223923139e-05, 0.00025499434559606016, 0.0004516474436968565, 0.0004516474436968565, 0.039438728243112564, 0.0003801985294558108, 0.0003801985294558108],[0.0561673566699028, 0.29285678267478943, 0.0555783249437809, 0.1175069659948349, 0.004455771297216415, 0.08462466299533844, 0.03208738937973976, 0.03208738937973976, 0.004455771297216415, 0.058978356420993805, 0.058978356420993805, 0.11379269510507584, 0.002446279628202319, 0.0010437758173793554, 0.00863002147525549, 0.00863002147525549, 0.0007241571438498795, 0.00863002147525549, 0.00863002147525549, 0.03243584930896759, 0.00863002147525549, 0.00863002147525549],[0.0030216241721063852, 0.0030216241721063852, 0.04043617099523544, 0.6609371304512024, 0.0030216241721063852, 0.0003133043646812439, 0.08518669009208679, 0.0005507816094905138, 0.00046091777039691806, 0.00046091777039691806, 0.0005507816094905138, 0.054753538221120834, 0.00046091777039691806, 0.00046091777039691806, 0.08518669009208679, 0.00018985373026225716, 0.0030216241721063852, 0.00018985373026225716, 0.0030216241721063852, 0.054753538221120834],[0.038889672607183456, 0.22373434901237488, 0.058884844183921814, 0.006816272623836994, 0.1195456013083458, 0.05207190290093422, 5.73707147850655e-05, 0.038889672607183456, 0.22373434901237488, 0.058884844183921814, 0.006816272623836994, 0.1195456013083458, 0.05207190290093422, 5.73707147850655e-05],[0.2746198773384094, 0.23665404319763184, 0.2746198773384094, 0.027614543214440346, 0.0010471217101439834, 0.019887087866663933, 0.02453566901385784, 0.02453566901385784, 0.0010471217101439834, 0.013860118575394154, 0.013860118575394154, 0.016793662682175636, 0.0020280852913856506, 0.013860118575394154, 0.026741676032543182, 0.0005748842377215624, 0.013860118575394154, 0.013860118575394154],[0.0018069074722006917, 0.0018069074722006917, 0.08679474145174026, 0.0032911880407482386, 0.06250672042369843, 0.07711759209632874, 0.07711759209632874, 0.0032911880407482386, 0.052783843129873276, 0.08405125141143799, 0.0018069074722006917, 0.043563470244407654, 3.77055948774796e-05, 0.11787812411785126, 0.06250672042369843, 0.023700864985585213, 0.023700864985585213, 0.0032911880407482386, 0.043563470244407654, 0.052783843129873276, 0.043563470244407654, 0.08405125141143799, 0.0018069074722006917, 0.043563470244407654],[0.0006713652983307838, 0.021964576095342636, 0.0006713652983307838, 6.961216422496364e-05, 0.01892736740410328, 0.0001223765139002353, 0.00010240983829135075, 0.00010240983829135075, 0.01892736740410328, 0.033153217285871506, 0.00018246423860546201, 0.00018246423860546201, 0.4071895182132721, 1.8629312762641348e-05, 0.0001223765139002353, 0.4449421465396881, 0.00010240983829135075, 0.00010240983829135075, 0.01892736740410328, 0.033153217285871506, 0.00018246423860546201, 0.00018246423860546201]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>