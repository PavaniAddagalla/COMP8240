
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["<unk> <unk>","dir","isbn","mhz iisi","commodore cdtv","autodesk bbs","unsubscribe","unsubscribe","lou gehrig <unk>","deleted","polysyllabic polysyllabic","mjones donald aix kingston ibm com","ken","<unk> jeremy scott noonan","david","italy sweden canada sweden russia italy","apr <unk> ists <unk> <unk> ists","<unk> <unk> umcc umcc umich edu dlc umcc umcc umich edu david","compuserve com","bill mcd","pierre turgeon islanders","<unk> phones","exit","dino ciccarelli ray sheppard","dancing <unk>","posted","test","test","ernest <unk> <unk> sage purdue edu <unk> sage <unk>","dreams","please subscrive","please subscrive","cheek","career mattingly","jesus peace","comp graphics faq","fox <unk> dave feustel nmyi feustel netcom com","shut andi","fuhr rings <unk> errey bob rings","xli xloadimage imagemagick export lcs mit edu contrib","alt law enforcement","secrecy lds ceremonies clh","mistake","<unk> <unk> project arizona","<unk> order","ultimate <unk>","objects ufos","bullshit","liar cheat <unk>","caching drive"];
var att_heads = [0,9,9,9,9,9,7,7,9,6,0,9,9,9,9,9,9,9,9,5,9,9,7,9,9,6,5,5,9,9,8,8,5,9,9,9,9,8,1,0,9,9,5,9,5,5,9,9,5,7];
var trigram_weights = [[0.5, 0.5],[0.18410949409008026],[0.5413619875907898],[0.4733335077762604, 0.5266664624214172],[0.5060580372810364, 0.4939419627189636],[0.37177154421806335, 0.628228485584259],[0.0007827238296158612],[0.00622766837477684],[0.2632049322128296, 0.24559836089611053, 0.24559836089611053],[0.15226489305496216],[0.5, 0.5],[0.11535608023405075, 0.2882208228111267, 0.11263284832239151, 0.19707152247428894, 0.19337232410907745, 0.09334635734558105],[0.726716160774231],[0.08172187954187393, 0.2135477364063263, 0.21439911425113678, 0.08172187954187393],[0.6019058227539062],[0.14596666395664215, 0.15058931708335876, 0.2484864741563797, 0.15058931708335876, 0.15840159356594086, 0.14596666395664215],[0.1499730944633484, 0.10464557260274887, 0.2680450677871704, 0.10464557260274887, 0.10464557260274887, 0.2680450677871704],[0.08414818346500397, 0.08414818346500397, 0.08414818346500397, 0.08414818346500397, 0.05841865763068199, 0.05331936478614807, 0.06025728955864906, 0.08414818346500397, 0.08414818346500397, 0.05841865763068199, 0.05331936478614807, 0.12722939252853394],[0.6619477272033691, 0.33805227279663086],[0.8279482126235962, 0.1720518171787262],[0.3060492277145386, 0.16089275479316711, 0.372165322303772],[0.21478210389614105, 0.3556537330150604],[0.12794183194637299],[0.23232869803905487, 0.12512390315532684, 0.4127194285392761, 0.1047041192650795],[0.6824945211410522, 0.31750547885894775],[0.4163134694099426],[0.2106192260980606],[0.2106192260980606],[0.12111596018075943, 0.06683265417814255, 0.06683265417814255, 0.24467894434928894, 0.07984790205955505, 0.04234761372208595, 0.06683265417814255, 0.24467894434928894, 0.06683265417814255],[0.6822600960731506],[0.20945782959461212, 0.7905421257019043],[0.20945782959461212, 0.7905421257019043],[0.023949872702360153],[0.7930226922035217, 0.20697738230228424],[0.4515860974788666, 0.548413872718811],[0.33877184987068176, 0.3575100302696228, 0.14460410177707672],[0.1772347390651703, 0.09872086346149445, 0.15055492520332336, 0.09872086346149445, 0.09872086346149445, 0.09872086346149445, 0.09872086346149445, 0.07988511770963669],[0.534920871257782, 0.4650791585445404],[0.009293566457927227, 0.04907600209116936, 0.28589096665382385, 0.28589096665382385, 0.03488146513700485, 0.04907600209116936],[0.007174092810600996, 0.2972075045108795, 0.009603790938854218, 0.046608347445726395, 0.2972075045108795, 0.018928512930870056, 0.003819313831627369, 0.022243371233344078],[0.03469253331422806, 0.6377171277999878, 0.147107794880867],[0.40881702303886414, 0.15826338529586792, 0.2800593972206116, 0.15286020934581757],[0.3381580412387848],[0.15087532997131348, 0.15087532997131348, 0.4156118929386139, 0.13176210224628448],[0.7059964537620544, 0.29400354623794556],[0.19893576204776764, 0.8010641932487488],[0.5411223769187927, 0.45887765288352966],[0.7853617072105408],[0.0600750558078289, 0.13235561549663544, 0.4037846326828003],[0.2565709948539734, 0.7434290647506714]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>