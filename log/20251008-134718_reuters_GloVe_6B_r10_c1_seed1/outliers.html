
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["apr apr","apr apr","apr apr","walgreen qtr shr cts cts walgreen qtr shr cts cts","oct oct","oct oct","oct oct","oct oct","oct oct","jun jun","jun jun","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","ford raises qtly payout cts shr cts ford raises qtly payout cts shr cts","bancorp usbc qtr net shr cts cts net mln mln avg shrs mln mln","napa valley bancorp <unk> qtr net shr cts cts net","rio tinto zinc corp plc pretax profit mln stg mln rio tinto zinc corp plc pretax profit mln stg mln","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","rowe furniture corp rowe qtr feb shr cts cts net revs mln mln","tandy corp <unk> qtr sept net shr cts cts net mln mln revs mln mln avg shrs mln mln","<unk> corp <unk> qtr sept net shr cts cts net revs mln mln avg shrs mln mln","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","<unk> corp <unk> qtr mar shr cts cts net revs mln mln","permian raises crude oil postings cts bbl wti dlrs permian raises crude oil postings cts bbl wti dlrs","marathon raises crude oil postings cts bbl wti dlrs marathon raises crude oil postings cts bbl wti dlrs","roto rooter inc roto qtr net shr cts cts net revs mln","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","<unk> corp <unk> qtr sept loss shr loss cts loss cts net loss loss revs mln mln","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","<unk> microsystems inc <unk> qtr loss shr loss cts loss cts net loss loss revs avg shrs","raytheon <unk> qtr net shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","westinghouse electric corp qtr shr dlrs cts westinghouse electric corp qtr shr dlrs cts","<unk> bancorp <unk> qtr net shr cts cts net loans mln mln deposits billion mln assets billion billion","imperial oil raises crude oil postings canadian cts bbl light sweet imperial oil raises crude oil postings canadian cts bbl light sweet","ohio edison <unk> qtr net shr cts cts net mln mln revs mln mln avg shrs mln mln mths shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","<unk> <unk> <unk> qtr net shr cts cts net sales mln mln avg shrs","centerre bancorp ctbc qtr net shr cts dlrs net loans billion billion deposits billion billion assets billion billion","petro canada raises crude postings cts canadian bbl sweet crude dlrs canadian bbl petro canada raises crude postings cts canadian bbl sweet crude dlrs canadian bbl","<unk> acquire prince mln dlrs <unk> acquire prince mln dlrs","deposit guaranty corp <unk> qtr net shr dlrs dlrs shr diluted dlrs dlrs net","<unk> corp <unk> qtr net shr cts cts net loans mln mln deposits mln mln assets mln mln","shell canada raises crude oil posting canadian cts bbl shell canada raises crude oil posting canadian cts bbl","ncr corp ncr qtr net shr cts cts net mln mln revs billion mln avg shrs mln mln","<unk> corp ohio <unk> qtr net shr cts cts net","basin pipeline texas okla border washed floods bpd crude affected basin pipeline texas okla border washed floods bpd crude affected","gte corp gte qtr mar shr cts cts net mln mln revs billion billion avg shrs mln mln","quaker oats oat qtr sept net shr cts cts net mln mln sales billion mln avg shrs"];
var att_heads = [3,3,3,3,3,3,3,3,3,5,5,3,3,3,3,2,2,2,3,2,2,3,3,3,3,3,2,2,3,2,3,3,3,2,3,2,2,2,2,2,2,2,3,3,2,3,3,2,3,2];
var trigram_weights = [[0.4468114674091339, 0.4468114674091339],[0.4468114674091339, 0.4468114674091339],[0.4468114674091339, 0.4468114674091339],[0.052651990205049515, 0.16321836411952972, 0.016566438600420952, 0.13327167928218842, 0.13327167928218842, 0.052651990205049515, 0.16321836411952972, 0.016566438600420952, 0.13327167928218842, 0.13327167928218842],[0.48824217915534973, 0.48824217915534973],[0.48824217915534973, 0.48824217915534973],[0.48824217915534973, 0.48824217915534973],[0.48824217915534973, 0.48824217915534973],[0.48824217915534973, 0.48824217915534973],[0.1989538073539734, 0.1989538073539734],[0.1989538073539734, 0.1989538073539734],[0.005992860067635775, 0.466461718082428, 0.010065454058349133, 0.0010216301307082176, 0.008218683302402496, 0.008218683302402496, 0.005992860067635775, 0.466461718082428, 0.010065454058349133, 0.0010216301307082176, 0.008218683302402496, 0.008218683302402496],[0.008113406598567963, 0.4744260609149933, 0.006380298640578985, 0.0006475917180068791, 0.005209665279835463, 0.005209665279835463, 0.008113406598567963, 0.4744260609149933, 0.006380298640578985, 0.0006475917180068791, 0.005209665279835463, 0.005209665279835463],[0.029653413221240044, 0.44412046670913696, 0.009583367966115475, 0.0009726989665068686, 0.007825048640370369, 0.007825048640370369, 0.029653413221240044, 0.44412046670913696, 0.009583367966115475, 0.0009726989665068686, 0.007825048640370369, 0.007825048640370369],[0.01826530136168003, 0.45487359166145325, 0.009815402328968048, 0.000996250193566084, 0.008014509454369545, 0.008014509454369545, 0.01826530136168003, 0.45487359166145325, 0.009815402328968048, 0.000996250193566084, 0.008014509454369545, 0.008014509454369545],[0.01791149377822876, 0.4336031675338745, 0.00021862050925847143, 0.0482202023267746, 5.262951617623912e-06, 3.606219252105802e-05, 5.262951617623912e-06, 0.01791149377822876, 0.4336031675338745, 0.00021862050925847143, 0.0482202023267746, 5.262951617623912e-06, 3.606219252105802e-05, 5.262951617623912e-06],[0.0009100985480472445, 7.857909622543957e-06, 0.01074562780559063, 0.08205507695674896, 6.050135925761424e-05, 8.829628313833382e-06, 8.829628313833382e-06, 0.08205507695674896, 0.2059406042098999, 0.2059406042098999, 1.9004619389306754e-05, 0.0003667786077130586, 0.2059406042098999, 0.2059406042098999],[0.0027911202050745487, 0.18055172264575958, 0.004191718529909849, 0.0016893035499379039, 0.04949204996228218, 0.37792807817459106, 0.0002786561381071806, 4.0667393477633595e-05, 4.0667393477633595e-05, 0.37792807817459106],[0.00034548062831163406, 0.007227430585771799, 0.00043991112033836544, 0.3797582983970642, 0.04701709747314453, 0.00192896684166044, 0.024635091423988342, 0.012968502938747406, 0.0127106923609972, 0.012968502938747406, 0.00034548062831163406, 0.007227430585771799, 0.00043991112033836544, 0.3797582983970642, 0.04701709747314453, 0.00192896684166044, 0.024635091423988342, 0.012968502938747406, 0.0127106923609972, 0.012968502938747406],[0.000707537867128849, 0.0032406141981482506, 1.8245698811369948e-05, 0.24793384969234467, 0.24793384969234467, 0.000707537867128849, 0.0032406141981482506, 1.8245698811369948e-05, 0.24793384969234467, 0.24793384969234467],[0.0005526379100047052, 0.006268942728638649, 0.05705830827355385, 0.4357050657272339, 0.00032125660800375044, 4.688455373980105e-05, 4.688455373980105e-05, 0.0005526379100047052, 0.006268942728638649, 0.05705830827355385, 0.4357050657272339, 0.00032125660800375044, 4.688455373980105e-05, 4.688455373980105e-05],[0.00912463665008545, 0.0012961773900315166, 0.854727029800415, 0.00912463665008545, 0.01844356209039688, 0.015283470042049885, 0.0018719967920333147, 0.015059608034789562, 0.015059608034789562, 0.001545397681184113, 8.716313459444791e-05, 0.029188379645347595, 0.029188379645347595],[0.01635769009590149, 0.7708176374435425, 6.928375660208985e-05, 0.016632938757538795, 0.005152292549610138, 0.0013936845352873206, 0.0016882210038602352, 0.01358119212090969, 0.01358119212090969, 0.0013936845352873206, 0.026322929188609123, 0.026322929188609123, 7.860624464228749e-05, 0.026322929188609123, 0.026322929188609123, 0.0011773139704018831, 6.928375660208985e-05, 0.026322929188609123, 0.026322929188609123],[7.441893103532493e-05, 0.8279491066932678, 7.441893103532493e-05, 0.01786573976278305, 0.0055341701954603195, 0.0014969815965741873, 0.0018133486155420542, 0.01458780188113451, 0.01458780188113451, 0.0014969815965741873, 8.443238766631112e-05, 0.028273930773139, 0.028273930773139, 0.0012645740061998367, 7.441893103532493e-05, 0.028273930773139, 0.028273930773139],[7.493396697100252e-05, 0.8336791396141052, 7.493396697100252e-05, 0.01798938401043415, 0.0015073418617248535, 0.0018258984200656414, 0.014688760973513126, 0.014688760973513126, 0.0015073418617248535, 0.02846960909664631, 0.02846960909664631, 8.501671982230619e-05, 0.02846960909664631, 0.02846960909664631],[7.899689808255062e-05, 0.8788813948631287, 7.899689808255062e-05, 0.018964771181344986, 0.007316574454307556, 0.0019248988246545196, 0.015485187992453575, 0.015485187992453575, 0.0015890701906755567, 8.962634456111118e-05, 0.03001323528587818, 0.03001323528587818],[0.00046955375000834465, 0.20186999440193176, 0.022386444732546806, 0.0466931015253067, 0.0004143193073105067, 2.4502417090843664e-06, 1.2824031728086993e-05, 8.593357051722705e-06, 0.22814269363880157, 0.00046955375000834465, 0.20186999440193176, 0.022386444732546806, 0.0466931015253067, 0.0004143193073105067, 2.4502417090843664e-06, 1.2824031728086993e-05, 8.593357051722705e-06, 0.22814269363880157],[0.001187543268315494, 0.20157983899116516, 0.02235426940023899, 0.04662599042057991, 0.0004137238138355315, 2.4467201455991017e-06, 1.2805599908460863e-05, 8.581006113672629e-06, 0.22781479358673096, 0.001187543268315494, 0.20157983899116516, 0.02235426940023899, 0.04662599042057991, 0.0004137238138355315, 2.4467201455991017e-06, 1.2805599908460863e-05, 8.581006113672629e-06, 0.22781479358673096],[0.006178270559757948, 0.009650805965065956, 0.9222587943077087, 0.006178270559757948, 0.012402958236634731, 0.001039251685142517, 0.0012588835088536143, 0.010127310641109943, 0.010127310641109943, 0.001039251685142517, 5.8615609304979444e-05, 0.019628653302788734],[0.009579457342624664, 0.0004883573274128139, 0.003180566942319274, 1.7907612345879897e-05, 0.24333973228931427, 0.24333973228931427, 0.009579457342624664, 0.0004883573274128139, 0.003180566942319274, 1.7907612345879897e-05, 0.24333973228931427, 0.24333973228931427],[7.910947169875726e-05, 0.8801338076591492, 7.910947169875726e-05, 0.018991796299815178, 0.0058829826302826405, 1.959585461008828e-05, 0.0019276419188827276, 1.959585461008828e-05, 0.015507254749536514, 1.959585461008828e-05, 0.015507254749536514, 0.0015913347015157342, 1.959585461008828e-05, 1.959585461008828e-05, 8.975405944511294e-05, 0.030056005343794823, 0.030056005343794823],[0.009924866259098053, 0.47058606147766113, 0.010154450312256813, 5.400676855060738e-06, 0.001030663144774735, 7.20315119906445e-06, 0.008291350677609444, 0.009924866259098053, 0.47058606147766113, 0.010154450312256813, 5.400676855060738e-06, 0.001030663144774735, 7.20315119906445e-06, 0.008291350677609444],[5.111981226946227e-05, 0.05172397568821907, 0.9125451445579529, 5.111981226946227e-05, 0.012272324413061142, 1.2662661902140826e-05, 0.0012456243857741356, 1.2662661902140826e-05, 0.010020645335316658, 1.2662661902140826e-05, 0.010020645335316658, 0.0010283058509230614, 1.2662661902140826e-05, 1.2662661902140826e-05, 5.799824430141598e-05, 0.000868660572450608, 5.111981226946227e-05],[0.0005117275286465883, 7.999975059647113e-05, 0.0023437777999788523, 0.017897404730319977, 1.3196221516409423e-05, 0.1793184131383896, 0.1793184131383896, 0.017897404730319977, 0.04491863772273064, 0.04491863772273064, 2.1128737444087164e-06, 0.2114294320344925, 0.2114294320344925, 4.1451821743976325e-06, 7.999975059647113e-05, 0.04491863772273064, 0.04491863772273064],[0.02044735662639141, 0.02132955752313137, 0.44000551104545593, 0.009494573809206486, 0.0009636864997446537, 6.735061560902977e-06, 0.007752545643597841, 0.02044735662639141, 0.02132955752313137, 0.44000551104545593, 0.009494573809206486, 0.0009636864997446537, 6.735061560902977e-06, 0.007752545643597841],[7.714685489190742e-05, 0.00019142674864269793, 7.714685489190742e-05, 0.002260195557028055, 0.017259161919355392, 1.2725627129839268e-05, 1.8571922737464774e-06, 1.8571922737464774e-06, 0.017259161919355392, 0.053955718874931335, 0.043316781520843506, 0.043316781520843506, 0.05070476606488228, 0.20388957858085632, 0.043316781520843506, 0.11657976359128952, 0.20388957858085632, 0.20388957858085632],[0.0023885397240519524, 0.05205939710140228, 0.2250703126192093, 0.024959253147244453, 0.05205939710140228, 0.0004619357641786337, 0.0174397099763155, 2.731839231273625e-06, 1.4297852430900093e-05, 0.12220077961683273, 0.0032869589049369097, 0.0023885397240519524, 0.05205939710140228, 0.2250703126192093, 0.024959253147244453, 0.05205939710140228, 0.0004619357641786337, 0.0174397099763155, 2.731839231273625e-06, 1.4297852430900093e-05, 0.12220077961683273, 0.0032869589049369097],[0.014189682900905609, 0.0003756740770768374, 6.124303763499483e-05, 0.0017942572012543678, 0.013701205141842365, 1.0102238775289152e-05, 1.474330815653957e-06, 1.474330815653957e-06, 0.013701205141842365, 0.03438705950975418, 0.03438705950975418, 1.6174899428733625e-06, 0.03438705950975418, 0.03438705950975418, 3.1733043215353973e-06, 6.124303763499483e-05, 0.03438705950975418, 0.03438705950975418, 6.124303763499483e-05, 1.0102238775289152e-05, 0.13727541267871857, 0.13727541267871857, 0.013701205141842365, 0.03438705950975418, 0.03438705950975418, 1.6174899428733625e-06, 0.16185760498046875, 0.16185760498046875, 3.1733043215353973e-06, 6.124303763499483e-05, 0.03438705950975418, 0.03438705950975418],[0.00035962031688541174, 0.00035962031688541174, 0.00035962031688541174, 0.010535907931625843, 0.08045362681150436, 5.932051863055676e-05, 8.657311809656676e-06, 8.657311809656676e-06, 0.08045362681150436, 0.4231804609298706, 0.20192129909992218, 0.20192129909992218, 1.8633711079019122e-05, 0.00035962031688541174],[4.662455467041582e-05, 0.0001156908692792058, 4.662455467041582e-05, 0.0013659740798175335, 0.01043076440691948, 7.690872735111043e-06, 1.122414687415585e-06, 0.10450834035873413, 0.01043076440691948, 0.03260873258113861, 0.12322291731834412, 0.12322291731834412, 0.03064398281276226, 0.12322291731834412, 0.12322291731834412, 0.07045625895261765, 0.12322291731834412, 0.12322291731834412],[4.806860829376092e-07, 0.030489284545183182, 0.18604004383087158, 0.02063101716339588, 0.00038183003198355436, 2.2581023131351685e-06, 0.014415455982089043, 1.1818416169262491e-05, 0.0027169568929821253, 0.02063101716339588, 0.2102525383234024, 0.014415455982089043, 1.1818416169262491e-05, 4.806860829376092e-07, 0.030489284545183182, 0.18604004383087158, 0.02063101716339588, 0.00038183003198355436, 2.2581023131351685e-06, 0.014415455982089043, 1.1818416169262491e-05, 0.0027169568929821253, 0.02063101716339588, 0.2102525383234024, 0.014415455982089043, 1.1818416169262491e-05],[9.93302310234867e-05, 0.22081294655799866, 0.0005188928334973752, 0.055772408843040466, 0.22264745831489563, 9.93302310234867e-05, 0.22081294655799866, 0.0005188928334973752, 0.055772408843040466, 0.22264745831489563],[0.00014032061153557152, 0.02766343764960766, 0.9437731504440308, 8.482960402034223e-05, 0.020365025848150253, 0.0017063985578715801, 0.002067022956907749, 1.444611552869901e-05, 1.444611552869901e-05, 0.002067022956907749, 0.00036873272620141506, 1.444611552869901e-05, 1.444611552869901e-05, 0.0017063985578715801],[6.812500214437023e-05, 0.7579258680343628, 6.812500214437023e-05, 0.01635475642979145, 0.0013703753938898444, 0.001659985864534974, 0.013354048132896423, 0.013354048132896423, 0.0013703753938898444, 8.582961891079322e-05, 0.02588268183171749, 0.02588268183171749, 1.8193079085904174e-05, 0.02588268183171749, 0.02588268183171749, 0.0390741229057312, 0.02588268183171749, 0.02588268183171749],[0.0067109158262610435, 0.03439062088727951, 0.20984549820423126, 0.02327089197933674, 0.048537854105234146, 0.16096831858158112, 0.01626000553369522, 2.5470449145359453e-06, 1.3330678484635428e-05, 0.0067109158262610435, 0.03439062088727951, 0.20984549820423126, 0.02327089197933674, 0.048537854105234146, 0.16096831858158112, 0.01626000553369522, 2.5470449145359453e-06, 1.3330678484635428e-05],[0.04875205457210541, 0.730161726474762, 0.04875205457210541, 0.015755653381347656, 0.0013201761757954955, 0.0015991776017472148, 0.01286486629396677, 0.01286486629396677, 0.0013201761757954955, 0.02493455447256565, 0.02493455447256565, 7.446024392265826e-05, 0.0006811344064772129, 0.02493455447256565, 0.0011152178049087524, 6.562946509802714e-05, 0.02493455447256565, 0.02493455447256565],[8.45258982735686e-05, 0.9403943419456482, 0.0002926528104580939, 8.45258982735686e-05, 0.020292116329073906, 0.0017002893146127462, 0.0020596226677298546, 0.016568997874855995, 0.016568997874855995, 0.0017002893146127462],[0.03940688073635101, 0.06099174916744232, 0.06815645843744278, 1.1709318670227731e-07, 0.15681092441082, 7.034656300675124e-05, 0.0010492604924365878, 0.0035202563740313053, 0.05264151841402054, 0.1171131506562233, 0.03940688073635101, 0.06099174916744232, 0.06815645843744278, 1.1709318670227731e-07, 0.15681092441082, 7.034656300675124e-05, 0.0010492604924365878, 0.0035202563740313053, 0.05264151841402054, 0.1171131506562233],[0.031136546283960342, 0.7754152417182922, 0.031136546283960342, 0.016732146963477135, 0.006455232389271259, 0.0016982905799522996, 0.01366219762712717, 0.01366219762712717, 0.0014019972877576947, 0.02647993341088295, 0.02647993341088295, 7.907510007498786e-05, 0.0007233493379317224, 0.0007233493379317224, 0.0011843361426144838, 6.969700916670263e-05, 0.02647993341088295, 0.02647993341088295],[0.0016244008438661695, 0.0001696323015494272, 1.7909660243731196e-07, 0.004885650705546141, 0.0006292056059464812, 0.0373074933886528, 2.7507781851454638e-05, 4.0145164348359685e-06, 4.0145164348359685e-06, 0.0373074933886528, 0.09363378584384918, 0.09363378584384918, 0.196234792470932, 0.4407287836074829, 0.09363378584384918, 8.64071353134932e-06, 0.00016676104860380292]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>