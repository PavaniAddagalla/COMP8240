
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["apr apr","apr apr","apr apr","oct oct","oct oct","oct oct","oct oct","oct oct","walgreen qtr shr cts cts walgreen qtr shr cts cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","jun jun","jun jun","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","<unk> corp <unk> qtr mar shr cts cts net revs mln mln","roto rooter inc roto qtr net shr cts cts net revs mln","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","<unk> corp <unk> qtr sept net shr cts cts net revs mln mln avg shrs mln mln","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","westinghouse electric corp qtr shr dlrs cts westinghouse electric corp qtr shr dlrs cts","bancorp <unk> qtr net shr cts cts net mln mln avg shrs mln mln","rio tinto zinc corp plc pretax profit mln stg mln rio tinto zinc corp plc pretax profit mln stg mln","tandy corp <unk> qtr sept net shr cts cts net mln mln revs mln mln avg shrs mln mln","ford raises qtly payout cts shr cts ford raises qtly payout cts shr cts","trump interstate properties talks acquire alexanders trump interstate properties talks acquire alexanders","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","napa valley bancorp <unk> qtr net shr cts cts net","ncr corp ncr qtr net shr cts cts net mln mln revs billion mln avg shrs mln mln","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","permian raises crude oil postings cts bbl wti dlrs permian raises crude oil postings cts bbl wti dlrs","gte corp gte qtr mar shr cts cts net mln mln revs billion billion avg shrs mln mln","usair buy pct mln piedmont shares tendered usair buy pct mln piedmont shares tendered","<unk> microsystems inc <unk> qtr loss shr loss cts loss cts net loss loss revs avg shrs","<unk> corp <unk> qtr sept loss shr loss cts loss cts net loss loss revs mln mln","<unk> bancorp inc <unk> qtr net shr dlrs dlrs net avg shrs","<unk> corp <unk> qtr net shr cts cts net loans mln mln deposits mln mln assets mln mln","<unk> corp <unk> qtr net shr dlrs dlr net","<unk> inc <unk> qtr sept loss shr loss cts profit cts shr net loss profit revs mln mln","<unk> corp ohio <unk> qtr net shr cts cts net","rowe furniture corp rowe qtr feb shr cts cts net revs mln mln","dominion resources inc qtr net shr dlrs dlrs net mln mln revs mln mln avg shrs mln mln mths shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","dominion resources inc qtr net shr dlrs dlrs net mln mln revs mln mln avg shrs mln mln mths shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","marathon raises crude oil postings cts bbl wti dlrs marathon raises crude oil postings cts bbl wti dlrs","irving bank corp qtr shr dlrs dlrs irving bank corp qtr shr dlrs dlrs","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","whirlpool corp <unk> qtr net shr cts cts net sales mln mln avg shrs","<unk> savings bank <unk> qtr net shr cts cts net avg shrs","neworld bank savings <unk> qtr net oper shr cts cts oper net note net excludes dlr tax credit"];
var att_heads = [0,0,0,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];
var trigram_weights = [[0.13828524947166443, 0.13828524947166443],[0.13828524947166443, 0.13828524947166443],[0.13828524947166443, 0.13828524947166443],[0.07514765113592148, 0.07514765113592148],[0.07514765113592148, 0.07514765113592148],[0.07514765113592148, 0.07514765113592148],[0.07514765113592148, 0.07514765113592148],[0.07514765113592148, 0.07514765113592148],[0.0025441001635044813, 0.4447486102581024, 0.003542139893397689, 0.016965949907898903, 0.016965949907898903, 0.0025441001635044813, 0.4447486102581024, 0.003542139893397689, 0.016965949907898903, 0.016965949907898903],[0.015494613908231258, 0.007488435599952936, 0.43536311388015747, 0.0034673905465751886, 0.016607919707894325, 0.016607919707894325, 0.015494613908231258, 0.007488435599952936, 0.43536311388015747, 0.0034673905465751886, 0.016607919707894325, 0.016607919707894325],[0.47338834404945374, 0.47338834404945374],[0.47338834404945374, 0.47338834404945374],[0.009372329339385033, 0.007583060767501593, 0.4408644437789917, 0.0035112048499286175, 0.01681778021156788, 0.01681778021156788, 0.009372329339385033, 0.007583060767501593, 0.4408644437789917, 0.0035112048499286175, 0.01681778021156788, 0.01681778021156788],[0.0019843317568302155, 0.0006562586640939116, 0.4539293050765991, 0.0036152582615613937, 0.017316168174147606, 0.017316168174147606, 0.0019843317568302155, 0.0006562586640939116, 0.4539293050765991, 0.0036152582615613937, 0.017316168174147606, 0.017316168174147606],[0.009348763152956963, 0.007583425845950842, 0.44088566303253174, 0.00351137388497591, 0.016818588599562645, 0.016818588599562645, 0.009348763152956963, 0.007583425845950842, 0.44088566303253174, 0.00351137388497591, 0.016818588599562645, 0.016818588599562645],[0.007310518994927406, 0.005506832618266344, 0.007310518994927406, 0.3201565444469452, 0.0032273277174681425, 0.002549843629822135, 0.012213102541863918, 0.012213102541863918, 0.5644546747207642, 0.00778410816565156, 0.024981394410133362, 0.024981394410133362],[0.0011354804737493396, 0.000140579097205773, 0.00030446337768808007, 0.0011354804737493396, 0.21059508621692657, 0.3712914288043976, 0.0016772561939433217, 0.008033630438148975, 0.008033630438148975, 0.3712914288043976, 0.005120291840285063, 0.01643245853483677],[0.00030812612385489047, 0.004604090470820665, 0.26767289638519287, 0.0014766023959964514, 0.0021318444050848484, 0.20748335123062134, 0.010210992768406868, 0.00030812612385489047, 0.004604090470820665, 0.26767289638519287, 0.0014766023959964514, 0.0021318444050848484, 0.20748335123062134, 0.010210992768406868],[0.004499069415032864, 0.003389037447050214, 0.004499069415032864, 0.19703204929828644, 0.008210080675780773, 0.34737899899482727, 0.0015692352317273617, 0.0075162374414503574, 0.0075162374414503574, 0.34737899899482727, 0.004790527746081352, 0.015374151058495045, 0.015374151058495045, 0.00022476850426755846, 0.004499069415032864, 0.015374151058495045, 0.015374151058495045],[0.004558023065328598, 0.0034334457013756037, 0.004558023065328598, 0.19961385428905487, 0.3519308567047119, 0.0015897976700216532, 0.007614726200699806, 0.007614726200699806, 0.3519308567047119, 0.015575606375932693, 0.015575606375932693, 0.004853300284594297, 0.015575606375932693, 0.015575606375932693],[0.0041377954185009, 0.36167025566101074, 0.0012554926797747612, 0.07299190759658813, 0.0005813341704197228, 0.056578777730464935, 0.002784443087875843, 0.0041377954185009, 0.36167025566101074, 0.0012554926797747612, 0.07299190759658813, 0.0005813341704197228, 0.056578777730464935, 0.002784443087875843],[0.0007526233093813062, 0.004591596312820911, 0.20108415186405182, 0.35452309250831604, 0.001601507654413581, 0.007670814637094736, 0.007670814637094736, 0.35452309250831604, 0.015690332278609276, 0.015690332278609276, 0.000229391036555171, 0.004591596312820911, 0.015690332278609276, 0.015690332278609276],[0.015093746595084667, 0.0012853901134803891, 0.024597803130745888, 0.0016483477083966136, 0.005959331523627043, 0.13284581899642944, 0.3012928366661072, 0.007477624341845512, 0.00013326562475413084, 0.007477624341845512, 0.015093746595084667, 0.0012853901134803891, 0.024597803130745888, 0.0016483477083966136, 0.005959331523627043, 0.13284581899642944, 0.3012928366661072, 0.007477624341845512, 0.00013326562475413084, 0.007477624341845512],[0.000251227174885571, 0.0032871130388230085, 0.004363761283457279, 0.19110636413097382, 0.007963164709508419, 0.33693167567253113, 0.0015220409259200096, 0.007290188688784838, 0.007290188688784838, 0.33693167567253113, 0.014911778271198273, 0.014911778271198273, 0.004646454006433487, 0.014911778271198273, 0.014911778271198273, 0.0002180086448788643, 0.004363761283457279, 0.014911778271198273, 0.014911778271198273],[0.15930628776550293, 0.27995002269744873, 0.00046766578452661633, 0.05808265507221222, 0.0007812919793650508, 0.00016311764193233103, 0.0007812919793650508, 0.15930628776550293, 0.27995002269744873, 0.00046766578452661633, 0.05808265507221222, 0.0007812919793650508, 0.00016311764193233103, 0.0007812919793650508],[0.01411599200218916, 0.010831186547875404, 0.4466508626937866, 0.0009871302172541618, 0.025979574769735336, 1.9168595827068202e-05, 0.01411599200218916, 0.010831186547875404, 0.4466508626937866, 0.0009871302172541618, 0.025979574769735336, 1.9168595827068202e-05],[0.02401863969862461, 0.1068543940782547, 0.0010381562169641256, 9.840713755693287e-05, 1.1346317478455603e-05, 0.18999190628528595, 0.176812544465065, 0.02401863969862461, 0.1068543940782547, 0.0010381562169641256, 9.840713755693287e-05, 1.1346317478455603e-05, 0.18999190628528595, 0.176812544465065],[0.006845902651548386, 0.19022402167320251, 0.0015150133986026049, 0.1474498212337494, 0.1474498212337494, 0.006845902651548386, 0.19022402167320251, 0.0015150133986026049, 0.1474498212337494, 0.1474498212337494],[0.012920508161187172, 0.15433689951896667, 0.0006623826338909566, 0.004041057080030441, 0.1769738644361496, 0.31201523542404175, 0.001409484539180994, 0.0067510721273720264, 0.0067510721273720264, 0.31201523542404175],[0.0034018096048384905, 0.002752372296527028, 0.0034018096048384905, 0.16001756489276886, 0.28212031722068787, 0.0012744383420795202, 0.006104235537350178, 0.006104235537350178, 0.28212031722068787, 0.012485960498452187, 0.012485960498452187, 0.0038905779365450144, 0.18254616856575012, 0.012485960498452187, 0.00018254344468005002, 0.0036538734566420317, 0.012485960498452187, 0.012485960498452187],[5.581249570241198e-05, 0.012795879505574703, 0.16972914338111877, 0.29924237728118896, 0.0013517849147319794, 0.006474705878645182, 0.006474705878645182, 5.581249570241198e-05, 0.012795879505574703, 0.16972914338111877, 0.29924237728118896, 0.0013517849147319794, 0.006474705878645182, 0.006474705878645182],[0.0019208091543987393, 0.4084146022796631, 0.04040155187249184, 0.016441907733678818, 0.004581340588629246, 0.0011398143833503127, 0.003853968344628811, 8.54540485306643e-05, 0.023160578683018684, 0.0019208091543987393, 0.4084146022796631, 0.04040155187249184, 0.016441907733678818, 0.004581340588629246, 0.0011398143833503127, 0.003853968344628811, 8.54540485306643e-05, 0.023160578683018684],[0.006369296927005053, 0.0030782357789576054, 0.006369296927005053, 0.17896263301372528, 0.0018040271243080497, 0.001425323891453445, 0.006826938595622778, 0.006826938595622778, 0.31552156805992126, 0.013964219018816948, 0.013964219018816948, 0.004351198207587004, 0.2041584849357605, 0.2041584849357605, 0.00020415543986018747, 0.004086468834429979, 0.013964219018816948, 0.013964219018816948],[0.004594174679368734, 0.27813035249710083, 0.04613523930311203, 0.028829365968704224, 0.003461024258285761, 0.13194327056407928, 0.006906586233526468, 0.004594174679368734, 0.27813035249710083, 0.04613523930311203, 0.028829365968704224, 0.003461024258285761, 0.13194327056407928, 0.006906586233526468],[0.0001511650625616312, 8.056568185565993e-05, 9.57089287112467e-06, 0.0001511650625616312, 0.00662011606618762, 0.19608764350414276, 5.2725023124367e-05, 0.19608764350414276, 0.00025253943749703467, 0.19608764350414276, 0.00025253943749703467, 0.011671650223433971, 0.19608764350414276, 0.19608764350414276, 0.00016095781757030636, 7.552038823632756e-06, 0.0001511650625616312],[0.0001509878202341497, 0.00011373538291081786, 0.0001509878202341497, 0.0066123534925282, 0.00027552866959013045, 0.1958577185869217, 5.266319931251928e-05, 0.1958577185869217, 0.00025224333512596786, 0.1958577185869217, 0.00025224333512596786, 0.011657964438199997, 0.1958577185869217, 0.1958577185869217, 0.00016076909378170967, 0.0005159532884135842, 0.0005159532884135842],[0.003693646052852273, 0.0006054373807273805, 0.00023386016255244613, 0.003693646052852273, 0.1617593616247177, 0.2851911783218384, 0.0012883106246590614, 0.12538577616214752, 0.12538577616214752, 0.2851911783218384, 0.00018453043594490737, 0.003693646052852273],[0.0030907453037798405, 0.002328181639313698, 0.0030907453037798405, 0.13535594940185547, 0.2386404573917389, 0.001078024273738265, 0.005163462366908789, 0.005163462366908789, 0.2386404573917389, 0.11826126277446747, 0.010561647824943066, 0.010561647824943066, 0.051179200410842896, 0.010561647824943066, 0.010561647824943066, 0.13463817536830902, 0.010561647824943066, 0.010561647824943066],[0.004153826739639044, 0.0031289744656533003, 0.004153826739639044, 0.18191248178482056, 0.3207223415374756, 0.0014488175511360168, 0.1410072296857834, 0.0061349100433290005, 0.3207223415374756],[0.00023235644039232284, 1.471145969844656e-05, 0.00023235644039232284, 0.010175807401537895, 0.0004240134439896792, 0.301407128572464, 8.104385051410645e-05, 0.301407128572464, 0.0003881794400513172, 0.031992509961128235, 0.0003881794400513172, 8.104385051410645e-05, 0.017940541729331017, 0.301407128572464, 0.031992509961128235, 0.0002474089269526303, 0.0007940048817545176, 0.0007940048817545176],[0.003057439113035798, 0.0023030932061374187, 0.36509260535240173, 0.003057439113035798, 0.1338973492383957, 0.23606884479522705, 0.0010664074216037989, 0.005107820499688387, 0.005107820499688387, 0.23606884479522705],[0.000108179054223001, 0.021727360785007477, 0.005509912967681885, 0.000108179054223001, 0.32033562660217285, 0.0026700501330196857, 0.0025512699503451586, 0.012219933792948723, 0.012219933792948723, 0.5647704005241394, 0.007788462098687887, 0.024995367974042892, 0.024995367974042892],[0.003938508220016956, 0.011308960616588593, 0.00011268642265349627, 0.07794436812400818, 0.13742047548294067, 0.0006207774276845157, 0.06041761860251427, 0.06041761860251427, 0.13742047548294067, 0.006081896834075451, 0.006081896834075451, 0.001895096036605537, 0.006081896834075451, 0.006081896834075451, 8.891669858712703e-05, 0.001779797486960888, 0.006081896834075451, 0.006081896834075451, 0.001779797486960888, 0.0006207774276845157, 0.06041761860251427, 0.06041761860251427, 0.13742047548294067, 0.006081896834075451, 0.006081896834075451, 0.001895096036605537, 0.08891803026199341, 0.08891803026199341, 8.891669858712703e-05, 0.001779797486960888, 0.006081896834075451, 0.006081896834075451],[0.00395257817581296, 0.011349360458552837, 0.00011308897956041619, 0.07822281122207642, 0.13791139423847198, 0.0006229950813576579, 0.060633450746536255, 0.060633450746536255, 0.13791139423847198, 0.006103623192757368, 0.006103623192757368, 0.0019018660532310605, 0.006103623192757368, 0.006103623192757368, 8.923433779273182e-05, 0.0017861556261777878, 0.006103623192757368, 0.006103623192757368, 0.0017861556261777878, 0.0006229950813576579, 0.060633450746536255, 0.060633450746536255, 0.13791139423847198, 0.006103623192757368, 0.006103623192757368, 0.0019018660532310605, 0.08923567086458206, 0.08923567086458206, 8.923433779273182e-05, 0.0017861556261777878, 0.006103623192757368, 0.006103623192757368],[0.037861138582229614, 0.3789443075656891, 0.03748626261949539, 0.01525549590587616, 0.004250761121511459, 0.0010575678898021579, 0.0035758744925260544, 7.928787090349942e-05, 0.02148936316370964, 0.037861138582229614, 0.3789443075656891, 0.03748626261949539, 0.01525549590587616, 0.004250761121511459, 0.0010575678898021579, 0.0035758744925260544, 7.928787090349942e-05, 0.02148936316370964],[0.0006358539685606956, 0.1224059984087944, 0.0025175674818456173, 0.14636649191379547, 0.0011657160939648747, 0.1134541928768158, 0.1134541928768158, 0.0006358539685606956, 0.1224059984087944, 0.0025175674818456173, 0.14636649191379547, 0.0011657160939648747, 0.1134541928768158, 0.1134541928768158],[0.11611694097518921, 0.0016214799834415317, 0.14875978231430054, 0.0011847771238535643, 0.11530932039022446, 0.11530932039022446, 0.11611694097518921, 0.0016214799834415317, 0.14875978231430054, 0.0011847771238535643, 0.11530932039022446, 0.11530932039022446],[0.002649064641445875, 0.0021488387137651443, 0.0028526608366519213, 0.12492929399013519, 0.22025763988494873, 0.0009949825471267104, 0.00476571312174201, 0.00476571312174201, 0.22025763988494873, 0.39388713240623474, 0.009748068638145924, 0.009748068638145924, 0.00014251576794777066, 0.0028526608366519213],[0.0033975993283092976, 0.17580583691596985, 0.12443636357784271, 0.0033975993283092976, 0.14879430830478668, 0.2623330354690552, 0.0011850522132590413, 0.005676098633557558, 0.005676098633557558, 0.2623330354690552, 0.0001697402767604217, 0.0033975993283092976],[0.0014519111718982458, 0.053175944834947586, 0.07512787729501724, 0.0014519111718982458, 0.06358493119478226, 0.11210393160581589, 0.0003507627116050571, 0.0005064136348664761, 0.002425592392683029, 0.002425592392683029, 0.0003507627116050571, 0.11210393160581589, 0.2785121500492096, 0.11210393160581589, 0.06566525250673294, 0.0021443709265440702, 0.09231454133987427, 0.024200141429901123]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>