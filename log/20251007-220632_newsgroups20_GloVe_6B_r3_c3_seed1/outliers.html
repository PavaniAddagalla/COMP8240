
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["polysyllabic polysyllabic","apr <unk> ists <unk> <unk> ists","bullshit","dir","yep","unsubscribe","unsubscribe","autodesk bbs","commodore cdtv","<unk> <unk>","<unk>","isbn","ernest <unk> <unk> sage purdue edu <unk> sage <unk>","lou gehrig <unk>","mhz iisi","pierre turgeon islanders","abolish cults","ken","liar cheat <unk>","overall career mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly","secrecy lds ceremonies clh","deleted","dino ciccarelli ray sheppard","<unk> jeremy scott noonan","brandon wise <unk> nyx edu","article <unk> sys bison baden sys bison baden bari","dancing <unk>","xli xloadimage goto flag","compuserve com","dreams","okay okay forgot <unk>","gee forgotten nut","exit","career mattingly","comp graphics faq","consistently","article apr nmt edu erickson <unk> nmt edu alan erickson","joke","david","<unk> <unk> umcc umcc umich edu dlc umcc umcc umich edu david","<unk> file dis <unk> file tga","religious fanaticism","insult gregg resorts lies","jesus peace","inline inline correct","kent wife","bill mcd","kelly kisio captain rangers left san jose ali","grease <unk> cool rider","<unk> fantasy <unk> dear elf"];
var att_heads = [0,0,0,0,2,0,0,0,0,0,0,0,2,2,0,2,1,2,2,1,2,0,2,2,2,2,2,2,0,2,2,2,2,2,0,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2];
var trigram_weights = [[0.5, 0.5],[0.42112478613853455, 0.0201835036277771, 0.2591623067855835, 0.0201835036277771, 0.0201835036277771, 0.2591623067855835],[0.9446054100990295],[0.972156822681427],[0.9710684418678284],[0.983895480632782],[0.983895480632782],[0.12357988953590393, 0.8764201402664185],[0.9078735113143921, 0.04253753647208214],[0.25, 0.25],[0.5],[0.9912257790565491],[0.8652727603912354, 0.018629703670740128, 0.018629703670740128, 0.0173201784491539, 0.024676917120814323, 0.0008912305347621441, 0.018629703670740128, 0.0173201784491539, 0.018629703670740128],[0.9588720798492432, 0.03164597600698471, 0.004741014912724495],[0.9976346492767334, 0.00236529647372663],[0.08105749636888504, 0.06126929819583893, 0.8495885729789734],[0.999861478805542, 0.00013854957069270313],[0.9956516623497009],[0.7795209884643555, 0.2020212709903717, 0.009228876791894436],[0.9933428764343262, 0.005668977275490761, 8.234864799305797e-05, 8.234864799305797e-05, 8.234864799305797e-05, 8.234864799305797e-05, 8.234864799305797e-05, 8.234864799305797e-05, 8.234864799305797e-05, 8.234864799305797e-05, 8.234864799305797e-05, 8.234864799305797e-05, 8.234864799305797e-05, 8.234864799305797e-05],[0.9409279823303223, 0.0029072086326777935, 0.03067903034389019, 0.025485871359705925],[0.9984618425369263],[0.08454084396362305, 0.0026555468793958426, 0.5875967741012573, 0.31833571195602417],[0.0027942657470703125, 0.08657179772853851, 0.8897848129272461, 0.018054863438010216],[0.18879128992557526, 0.8093748092651367, 0.0017311983974650502, 1.9865472495439462e-05, 8.281923510367051e-05],[0.46526816487312317, 0.04217642918229103, 0.0002677802985999733, 0.0013728427002206445, 0.028335433453321457, 0.0002677802985999733, 0.0013728427002206445, 0.028335433453321457, 0.2217210829257965],[0.9982206225395203, 0.0017793820006772876],[0.0005565658211708069, 0.030589373782277107, 0.017572354525327682, 0.9206923246383667],[0.3189440071582794, 0.6810559630393982],[0.9981337189674377],[0.44901135563850403, 0.44901135563850403, 0.10065729171037674, 0.0013200925895944238],[0.24711325764656067, 0.7475334405899048, 0.0027514812536537647],[0.7759836316108704],[0.7136741280555725, 0.2863258719444275],[0.020523857325315475, 0.7725268602371216, 0.2061254382133484],[0.9990986585617065],[0.03390359878540039, 4.810226982954191e-06, 1.9957964468630962e-05, 0.000147026774357073, 0.015154743567109108, 0.003073351690545678, 1.9957964468630962e-05, 0.000147026774357073, 0.9293013215065002, 0.015154743567109108],[0.9979203343391418],[0.9936920404434204],[0.006037341430783272, 0.006037341430783272, 0.006037341430783272, 0.006037341430783272, 0.006037341430783272, 0.00028882184415124357, 6.237866182345897e-05, 0.006037341430783272, 0.006037341430783272, 0.006037341430783272, 0.00028882184415124357, 0.9510613083839417],[0.00040600477950647473, 0.46957793831825256, 0.006770058069378138, 0.00040600477950647473, 0.46957793831825256, 0.05326211079955101],[0.9847630858421326, 0.015236875042319298],[0.24203982949256897, 0.021278776228427887, 1.5596422599628568e-05, 0.7350257635116577],[0.26272523403167725, 0.7346066236495972],[4.563836409943178e-05, 4.563836409943178e-05, 0.9906717538833618],[0.033769458532333374, 0.966230571269989],[0.9856507182121277, 0.0013694769004359841],[0.08857902139425278, 0.000345364969689399, 0.06312693655490875, 0.05485031381249428, 0.14119139313697815, 0.011861217208206654, 0.021828051656484604, 0.6182176470756531],[0.012701543979346752, 0.0014780985657125711, 0.8986127972602844, 0.07981711626052856],[0.0006719880038872361, 0.0012971287360414863, 0.0006719880038872361, 0.9966521859169006, 3.472861499176361e-05]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>