
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["autodesk bbs","polysyllabic polysyllabic","dir","unsubscribe","unsubscribe","apr <unk> ists <unk> <unk> ists","bullshit","commodore cdtv","yep","mhz iisi","isbn","<unk> <unk>","lou gehrig <unk>","dino ciccarelli ray sheppard","compuserve com","pierre turgeon islanders","comp graphics faq","deleted","cheek","ken","ernest <unk> <unk> sage purdue edu <unk> sage <unk>","liar cheat <unk>","<unk> file dis <unk> file tga","xli xloadimage goto flag","<unk> jeremy scott noonan","posted","article <unk> sys bison baden sys bison baden bari","fox <unk> dave feustel nmyi feustel netcom com","xli xloadimage imagemagick export lcs mit edu contrib","caching drive","exit","mjones donald aix kingston ibm com","abolish cults","brandon wise <unk> nyx edu","<unk> <unk> umcc umcc umich edu dlc umcc umcc umich edu david","career mattingly","<unk> phones","flat engine","dancing <unk>","quoting dougb ecs comm mot com article apr <unk> comm mot com","david","overall career mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly","shut andi","grease <unk> cool rider","subscribe <unk> <unk> eve <unk>","dog thrust","bill mcd","fuhr rings <unk> errey bob rings","inline inline correct","grant fuhr rules"];
var att_heads = [1,1,2,0,0,1,0,2,0,2,1,0,0,2,0,2,2,1,0,0,1,0,2,2,2,2,1,2,2,2,2,2,1,0,2,2,2,2,0,1,2,2,2,0,2,0,2,0,0,2];
var trigram_weights = [[0.26246392726898193, 0.7375360131263733],[0.4995710849761963, 0.4995710849761963],[0.4061215817928314],[0.8604978322982788],[0.8604978322982788],[0.08144836127758026, 0.12823525071144104, 0.01045246422290802, 0.12823525071144104, 0.12823525071144104, 0.01045246422290802],[0.9928160905838013],[0.9998797178268433, 0.00012025221803924069],[0.9994113445281982],[0.9989264607429504, 0.0010734794195741415],[0.9961643218994141],[0.5, 0.5],[0.47554436326026917, 0.5231544375419617, 0.0006505873752757907],[0.001317085581831634, 1.187845555250533e-05, 0.9886512756347656, 0.005597512237727642],[0.024111108854413033, 0.9758888483047485],[0.6276589035987854, 0.0006713847396895289, 0.30772581696510315],[0.0012039189459756017, 0.940254271030426, 0.00024031625071074814],[0.7717538475990295],[0.9844769239425659],[0.9984350800514221],[6.917301789144403e-07, 5.376489207264967e-05, 5.376489207264967e-05, 0.4998914897441864, 1.108476368472111e-07, 1.2348676818874083e-06, 5.376489207264967e-05, 0.4998914897441864, 5.376489207264967e-05],[0.3406887352466583, 0.6553940773010254, 0.001958590466529131],[0.0011991946958005428, 0.49879592657089233, 8.960381819633767e-06, 0.0011991946958005428, 0.49879592657089233, 8.356029752576433e-07],[4.5856031647417694e-05, 0.01244858093559742, 7.785985508235171e-05, 0.9749791026115417],[0.0038134607020765543, 0.029029738157987595, 0.9631146192550659, 0.00022871534747537225],[0.9991356730461121],[0.9987443685531616, 0.0004715417162515223, 3.344592551002279e-05, 0.00032479953370057046, 1.4687373550259508e-05, 3.344592551002279e-05, 0.00032479953370057046, 1.4687373550259508e-05, 3.8261448935372755e-05],[0.37495243549346924, 0.012941286899149418, 0.12889137864112854, 0.00010623622074490413, 0.012941286899149418, 0.00010623622074490413, 0.00043561041820794344, 0.4696255922317505],[9.88580177363474e-06, 0.00268370658159256, 0.00268370658159256, 0.9879343509674072, 1.3392196706263348e-05, 0.0031926387455314398, 0.0007985312840901315, 0.00268370658159256],[2.4506512090738397e-06, 0.9999974966049194],[0.998128354549408],[0.0028127047698944807, 0.20886775851249695, 0.00046496637514792383, 0.23933281004428864, 0.44363898038864136, 0.10207007080316544],[0.010969026945531368, 0.9869042038917542],[0.16433687508106232, 0.8305908441543579, 0.0007063020602799952, 0.0033828038722276688, 0.00027692189905792475],[0.0022832199465483427, 0.0022832199465483427, 0.0022832199465483427, 0.0022832199465483427, 0.0022832199465483427, 0.00067936722189188, 0.0001654649240663275, 0.0022832199465483427, 0.0022832199465483427, 0.0022832199465483427, 0.00067936722189188, 0.98021000623703],[0.9999901056289673, 9.911624147207476e-06],[0.017691703513264656, 0.9469249248504639],[0.6070989370346069, 0.3929010331630707],[0.9903998970985413, 0.009600093588232994],[0.32179903984069824, 0.00025115947937592864, 0.00318151549436152, 2.9250336410768796e-06, 0.07119273394346237, 1.9419614716298383e-07, 0.5319659113883972, 0.00015952347894199193, 0.00025115947937592864, 2.9250336410768796e-06, 0.07119273394346237, 1.9419614716298383e-07],[0.9976760745048523],[0.49264419078826904, 0.5072954893112183, 5.028172381571494e-06, 5.028172381571494e-06, 5.028172381571494e-06, 5.028172381571494e-06, 5.028172381571494e-06, 5.028172381571494e-06, 5.028172381571494e-06, 5.028172381571494e-06, 5.028172381571494e-06, 5.028172381571494e-06, 5.028172381571494e-06, 5.028172381571494e-06],[0.9999618530273438, 3.8156809750944376e-05],[0.2958752512931824, 0.0015628129476681352, 0.7009521722793579, 4.699771307059564e-05],[0.00022124583483673632, 0.01432181429117918, 0.01432181429117918, 0.8852042555809021, 0.01432181429117918],[0.9996296167373657, 0.0003703990951180458],[0.9999964237213135, 3.5207285691285506e-06],[0.2904335558414459, 0.055847592651844025, 0.0022695346269756556, 0.0004669530608225614, 0.5951347351074219, 0.055847592651844025],[0.0007194219506345689, 0.0007194219506345689, 0.9864155650138855],[0.8888281583786011, 4.05514074373059e-05, 0.10964508354663849]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>