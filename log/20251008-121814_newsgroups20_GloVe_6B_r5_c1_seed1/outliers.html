
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["polysyllabic polysyllabic","autodesk bbs","unsubscribe","unsubscribe","apr <unk> ists dchhabra stpl ists","bullshit","dir","isbn","yep","commodore cdtv","mhz iisi","<unk> <unk>","compuserve com","deleted","lou gehrig <unk>","cheek","abolish cults","pierre turgeon islanders","ernest <unk> <unk> sage purdue edu <unk> sage <unk>","comp graphics faq","liar cheat <unk>","dino ciccarelli ray sheppard","article <unk> sys bison baden sys bison baden bari","ken","brandon wise <unk> nyx edu","secrecy lds ceremonies clh","xli xloadimage goto flag","quoting dougb ecs comm mot com article apr <unk> comm mot com","<unk> file dis <unk> file tga","<unk> jeremy scott noonan","exit","objects <unk>","posted","mjones donald aix kingston ibm com","dancing <unk>","religious fanaticism","alt religion spam","please subscribe","please subscribe","<unk> subscrive please subscribe","please subscribe","<unk> phones","<unk> fantasy <unk> dear elf","dreams","<unk> <unk> umcc umcc umich edu dlc umcc umcc umich edu david","virtualgrabkeys resource belongs olvwm","subscribe <unk> <unk> eve <unk>","okay okay forgot <unk>","ultimate <unk>","please subscrive"];
var att_heads = [4,3,4,4,0,4,0,3,4,0,3,0,4,4,0,4,2,0,0,3,4,0,1,0,0,1,1,1,2,0,2,3,1,0,0,3,3,2,2,2,2,3,4,4,0,3,1,4,4,2];
var trigram_weights = [[0.5, 0.5],[0.0002329152193851769, 0.9997671246528625],[0.9968036413192749],[0.9995993971824646],[0.9964433312416077, 0.001184492139145732, 1.5625515743522556e-06, 0.001184492139145732, 0.001184492139145732, 1.5625515743522556e-06],[0.9999774694442749],[0.46858495473861694],[0.9730273485183716],[0.999981164932251],[0.9999972581863403, 2.73312934950809e-06],[0.9989739656448364, 0.0010260902345180511],[0.5, 0.5],[0.05583679676055908, 0.9209634065628052],[0.9988101720809937],[0.9153562784194946, 0.08338209241628647, 0.0006308317533694208],[0.9990593791007996],[0.9999977350234985, 2.2155529677547747e-06],[0.5666407346725464, 0.14574368298053741, 0.28728482127189636],[0.26792967319488525, 0.0002835668856278062, 0.0002835668856278062, 0.010308167897164822, 0.4415533244609833, 0.2687664031982422, 0.0002835668856278062, 0.010308167897164822, 0.0002835668856278062],[0.0001497369521530345, 0.9983874559402466, 0.00045631927787326276],[0.6532411575317383, 0.34589865803718567, 0.0001228919718414545],[0.4104054868221283, 0.003660032292827964, 0.2994072437286377, 0.28643760085105896],[0.7982523441314697, 0.000987328588962555, 4.5468877942766994e-06, 1.682375796008273e-06, 0.09397442638874054, 4.5468877942766994e-06, 1.682375796008273e-06, 0.09397442638874054, 0.01279896404594183],[0.9997468590736389],[0.9012169241905212, 0.04903332144021988, 5.2433868404477835e-05, 2.9351647867770225e-07, 0.049697138369083405],[0.023085813969373703, 0.20168444514274597, 0.7644103169441223, 0.005409738048911095],[0.00025380405713804066, 0.020315730944275856, 0.003258734941482544, 0.9558560252189636],[0.8006607890129089, 0.00023958929523359984, 1.0348668411097606e-06, 4.106107951429294e-07, 4.939044083585031e-05, 0.0024833132047206163, 0.19370724260807037, 8.568741759518161e-05, 0.00023958929523359984, 4.106107951429294e-07, 4.939044083585031e-05, 0.0024833132047206163],[0.00016816428978927433, 0.49935853481292725, 0.0007752451347187161, 0.00016816428978927433, 0.49935853481292725, 3.1330050660471898e-06],[9.741249232320115e-05, 0.7095810770988464, 0.28296321630477905, 0.006871168501675129],[0.9975684285163879],[0.9995668530464172, 0.00043310225009918213],[0.9992002844810486],[0.00044053434976376593, 0.24622240662574768, 1.949328179762233e-06, 0.7514292001724243, 0.000536065548658371, 4.820754111278802e-05],[0.9985238909721375, 0.0014761164784431458],[0.9983296990394592, 0.001670299214310944],[0.031987592577934265, 0.6164507865905762, 0.35035765171051025],[0.7367160320281982, 0.2595355212688446],[0.7394879460334778, 0.2605120539665222],[0.0005354932509362698, 0.0005354932509362698, 0.7367160320281982, 0.2595355212688446],[0.7394879460334778, 0.2605120539665222],[0.0036556513514369726, 0.9963443875312805],[6.130856490926817e-05, 0.0026563929859548807, 6.130856490926817e-05, 0.9970182180404663, 0.00014142441796138883],[0.9975330829620361],[0.00023885050904937088, 0.00023885050904937088, 0.00023885050904937088, 0.00023885050904937088, 0.00023885050904937088, 0.22638393938541412, 0.0006031583761796355, 0.00023885050904937088, 0.00023885050904937088, 0.00023885050904937088, 0.22638393938541412, 0.5447181463241577],[0.0004311265074647963, 0.9363044500350952, 0.062402162700891495, 0.0004311265074647963],[4.5345288526732475e-05, 0.0005485250148922205, 0.0005485250148922205, 0.99611496925354, 0.0005485250148922205],[0.2445974349975586, 0.2445974349975586, 0.5107985734939575, 3.271828063589055e-06],[0.9995250701904297, 0.0004749889194499701],[0.9992737174034119, 0.0007263372535817325]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>