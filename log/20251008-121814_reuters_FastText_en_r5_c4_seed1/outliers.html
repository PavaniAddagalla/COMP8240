
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["jun jun","jun jun","oct oct","oct oct","oct oct","oct oct","oct oct","apr apr","apr apr","apr apr","walgreen qtr shr cts cts walgreen qtr shr cts cts","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","bancorp <unk> qtr net shr cts cts net mln mln avg shrs mln mln","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","napa valley bancorp <unk> qtr net shr cts cts net","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","<unk> microsystems inc <unk> qtr loss shr loss cts loss cts net loss loss revs avg shrs","<unk> bancorp inc <unk> qtr net shr dlrs dlrs net avg shrs","roto rooter inc roto qtr net shr cts cts net revs mln","morgan inc qtr shr dlrs dlrs morgan inc qtr shr dlrs dlrs","<unk> <unk> <unk> qtr net shr cts cts net sales mln mln avg shrs","national city bancorp <unk> qtr net shr cts cts net","raytheon <unk> qtr net shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","spectra physics rejects ciba geigy tender offer spectra physics rejects ciba geigy tender offer","rubbermaid inc <unk> qtr net shr cts cts net mln mln sales mln mln","<unk> corp <unk> qtr net shr cts cts net mln mln sales mln mln","<unk> corp <unk> qtr net shr dlrs dlr net","<unk> corp ohio <unk> qtr net shr cts cts net","<unk> laboratories ltd <unk> year loss shr loss cts loss cts net loss loss revs","john <unk> qtr net shr cts cts net mln revs mln mln","united telecommunications inc qtr shr cts cts united telecommunications inc qtr shr cts cts","<unk> corp <unk> qtr net shr cts cts net sales mln mln","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","quaker <unk> <unk> qtr sept net shr cts cts net mln mln sales billion mln avg shrs","<unk> inc <unk> qtr sept net shr cts cts net sales mln mln avg shrs mln mln","westinghouse electric corp qtr shr dlrs cts westinghouse electric corp qtr shr dlrs cts","circle express terminates planned acquisition overland express circle express terminates planned acquisition overland express","<unk> acquire prince mln dlrs <unk> acquire prince mln dlrs","whirlpool corp <unk> qtr net shr cts cts net sales mln mln avg shrs","federated department stores march sales pct federated department stores march sales pct","ibc acquisition gets shares tender buy pct ibc acquisition gets shares tender buy pct","<unk> laboratories ltd <unk> qtr net shr profit cts loss cts net profit loss revs","tandy corp <unk> qtr sept net shr cts cts net mln mln revs mln mln avg shrs mln mln","<unk> products inc <unk> qtr net shr cts cts net sales mln mln","<unk> sciences inc <unk> qtr shr cts cts net sales mln backlog mln mln"];
var att_heads = [0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,4,4,0,4,4,0,4,4,4,4,4,4,1,4,4,4,0,0,4,0,4,4,4,4,4,1,4,4,4,4,4,4,4,4];
var trigram_weights = [[0.49352800846099854, 0.49352800846099854],[0.49352800846099854, 0.49352800846099854],[0.4865368604660034, 0.4865368604660034],[0.4865368604660034, 0.4865368604660034],[0.4865368604660034, 0.4865368604660034],[0.4865368604660034, 0.4865368604660034],[0.4865368604660034, 0.4865368604660034],[0.4953279197216034, 0.4953279197216034],[0.4953279197216034, 0.4953279197216034],[0.4953279197216034, 0.4953279197216034],[0.004263644572347403, 0.25571712851524353, 0.05340000241994858, 0.0901118814945221, 0.0901118814945221, 0.004263644572347403, 0.25571712851524353, 0.05340000241994858, 0.0901118814945221, 0.0901118814945221],[0.0005701203481294215, 0.014589319005608559, 0.006916986312717199, 0.23853418231010437, 0.23853418231010437, 0.0005701203481294215, 0.014589319005608559, 0.006916986312717199, 0.23853418231010437, 0.23853418231010437],[0.0013441146584227681, 0.3437190055847168, 0.0806148573756218, 0.016834357753396034, 0.028407784178853035, 0.028407784178853035, 0.0013441146584227681, 0.3437190055847168, 0.0806148573756218, 0.016834357753396034, 0.028407784178853035, 0.028407784178853035],[0.13719089329242706, 0.19052664935588837, 0.08963992446660995, 0.018719015643000603, 0.0315881185233593, 0.0315881185233593, 0.13719089329242706, 0.19052664935588837, 0.08963992446660995, 0.018719015643000603, 0.0315881185233593, 0.0315881185233593],[0.06127114221453667, 0.2303953468799591, 0.10839755088090897, 0.022636067122220993, 0.03819809854030609, 0.03819809854030609, 0.06127114221453667, 0.2303953468799591, 0.10839755088090897, 0.022636067122220993, 0.03819809854030609, 0.03819809854030609],[0.004850771278142929, 0.26002413034439087, 0.12233743816614151, 0.025547059252858162, 0.04311036318540573, 0.04311036318540573, 0.004850771278142929, 0.26002413034439087, 0.12233743816614151, 0.025547059252858162, 0.04311036318540573, 0.04311036318540573],[0.0012417982798069715, 0.0012417982798069715, 0.03177748620510101, 0.043783143162727356, 0.015066121704876423, 0.0332222655415535, 0.0332222655415535, 0.043783143162727356, 0.15764616429805756, 0.15764616429805756, 0.16483548283576965, 0.0012417982798069715, 0.15764616429805756, 0.15764616429805756],[0.012038910761475563, 0.0037218446377664804, 0.025581341236829758, 0.00153214274905622, 0.01212844718247652, 0.4182528555393219, 0.026744406670331955, 0.012038910761475563, 0.0037218446377664804, 0.025581341236829758, 0.00153214274905622, 0.01212844718247652, 0.4182528555393219, 0.026744406670331955],[0.36075714230537415, 0.006415881682187319, 0.06926588714122772, 0.0002796088519971818, 0.014464414678514004, 0.024408534169197083, 0.024408534169197083, 0.36075714230537415, 0.006415881682187319, 0.06926588714122772, 0.0002796088519971818, 0.014464414678514004, 0.024408534169197083, 0.024408534169197083],[0.019630732014775276, 0.0008258161251433194, 0.005874506197869778, 0.005874506197869778, 0.15032799541950226, 0.20712250471115112, 0.07127245515584946, 0.15716272592544556, 0.15716272592544556, 0.20712250471115112],[0.002072670264169574, 0.0005666594370268285, 0.01454547792673111, 0.006896201055496931, 0.23781739175319672, 0.23781739175319672, 0.002072670264169574, 0.0005666594370268285, 0.01454547792673111, 0.006896201055496931, 0.23781739175319672, 0.23781739175319672],[0.0023507396690547466, 0.04113301262259483, 0.6011346578598022, 0.0023507396690547466, 0.14098837971687317, 8.696136501384899e-05, 0.029441826045513153, 8.696136501384899e-05, 0.04968274384737015, 8.696136501384899e-05, 0.04968274384737015, 0.0005691343103535473, 8.696136501384899e-05, 8.696136501384899e-05, 0.017891637980937958, 0.061988797038793564, 0.0023507396690547466],[0.0009200094500556588, 0.0009200094500556588, 0.003848014399409294, 0.0009200094500556588, 0.023542942479252815, 0.032437559217214584, 0.011162016540765762, 0.3849252164363861, 0.3849252164363861, 0.032437559217214584, 0.1221214234828949, 0.0009200094500556588],[0.022135624662041664, 0.0016431605909019709, 0.010354756377637386, 0.022135624662041664, 0.0633525475859642, 0.08728737384080887, 0.030036265030503273, 0.06623288989067078, 0.06623288989067078, 0.08728737384080887, 0.2265377789735794, 0.31428807973861694],[4.822206756216474e-05, 0.002378425793722272, 0.014551697298884392, 0.006899149622768164, 0.23791907727718353, 0.23791907727718353, 4.822206756216474e-05, 0.002378425793722272, 0.014551697298884392, 0.006899149622768164, 0.23791907727718353, 0.23791907727718353],[0.0015380008844658732, 0.0015380008844658732, 0.0015380008844658732, 0.03935727849602699, 0.05422660708427429, 0.0186598002910614, 0.04114668071269989, 0.04114668071269989, 0.05422660708427429, 0.1473570317029953, 0.1952490508556366, 0.1952490508556366, 0.20415320992469788, 0.0015380008844658732],[0.004857208579778671, 0.014171564020216465, 0.005883068777620792, 0.005883068777620792, 0.1505471020936966, 0.20742440223693848, 0.07137634605169296, 0.15739180147647858, 0.15739180147647858, 0.20742440223693848],[0.0005020851385779679, 0.0005020851385779679, 0.012848304584622383, 0.01770244538784027, 0.006091549061238766, 0.2100687474012375, 0.2100687474012375, 0.01770244538784027, 0.06373965740203857, 0.06373965740203857, 0.04594332352280617, 0.07798051089048386, 0.07798051089048386, 0.06664644181728363, 0.0005020851385779679, 0.06373965740203857, 0.06373965740203857],[0.069568932056427, 0.02894798293709755, 0.023753676563501358, 0.027620738372206688, 0.027620738372206688, 0.06237776204943657, 0.2324894517660141, 0.069568932056427, 0.02894798293709755, 0.023753676563501358, 0.027620738372206688, 0.027620738372206688, 0.06237776204943657, 0.2324894517660141],[0.0012961128959432244, 0.005421096459031105, 0.0012961128959432244, 0.03316739201545715, 0.04569815844297409, 0.015725092962384224, 0.03467535972595215, 0.03467535972595215, 0.04569815844297409, 0.16454139351844788, 0.16454139351844788, 0.12418156862258911, 0.16454139351844788, 0.16454139351844788],[0.0012968853116035461, 0.004828418139368296, 0.0012968853116035461, 0.03318715840578079, 0.04572539031505585, 0.015734463930130005, 0.03469602391123772, 0.03469602391123772, 0.04572539031505585, 0.1646394580602646, 0.1646394580602646, 0.12425557523965836, 0.1646394580602646, 0.1646394580602646],[0.0017392177833244205, 0.006475262343883514, 0.0017392177833244205, 0.04450639709830284, 0.061321087181568146, 0.02110106311738491, 0.7276759743690491, 0.06716389209032059, 0.061321087181568146],[0.0014132547657936811, 0.18015794456005096, 0.6498914957046509, 0.0014132547657936811, 0.0847616121172905, 0.00034216116182506084, 0.017700301483273506, 0.02986905723810196, 0.02986905723810196, 0.00034216116182506084],[0.0031778612174093723, 0.017654310911893845, 0.7610019445419312, 0.0031778612174093723, 0.012137139216065407, 0.00011755922605516389, 0.03980110585689545, 0.00011755922605516389, 0.06716391444206238, 0.00011755922605516389, 0.06716391444206238, 0.0007693875813856721, 0.00011755922605516389, 0.00011755922605516389, 0.024186914786696434],[0.0018143024062737823, 0.0015692287124693394, 0.040156397968530655, 0.0553276389837265, 0.019038671627640724, 0.041982125490903854, 0.041982125490903854, 0.0553276389837265, 0.1992134302854538, 0.14359235763549805, 0.1992134302854538, 0.1992134302854538],[0.00880348775535822, 0.005625032354146242, 0.335151731967926, 0.078605517745018, 0.016414757817983627, 0.02769971452653408, 0.02769971452653408, 0.00880348775535822, 0.005625032354146242, 0.335151731967926, 0.078605517745018, 0.016414757817983627, 0.02769971452653408, 0.02769971452653408],[0.0019298371626064181, 0.007184953428804874, 0.0019298371626064181, 0.049384329468011856, 0.06804191321134567, 0.023413753136992455, 0.05162960663437843, 0.05162960663437843, 0.06804191321134567, 0.18489916622638702, 0.24499261379241943, 0.24499261379241943],[0.0013041677884757519, 0.004855531733483076, 0.0013041677884757519, 0.03337351605296135, 0.045982155948877335, 0.015822818502783775, 0.034890856593847275, 0.034890856593847275, 0.045982155948877335, 0.16556395590305328, 0.16556395590305328, 0.11933793872594833, 0.16556395590305328, 0.16556395590305328],[0.0003477217396721244, 0.001075390842743218, 0.001075390842743218, 0.027519136667251587, 0.00012177061580587178, 0.037915974855422974, 0.013047181069850922, 0.028770307078957558, 0.028770307078957558, 0.037915974855422974, 0.13652075827121735, 0.13652075827121735, 0.10303402692079544, 0.16702254116535187, 0.13652075827121735, 0.14274665713310242, 0.001075390842743218],[0.0011044959537684917, 0.004619643557816744, 0.0011044959537684917, 0.028263935819268227, 0.00012506630446296185, 0.038942158222198486, 0.013400301337242126, 0.029548970982432365, 0.029548970982432365, 0.038942158222198486, 0.1058226078748703, 0.140215665102005, 0.140215665102005, 0.1466100662946701, 0.0011044959537684917, 0.140215665102005, 0.140215665102005],[0.00101849518250674, 0.0033903687726706266, 0.0037919480819255114, 0.026063183322548866, 0.01235689502209425, 0.42613092064857483, 0.02724815532565117, 0.00101849518250674, 0.0033903687726706266, 0.0037919480819255114, 0.026063183322548866, 0.01235689502209425, 0.42613092064857483, 0.02724815532565117],[0.092011958360672, 0.09320012480020523, 0.0276474729180336, 0.12988023459911346, 0.004442059434950352, 0.0596180260181427, 0.09320012480020523, 0.092011958360672, 0.09320012480020523, 0.0276474729180336, 0.12988023459911346, 0.004442059434950352, 0.0596180260181427, 0.09320012480020523],[0.0009078227449208498, 0.002473593456670642, 0.00018244655802845955, 0.11524800211191177, 0.3798263967037201, 0.0009078227449208498, 0.002473593456670642, 0.00018244655802845955, 0.11524800211191177, 0.3798263967037201],[0.001308288425207138, 0.00572105823084712, 0.0015366431325674057, 0.03932253643870354, 0.054178740829229355, 0.018643328920006752, 0.04111035540699959, 0.04111035540699959, 0.054178740829229355, 0.1472269594669342, 0.19507670402526855, 0.19507670402526855, 0.20397299528121948, 0.0015366431325674057],[0.00041406566742807627, 0.000995106645859778, 0.06595654785633087, 0.0001911828585434705, 0.19773629307746887, 0.23367489874362946, 0.00041406566742807627, 0.000995106645859778, 0.06595654785633087, 0.0001911828585434705, 0.19773629307746887, 0.23367489874362946],[0.0023170141503214836, 0.08278857171535492, 0.0060279821045696735, 0.01282412651926279, 0.028417110443115234, 0.10528271645307541, 0.2623424828052521, 0.0023170141503214836, 0.08278857171535492, 0.0060279821045696735, 0.01282412651926279, 0.028417110443115234, 0.10528271645307541, 0.2623424828052521],[0.002914630575105548, 0.0050269607454538345, 0.0014124164590612054, 0.002914630575105548, 0.07458509504795074, 0.10276362299919128, 0.03536176308989525, 0.11838803440332413, 0.07797612994909286, 0.00495540676638484, 0.07797612994909286, 0.10276362299919128, 0.11838803440332413, 0.00495540676638484, 0.26670342683792114],[0.0008654074626974761, 0.003221988445147872, 0.0008654074626974761, 0.02214568667113781, 9.799340477911755e-05, 0.030512411147356033, 0.010499559342861176, 0.023152552545070648, 0.023152552545070648, 0.030512411147356033, 0.10986339300870895, 0.10986339300870895, 0.07918915897607803, 0.10986339300870895, 0.10986339300870895, 0.11487361788749695, 0.0008654074626974761, 0.10986339300870895, 0.10986339300870895],[0.001782987848855555, 0.0770578607916832, 0.0074574900791049, 0.001782987848855555, 0.04562647268176079, 0.06286432594060898, 0.021632103249430656, 0.047700896859169006, 0.047700896859169006, 0.06286432594060898, 0.1708294302225113, 0.22635012865066528, 0.22635012865066528],[0.0013582262909039855, 0.0007658146205358207, 0.005680890753865242, 0.0013582262909039855, 0.034756869077682495, 0.016478683799505234, 0.03633710369467735, 0.03633710369467735, 0.047888144850730896, 0.13013270497322083, 0.17242668569087982, 0.17162609100341797, 0.17242668569087982, 0.17242668569087982]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>