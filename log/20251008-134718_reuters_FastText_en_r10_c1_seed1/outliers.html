
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["walgreen qtr shr cts cts walgreen qtr shr cts cts","jun jun","jun jun","apr apr","apr apr","apr apr","ncr corp qtr shr cts cts ncr corp qtr shr cts cts","oct oct","oct oct","oct oct","oct oct","oct oct","rubbermaid inc qtr shr cts cts rubbermaid inc qtr shr cts cts","gte corp qtr shr cts cts gte corp qtr shr cts cts","raytheon qtr shr dlrs dlrs raytheon qtr shr dlrs dlrs","whirlpool corp qtr shr cts cts whirlpool corp qtr shr cts cts","bancorp usbc qtr net shr cts cts net mln mln avg shrs mln mln","mead corp qtr oper shr dlrs cts mead corp qtr oper shr dlrs cts","wells fargo qtr shr dlrs dlrs wells fargo qtr shr dlrs dlrs","morgan inc qtr shr dlrs dlrs morgan inc qtr shr dlrs dlrs","john <unk> qtr net shr cts cts net mln revs mln mln","westinghouse electric corp qtr shr dlrs cts westinghouse electric corp qtr shr dlrs cts","<unk> corp ohio <unk> qtr net shr cts cts net","napa valley bancorp <unk> qtr net shr cts cts net","<unk> corp <unk> qtr net shr cts cts net mln mln revs mln mln","irving bank corp qtr shr dlrs dlrs irving bank corp qtr shr dlrs dlrs","<unk> corp <unk> qtr net shr dlrs dlr net","abbott laboratories qtr net shr cts cts abbott laboratories qtr net shr cts cts","<unk> savings bank <unk> qtr net shr cts cts net avg shrs","<unk> <unk> <unk> qtr net shr cts cts net sales mln mln avg shrs","raytheon <unk> qtr net shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","tandy corp <unk> qtr sept net shr cts cts net mln mln revs mln mln avg shrs mln mln","<unk> corp <unk> qtr sept net shr cts cts net revs mln mln avg shrs mln mln","roto rooter inc roto qtr net shr cts cts net revs mln","<unk> bancorp inc <unk> qtr net shr dlrs dlrs net avg shrs","general electric qtr shr dlrs dlrs general electric qtr shr dlrs dlrs","centerre bancorp ctbc qtr net shr cts dlrs net loans billion billion deposits billion billion assets billion billion","burmah oil pre tax profit mln stg mln burmah oil pre tax profit mln stg mln","ohio edison <unk> qtr net shr cts cts net mln mln revs mln mln avg shrs mln mln mths shr dlrs dlrs net mln mln revs billion billion avg shrs mln mln","ncr corp ncr qtr net shr cts cts net mln mln revs billion mln avg shrs mln mln","national city bancorp <unk> qtr net shr cts cts net","<unk> corp <unk> qtr net shr cts cts net mln mln sales mln mln","wells fargo wfc qtr net shr dlrs dlrs net mln mln avg shrs loans billion billion deposits billion billion assets billion billion","merrill corp <unk> qtr april net shr cts cts net revs mln mln avg shrs","<unk> bancorp <unk> qtr net shr cts cts net loans mln mln deposits billion mln assets billion billion","whirlpool corp <unk> qtr net shr cts cts net sales mln mln avg shrs","barnett banks florida inc <unk> qtr net shr cts cts net mln mln avg shrs mln mln","fleet financial group qtr shr cts cts fleet financial group qtr shr cts cts","chemical new york corp qtr shr dlrs dlrs chemical new york corp qtr shr dlrs dlrs","corby distilleries ltd buy heublein <unk> distillers mln canadian dlrs corby distilleries ltd buy heublein <unk> distillers mln canadian dlrs"];
var att_heads = [5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,1,1,5,5,5,5,5,1,1,1,5,5,1,5,1,5,1,5,5,1,5,5];
var trigram_weights = [[0.007738043554127216, 0.15972770750522614, 0.09255484491586685, 0.11418616026639938, 0.11418616026639938, 0.007738043554127216, 0.15972770750522614, 0.09255484491586685, 0.11418616026639938, 0.11418616026639938],[0.4282812178134918, 0.4282812178134918],[0.4282812178134918, 0.4282812178134918],[0.4286011755466461, 0.4286011755466461],[0.4286011755466461, 0.4286011755466461],[0.4286011755466461, 0.4286011755466461],[0.13122349977493286, 0.2562899589538574, 0.037082210183143616, 0.021487433463335037, 0.02650933526456356, 0.02650933526456356, 0.13122349977493286, 0.2562899589538574, 0.037082210183143616, 0.021487433463335037, 0.02650933526456356, 0.02650933526456356],[0.4411042332649231, 0.4411042332649231],[0.4411042332649231, 0.4411042332649231],[0.4411042332649231, 0.4411042332649231],[0.4411042332649231, 0.4411042332649231],[0.4411042332649231, 0.4411042332649231],[0.0016086924588307738, 0.3976617455482483, 0.03320642188191414, 0.019241591915488243, 0.02373860962688923, 0.02373860962688923, 0.0016086924588307738, 0.3976617455482483, 0.03320642188191414, 0.019241591915488243, 0.02373860962688923, 0.02373860962688923],[0.030076226219534874, 0.3265846371650696, 0.047253042459487915, 0.027380961924791336, 0.033780261874198914, 0.033780261874198914, 0.030076226219534874, 0.3265846371650696, 0.047253042459487915, 0.027380961924791336, 0.033780261874198914, 0.033780261874198914],[0.010839817114174366, 0.22375410795211792, 0.12965519726276398, 0.05974556878209114, 0.05974556878209114, 0.010839817114174366, 0.22375410795211792, 0.12965519726276398, 0.05974556878209114, 0.05974556878209114],[0.012718750163912773, 0.33864763379096985, 0.04899841919541359, 0.028392327949404716, 0.03502799570560455, 0.03502799570560455, 0.012718750163912773, 0.33864763379096985, 0.04899841919541359, 0.028392327949404716, 0.03502799570560455, 0.03502799570560455],[0.00799892283976078, 0.00799892283976078, 0.16511274874210358, 0.010940659791231155, 0.09567522257566452, 0.11803582310676575, 0.11803582310676575, 0.010940659791231155, 0.07796932011842728, 0.07796932011842728, 0.14538496732711792, 0.00799892283976078, 0.07796932011842728, 0.07796932011842728],[0.004787103738635778, 0.3336436152458191, 0.04827439412474632, 0.03792177885770798, 0.027972789481282234, 0.012889958918094635, 0.03451040759682655, 0.004787103738635778, 0.3336436152458191, 0.04827439412474632, 0.03792177885770798, 0.027972789481282234, 0.012889958918094635, 0.03451040759682655],[0.0413716658949852, 0.16562733054161072, 0.13706330955028534, 0.07942187786102295, 0.036597877740859985, 0.036597877740859985, 0.0413716658949852, 0.16562733054161072, 0.13706330955028534, 0.07942187786102295, 0.036597877740859985, 0.036597877740859985],[0.041383951902389526, 0.389149934053421, 0.0324956476688385, 0.01882973313331604, 0.008676806464791298, 0.008676806464791298, 0.041383951902389526, 0.389149934053421, 0.0324956476688385, 0.01882973313331604, 0.008676806464791298, 0.008676806464791298],[0.17780011892318726, 0.00790355447679758, 0.16314415633678436, 0.010810218751430511, 0.09453452378511429, 0.1166285052895546, 0.1166285052895546, 0.010810218751430511, 0.07703971862792969, 0.06271757185459137, 0.07703971862792969, 0.07703971862792969],[0.002527800388634205, 0.0031981435604393482, 0.3606266677379608, 0.052178531885147095, 0.030235055834054947, 0.013932419009506702, 0.03730139508843422, 0.002527800388634205, 0.0031981435604393482, 0.3606266677379608, 0.052178531885147095, 0.030235055834054947, 0.013932419009506702, 0.03730139508843422],[0.004209667909890413, 0.600568950176239, 0.1053801029920578, 0.004209667909890413, 0.0868954211473465, 0.0057578422129154205, 0.05035189911723137, 0.06211981177330017, 0.06211981177330017, 0.0057578422129154205],[0.11040467768907547, 0.00594103941693902, 0.012650497257709503, 0.012650497257709503, 0.2611299455165863, 0.017302928492426872, 0.15131276845932007, 0.18667660653591156, 0.18667660653591156, 0.017302928492426872],[0.0038995351642370224, 0.5563241243362427, 0.0038995351642370224, 0.08049370348453522, 0.0053336527198553085, 0.04664239287376404, 0.057543348520994186, 0.057543348520994186, 0.0053336527198553085, 0.03801063075661659, 0.03801063075661659, 0.030944228172302246, 0.03801063075661659, 0.03801063075661659],[0.05245107039809227, 0.008701249025762081, 0.33607661724090576, 0.04862642288208008, 0.028176773339509964, 0.012983954511582851, 0.012983954511582851, 0.05245107039809227, 0.008701249025762081, 0.33607661724090576, 0.04862642288208008, 0.028176773339509964, 0.012983954511582851, 0.012983954511582851],[0.003941006027162075, 0.562240481376648, 0.003941006027162075, 0.08134973794221878, 0.005390374921262264, 0.04713842645287514, 0.021721551194787025, 0.2531229555606842, 0.005390374921262264],[0.15429972112178802, 0.012732886709272861, 0.10826532542705536, 0.007173850666731596, 0.06273476779460907, 0.07739673554897308, 0.07739673554897308, 0.15429972112178802, 0.012732886709272861, 0.10826532542705536, 0.007173850666731596, 0.06273476779460907, 0.07739673554897308, 0.07739673554897308],[0.019466683268547058, 0.237045019865036, 0.17049910128116608, 0.019466683268547058, 0.0014130662893876433, 0.25159627199172974, 0.0035125764552503824, 0.0026373998261988163, 0.0026373998261988163, 0.25159627199172974, 0.0011961167911067605, 0.019466683268547058],[0.019263558089733124, 0.019263558089733124, 0.019263558089733124, 0.0013983219396322966, 0.24897095561027527, 0.0034759235568344593, 0.002609879244118929, 0.002609879244118929, 0.24897095561027527, 0.40062353014945984, 0.006551322061568499, 0.006551322061568499, 0.0011836361372843385, 0.019263558089733124],[0.008398162201046944, 0.008398162201046944, 0.17335379123687744, 0.011486725881695747, 0.1004505306482315, 0.046287957578897476, 0.046287957578897476, 0.011486725881695747, 0.08186089247465134, 0.08186089247465134, 0.06664246320724487, 0.01936224475502968, 0.01936224475502968, 0.15264137089252472, 0.008398162201046944, 0.08186089247465134, 0.08186089247465134],[0.003165129106491804, 0.4515506327152252, 0.003165129106491804, 0.06533418595790863, 0.06276936084032059, 0.0043291570618748665, 0.037858154624700546, 0.04670611023902893, 0.04670611023902893, 0.0043291570618748665, 0.030852025374770164, 0.030852025374770164, 0.02511644922196865, 0.030852025374770164, 0.030852025374770164, 0.057528022676706314, 0.003165129106491804, 0.030852025374770164, 0.030852025374770164],[0.003384691197425127, 0.4828742742538452, 0.003384691197425127, 0.0698663592338562, 0.06712361425161362, 0.004629466682672501, 0.040484338998794556, 0.04994606971740723, 0.04994606971740723, 0.004629466682672501, 0.026858754456043243, 0.032992202788591385, 0.032992202788591385, 0.06151868402957916, 0.003384691197425127, 0.032992202788591385, 0.032992202788591385],[0.0267040953040123, 0.005479248706251383, 0.7034107446670532, 0.0267040953040123, 0.05873774364590645, 0.003892065491527319, 0.0340358167886734, 0.04199044406414032, 0.04199044406414032, 0.003892065491527319, 0.022580575197935104, 0.02773706056177616],[0.0031572338193655014, 0.0031572338193655014, 0.7804543972015381, 0.0031572338193655014, 0.06517121195793152, 0.004318357910960913, 0.03776371479034424, 0.017401650547981262, 0.017401650547981262, 0.004318357910960913, 0.057384517043828964, 0.0031572338193655014],[0.3250133693218231, 0.16702215373516083, 0.0004596034705173224, 0.0011424747062847018, 0.0015982930781319737, 0.0015982930781319737, 0.3250133693218231, 0.16702215373516083, 0.0004596034705173224, 0.0011424747062847018, 0.0015982930781319737, 0.0015982930781319737],[0.012540789321064949, 0.012540789321064949, 0.012540789321064949, 0.0009103230549953878, 0.16208285093307495, 0.002262864727526903, 0.0016990602016448975, 0.003165692090988159, 0.16208285093307495, 0.17653892934322357, 0.02578926272690296, 0.02578926272690296, 0.166477769613266, 0.02578926272690296, 0.02578926272690296, 0.13242167234420776, 0.02578926272690296, 0.02578926272690296],[0.007781378924846649, 0.08710256963968277, 0.01977136731147766, 0.10571379214525223, 0.2685191035270691, 0.002646360546350479, 0.0019283810397610068, 0.002646360546350479, 0.007781378924846649, 0.08710256963968277, 0.01977136731147766, 0.10571379214525223, 0.2685191035270691, 0.002646360546350479, 0.0019283810397610068, 0.002646360546350479],[0.07926183938980103, 0.09363531321287155, 0.003166313050314784, 0.06535864621400833, 0.004330777563154697, 0.037872299551963806, 0.04672359675168991, 0.04672359675168991, 0.004330777563154697, 0.030863575637340546, 0.030863575637340546, 0.025125835090875626, 0.030863575637340546, 0.030863575637340546, 0.05754954740405083, 0.003166313050314784, 0.030863575637340546, 0.030863575637340546, 0.04023854807019234, 0.037872299551963806, 0.0174516960978508, 0.0174516960978508, 0.004330777563154697, 0.030863575637340546, 0.030863575637340546, 0.025125835090875626, 0.007300041150301695, 0.007300041150301695, 0.05754954740405083, 0.003166313050314784, 0.030863575637340546, 0.030863575637340546],[0.16918104887008667, 0.33042407035827637, 0.16918104887008667, 0.04780856519937515, 0.0031678786035627127, 0.02770286053419113, 0.03417739272117615, 0.03417739272117615, 0.0031678786035627127, 0.022576097398996353, 0.022576097398996353, 0.01837906613945961, 0.005339839495718479, 0.022576097398996353, 0.042096368968486786, 0.0023160965647548437, 0.022576097398996353, 0.022576097398996353],[0.39812618494033813, 0.19463656842708588, 0.01298054214566946, 0.01298054214566946, 0.0009422440198250115, 0.16776642203330994, 0.0023422143422067165, 0.0017586395842954516, 0.0017586395842954516, 0.16776642203330994],[0.003987951669842005, 0.5689379572868347, 0.003987951669842005, 0.08231878280639648, 0.005454585887491703, 0.0476999431848526, 0.0588480606675148, 0.0588480606675148, 0.005454585887491703, 0.03887246921658516, 0.03887246921658516, 0.00897225458174944, 0.03887246921658516, 0.03887246921658516],[0.019687475636601448, 0.000294210301944986, 0.0014944823924452066, 0.0009037088602781296, 0.16090519726276398, 0.002246423391625285, 0.003142690984532237, 0.003142690984532237, 0.16090519726276398, 0.004233994986861944, 0.004233994986861944, 0.0007649615290574729, 0.012449671514332294, 0.17525625228881836, 0.025601884350180626, 0.025601884350180626, 0.1652681827545166, 0.025601884350180626, 0.025601884350180626, 0.1314595341682434, 0.025601884350180626, 0.025601884350180626],[0.0754970908164978, 0.470496267080307, 0.0032979280222207308, 0.06807540357112885, 0.07983285188674927, 0.0045107947662472725, 0.03944656252861023, 0.04866575077176094, 0.04866575077176094, 0.0045107947662472725, 0.02617025561630726, 0.032146479934453964, 0.032146479934453964, 0.059941716492176056, 0.0032979280222207308],[0.013427537865936756, 0.013427537865936756, 0.013427537865936756, 0.0009746911819092929, 0.17354358732700348, 0.0024228699039667845, 0.0018191993003711104, 0.0018191993003711104, 0.17354358732700348, 0.18902184069156647, 0.004566556308418512, 0.004566556308418512, 0.1782492697238922, 0.027612797915935516, 0.004566556308418512, 0.14178510010242462, 0.027612797915935516, 0.027612797915935516],[0.021029172465205193, 0.5599197745323181, 0.0039247386157512665, 0.08101394772529602, 0.0053681256249547005, 0.04694385454058647, 0.05791526287794113, 0.05791526287794113, 0.0053681256249547005, 0.008830035105347633, 0.03825630247592926, 0.03825630247592926, 0.0713343620300293, 0.0039247386157512665],[0.05990151688456535, 0.0036012420896440744, 0.060487374663352966, 0.5833473801612854, 0.0023598610423505306, 0.04871194437146187, 0.0032277386635541916, 0.028226330876350403, 0.03482320159673691, 0.03482320159673691, 0.0032277386635541916, 0.02300269342958927, 0.02300269342958927, 0.042891815304756165, 0.0023598610423505306, 0.02300269342958927, 0.02300269342958927],[0.06846475601196289, 0.27473190426826477, 0.15433695912361145, 0.00034167070407420397, 0.0008493193308822811, 0.0006377070094458759, 0.0006377070094458759, 0.06846475601196289, 0.27473190426826477, 0.15433695912361145, 0.00034167070407420397, 0.0008493193308822811, 0.0006377070094458759, 0.0006377070094458759],[0.004745987243950367, 0.0007545213447883725, 0.06760550290346146, 0.3260471522808075, 0.04717527702450752, 0.02733590081334114, 0.012596477754414082, 0.012596477754414082, 0.004745987243950367, 0.0007545213447883725, 0.06760550290346146, 0.3260471522808075, 0.04717527702450752, 0.02733590081334114, 0.012596477754414082, 0.012596477754414082],[0.05429913476109505, 0.007517494726926088, 0.3064187169075012, 0.0003840323188342154, 0.004148557782173157, 0.004148557782173157, 0.005042647011578083, 0.0404379740357399, 0.05473736673593521, 0.02286550961434841, 0.05429913476109505, 0.007517494726926088, 0.3064187169075012, 0.0003840323188342154, 0.004148557782173157, 0.004148557782173157, 0.005042647011578083, 0.0404379740357399, 0.05473736673593521, 0.02286550961434841]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>