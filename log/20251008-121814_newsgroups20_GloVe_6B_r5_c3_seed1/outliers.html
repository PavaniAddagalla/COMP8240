
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Visualization of Self-Attention Weights
    </h3>
    </body>
    <script>
    var any_text = ["polysyllabic polysyllabic","bullshit","dir","apr <unk> ists <unk> <unk> ists","yep","unsubscribe","unsubscribe","autodesk bbs","commodore cdtv","isbn","<unk> <unk>","<unk>","mhz iisi","lou gehrig <unk>","ernest <unk> <unk> sage purdue edu <unk> sage <unk>","pierre turgeon islanders","abolish cults","xli xloadimage goto flag","ken","dino ciccarelli ray sheppard","liar cheat <unk>","<unk> jeremy scott noonan","deleted","compuserve com","secrecy lds ceremonies clh","dancing <unk>","brandon wise <unk> nyx edu","religious fanaticism","dreams","okay okay forgot <unk>","exit","article <unk> sys bison baden sys bison baden bari","career mattingly","blessed hunger thirst righteousness filled","consistently","david","joke","gee forgotten nut","kent wife","comp graphics faq","jesus peace","<unk> file dis <unk> file tga","fuhr rings <unk> errey bob rings","ultimate <unk>","overall career mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly mattingly","xli xloadimage imagemagick export lcs mit edu contrib","shut andi","inline inline correct","objects <unk>","posted"];
var att_heads = [4,4,4,0,2,0,0,4,4,4,0,0,4,2,3,3,0,3,2,3,2,3,4,4,3,2,2,3,2,2,3,0,3,2,2,3,2,2,3,4,3,0,3,2,3,1,3,0,4,3];
var trigram_weights = [[0.5, 0.5],[0.7573329210281372],[0.8563659191131592],[0.2094278782606125, 0.013380181044340134, 0.3752157986164093, 0.013380181044340134, 0.013380181044340134, 0.3752157986164093],[0.9862906336784363],[0.9996746778488159],[0.9996746778488159],[0.47643736004829407, 0.5235626101493835],[0.9473781585693359, 0.052621837705373764],[0.986763060092926],[0.5, 0.5],[0.5],[0.991999626159668, 0.008000331930816174],[0.9131212830543518, 0.07085070759057999, 0.00801400002092123],[0.9509423971176147, 0.003017234383150935, 0.003017234383150935, 0.0011155711254104972, 0.0346762016415596, 8.136407268466428e-05, 0.003017234383150935, 0.0011155711254104972, 0.003017234383150935],[0.5192837119102478, 0.0022384815383702517, 0.4731309413909912],[0.7684645056724548, 0.07337084412574768],[0.00031251608743332326, 0.010540198534727097, 9.166295058093965e-05, 0.9363546967506409],[0.9225755929946899],[0.0012600603513419628, 2.413242509646807e-05, 0.5785558223724365, 0.4201599359512329],[0.6698482036590576, 0.32303187251091003, 0.003559995209798217],[0.006734731141477823, 0.35320305824279785, 0.6325651407241821, 0.0007623553392477334],[0.9983358979225159],[0.1789150983095169, 0.8210849165916443],[0.004951939452439547, 0.09188482910394669, 0.8551698923110962, 0.007998895831406116],[0.9993956089019775, 0.0006044137408025563],[0.026438042521476746, 0.9724903106689453, 0.0005067536258138716, 2.7253292500972748e-05, 3.0980430892668664e-05],[0.9999822378158569, 1.7777669199858792e-05],[0.9995573163032532],[0.4835534691810608, 0.4835534691810608, 0.03236929699778557, 0.0002618690486997366],[0.9325975775718689],[0.9128082990646362, 0.001001080614514649, 0.04047335684299469, 1.036461708281422e-05, 0.00260262587107718, 0.04047335684299469, 1.036461708281422e-05, 0.00260262587107718, 1.7831082004704513e-05],[0.9998303651809692, 0.0001696330145932734],[0.7494897246360779, 0.02111765742301941, 0.15175175666809082, 0.07463067770004272, 0.003010281827300787],[0.9983829259872437],[0.9941925406455994],[0.9991012811660767],[0.05795208737254143, 0.3306901752948761, 0.6103963255882263],[0.7191842198371887, 0.2808157503604889],[0.07010835409164429, 0.9033817648887634, 0.0259908065199852],[0.23585191369056702, 0.7641480565071106],[0.000520058092661202, 0.49842095375061035, 0.0011162713635712862, 0.000520058092661202, 0.49842095375061035, 0.001001641619950533],[0.00013458817556966096, 0.07615888863801956, 0.01030814927071333, 2.860747554223053e-05, 0.8269028067588806, 0.07615888863801956],[0.9964913725852966, 0.003508595749735832],[0.30586904287338257, 0.6927205920219421, 0.00011752820864785463, 0.00011752820864785463, 0.00011752820864785463, 0.00011752820864785463, 0.00011752820864785463, 0.00011752820864785463, 0.00011752820864785463, 0.00011752820864785463, 0.00011752820864785463, 0.00011752820864785463, 0.00011752820864785463, 0.00011752820864785463],[0.0015685015823692083, 0.00045741102076135576, 0.00045741102076135576, 0.9959266185760498, 0.0005347878322936594, 0.00012412885553203523, 1.6320624126819894e-05, 0.00045741102076135576],[0.9978455305099487, 0.002154428279027343],[5.380309812608175e-05, 5.380309812608175e-05, 0.9965040683746338],[0.9980046153068542, 0.001995363738387823],[0.9891642928123474]];
var example_range = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    } else {
    var heat_text = "<b>" + example_range[k] + ". (h" + att_heads[k] + ")</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>